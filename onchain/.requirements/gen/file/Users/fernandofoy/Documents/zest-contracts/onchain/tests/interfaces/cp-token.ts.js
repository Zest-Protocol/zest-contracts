import { Tx, types } from 'https://deno.land/x/clarinet@v1.0.2/index.ts';
class CPToken {
    chain;
    deployer;
    constructor(chain, deployer){
        this.chain = chain;
        this.deployer = deployer;
    }
    withdrawFunds(cpToken, lender) {
        return this.chain.mineBlock([
            Tx.contractCall(`${cpToken}`, "withdraw-rewards", [], lender)
        ]);
    }
    withdrawableFundsOf(cpToken, caller) {
        return this.chain.callReadOnlyFn(`${this.deployer.address}.${cpToken}`, "withdrawable-funds-of", [
            types.principal(caller), 
        ], this.deployer.address);
    }
    recognizableLossesOf(cpToken, tokenId, caller) {
        return this.chain.callReadOnlyFn(`${this.deployer.address}.${cpToken}`, "recognizable-losses-of-read", [
            types.uint(tokenId),
            types.principal(caller), 
        ], this.deployer.address);
    }
    getLossesPerShare(cpToken, tokenId) {
        return this.chain.callReadOnlyFn(`${this.deployer.address}.${cpToken}`, "get-losses-per-share", [
            types.uint(tokenId), 
        ], this.deployer.address);
    }
    getBalance(cpToken, tokenId, owner) {
        return this.chain.callReadOnlyFn(`${this.deployer.address}.${cpToken}`, "get-balance", [
            types.uint(tokenId),
            types.principal(owner), 
        ], this.deployer.address);
    }
    getCycleStart(cpToken, tokenId) {
        return this.chain.callReadOnlyFn(`${cpToken}`, "get-cycle-start", [
            types.uint(tokenId), 
        ], this.deployer.address).result;
    }
    getNextCycleHeight(cpToken, tokenId) {
        return this.chain.callReadOnlyFn(`${cpToken}`, "get-next-cycle-height", [
            types.uint(tokenId), 
        ], this.deployer.address);
    }
    getCycleRewards(cpToken, tokenId, cycle) {
        return this.chain.callReadOnlyFn(`${cpToken}`, "get-cycle-rewards", [
            types.uint(tokenId),
            types.uint(cycle), 
        ], this.deployer.address).result;
    }
    getCycleShare(cpToken, tokenId, cycle) {
        return this.chain.callReadOnlyFn(`${cpToken}`, "get-cycle-share", [
            types.uint(tokenId),
            types.uint(cycle), 
        ], this.deployer.address).result;
    }
    getCycleShareByPrincipal(cpToken, tokenId, cycle, owner) {
        return this.chain.callReadOnlyFn(`${cpToken}`, "get-cycle-share-principal", [
            types.uint(tokenId),
            types.uint(cycle),
            types.principal(owner), 
        ], this.deployer.address).result;
    }
    getCurrentCycle(cpToken, tokenId) {
        return this.chain.callReadOnlyFn(cpToken, "get-current-cycle", [
            types.uint(tokenId), 
        ], this.deployer.address);
    }
    getCoverPoolFundsBalance(cpToken, tokenId, sender) {
        return this.chain.callReadOnlyFn(cpToken, "get-cover-pool-funds-balance", [
            types.uint(tokenId),
            types.principal(sender), 
        ], this.deployer.address);
    }
}
export { CPToken };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvZmVybmFuZG9mb3kvRG9jdW1lbnRzL3plc3QtY29udHJhY3RzL29uY2hhaW4vdGVzdHMvaW50ZXJmYWNlcy9jcC10b2tlbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUeCwgQ2hhaW4sIEFjY291bnQsIHR5cGVzIH0gZnJvbSAnaHR0cHM6Ly9kZW5vLmxhbmQveC9jbGFyaW5ldEB2MS4wLjIvaW5kZXgudHMnO1xuXG5jbGFzcyBDUFRva2VuIHtcbiAgY2hhaW46IENoYWluO1xuICBkZXBsb3llcjogQWNjb3VudDtcblxuICBjb25zdHJ1Y3RvcihjaGFpbjogQ2hhaW4sIGRlcGxveWVyOiBBY2NvdW50KSB7XG4gICAgICB0aGlzLmNoYWluID0gY2hhaW47XG4gICAgICB0aGlzLmRlcGxveWVyID0gZGVwbG95ZXI7XG4gIH1cblxuICB3aXRoZHJhd0Z1bmRzKGNwVG9rZW46IHN0cmluZywgbGVuZGVyOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpbi5taW5lQmxvY2soW1xuICAgICAgVHguY29udHJhY3RDYWxsKFxuICAgICAgICBgJHtjcFRva2VufWAsXG4gICAgICAgIFwid2l0aGRyYXctcmV3YXJkc1wiLFxuICAgICAgICBbXSxcbiAgICAgICAgbGVuZGVyXG4gICAgICApXG4gICAgXSk7XG4gIH1cblxuICB3aXRoZHJhd2FibGVGdW5kc09mKGNwVG9rZW46IHN0cmluZywgY2FsbGVyOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpbi5jYWxsUmVhZE9ubHlGbihgJHt0aGlzLmRlcGxveWVyLmFkZHJlc3N9LiR7Y3BUb2tlbn1gLCBcIndpdGhkcmF3YWJsZS1mdW5kcy1vZlwiLCBbXG4gICAgICB0eXBlcy5wcmluY2lwYWwoY2FsbGVyKSxcbiAgICBdLCB0aGlzLmRlcGxveWVyLmFkZHJlc3MpO1xuICB9XG5cbiAgcmVjb2duaXphYmxlTG9zc2VzT2YoY3BUb2tlbjogc3RyaW5nLCB0b2tlbklkOiBudW1iZXIsIGNhbGxlcjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW4uY2FsbFJlYWRPbmx5Rm4oYCR7dGhpcy5kZXBsb3llci5hZGRyZXNzfS4ke2NwVG9rZW59YCwgXCJyZWNvZ25pemFibGUtbG9zc2VzLW9mLXJlYWRcIiwgW1xuICAgICAgdHlwZXMudWludCh0b2tlbklkKSxcbiAgICAgIHR5cGVzLnByaW5jaXBhbChjYWxsZXIpLFxuICAgIF0sIHRoaXMuZGVwbG95ZXIuYWRkcmVzcyk7XG4gIH1cblxuICBnZXRMb3NzZXNQZXJTaGFyZShjcFRva2VuOiBzdHJpbmcsIHRva2VuSWQ6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmNoYWluLmNhbGxSZWFkT25seUZuKGAke3RoaXMuZGVwbG95ZXIuYWRkcmVzc30uJHtjcFRva2VufWAsIFwiZ2V0LWxvc3Nlcy1wZXItc2hhcmVcIiwgW1xuICAgICAgdHlwZXMudWludCh0b2tlbklkKSxcbiAgICBdLCB0aGlzLmRlcGxveWVyLmFkZHJlc3MpO1xuICB9XG5cbiAgZ2V0QmFsYW5jZShjcFRva2VuOiBzdHJpbmcsIHRva2VuSWQ6IG51bWJlciwgb3duZXI6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmNoYWluLmNhbGxSZWFkT25seUZuKFxuICAgICAgYCR7dGhpcy5kZXBsb3llci5hZGRyZXNzfS4ke2NwVG9rZW59YCxcbiAgICAgIFwiZ2V0LWJhbGFuY2VcIixcbiAgICAgIFtcbiAgICAgICAgdHlwZXMudWludCh0b2tlbklkKSxcbiAgICAgICAgdHlwZXMucHJpbmNpcGFsKG93bmVyKSxcbiAgICAgIF0sXG4gICAgICB0aGlzLmRlcGxveWVyLmFkZHJlc3NcbiAgICApO1xuICB9XG5cbiAgZ2V0Q3ljbGVTdGFydChjcFRva2VuOiBzdHJpbmcsIHRva2VuSWQ6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmNoYWluLmNhbGxSZWFkT25seUZuKFxuICAgICAgYCR7Y3BUb2tlbn1gLFxuICAgICAgXCJnZXQtY3ljbGUtc3RhcnRcIixcbiAgICAgIFtcbiAgICAgICAgdHlwZXMudWludCh0b2tlbklkKSxcbiAgICAgIF0sXG4gICAgICB0aGlzLmRlcGxveWVyLmFkZHJlc3NcbiAgICApLnJlc3VsdDtcbiAgfVxuXG4gIGdldE5leHRDeWNsZUhlaWdodChjcFRva2VuOiBzdHJpbmcsIHRva2VuSWQ6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmNoYWluLmNhbGxSZWFkT25seUZuKFxuICAgICAgYCR7Y3BUb2tlbn1gLFxuICAgICAgXCJnZXQtbmV4dC1jeWNsZS1oZWlnaHRcIixcbiAgICAgIFtcbiAgICAgICAgdHlwZXMudWludCh0b2tlbklkKSxcbiAgICAgIF0sXG4gICAgICB0aGlzLmRlcGxveWVyLmFkZHJlc3NcbiAgICApO1xuICB9XG5cbiAgZ2V0Q3ljbGVSZXdhcmRzKGNwVG9rZW46IHN0cmluZywgdG9rZW5JZDogbnVtYmVyLCBjeWNsZTogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW4uY2FsbFJlYWRPbmx5Rm4oXG4gICAgICBgJHtjcFRva2VufWAsXG4gICAgICBcImdldC1jeWNsZS1yZXdhcmRzXCIsXG4gICAgICBbXG4gICAgICAgIHR5cGVzLnVpbnQodG9rZW5JZCksXG4gICAgICAgIHR5cGVzLnVpbnQoY3ljbGUpLFxuICAgICAgXSxcbiAgICAgIHRoaXMuZGVwbG95ZXIuYWRkcmVzc1xuICAgICkucmVzdWx0O1xuICB9XG5cbiAgZ2V0Q3ljbGVTaGFyZShjcFRva2VuOiBzdHJpbmcsIHRva2VuSWQ6IG51bWJlciwgY3ljbGU6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmNoYWluLmNhbGxSZWFkT25seUZuKFxuICAgICAgYCR7Y3BUb2tlbn1gLFxuICAgICAgXCJnZXQtY3ljbGUtc2hhcmVcIixcbiAgICAgIFtcbiAgICAgICAgdHlwZXMudWludCh0b2tlbklkKSxcbiAgICAgICAgdHlwZXMudWludChjeWNsZSksXG4gICAgICBdLFxuICAgICAgdGhpcy5kZXBsb3llci5hZGRyZXNzXG4gICAgKS5yZXN1bHQ7XG4gIH1cblxuICBnZXRDeWNsZVNoYXJlQnlQcmluY2lwYWwoY3BUb2tlbjogc3RyaW5nLCB0b2tlbklkOiBudW1iZXIsIGN5Y2xlOiBudW1iZXIsIG93bmVyOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpbi5jYWxsUmVhZE9ubHlGbihcbiAgICAgIGAke2NwVG9rZW59YCxcbiAgICAgIFwiZ2V0LWN5Y2xlLXNoYXJlLXByaW5jaXBhbFwiLFxuICAgICAgW1xuICAgICAgICB0eXBlcy51aW50KHRva2VuSWQpLFxuICAgICAgICB0eXBlcy51aW50KGN5Y2xlKSxcbiAgICAgICAgdHlwZXMucHJpbmNpcGFsKG93bmVyKSxcbiAgICAgIF0sXG4gICAgICB0aGlzLmRlcGxveWVyLmFkZHJlc3NcbiAgICApLnJlc3VsdDtcbiAgfVxuXG4gIGdldEN1cnJlbnRDeWNsZShjcFRva2VuOiBzdHJpbmcsIHRva2VuSWQ6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmNoYWluLmNhbGxSZWFkT25seUZuKFxuICAgICAgY3BUb2tlbixcbiAgICAgIFwiZ2V0LWN1cnJlbnQtY3ljbGVcIiwgXG4gICAgICBbXG4gICAgICAgIHR5cGVzLnVpbnQodG9rZW5JZCksXG4gICAgICBdLFxuICAgICAgdGhpcy5kZXBsb3llci5hZGRyZXNzXG4gICAgKTtcbiAgfVxuXG4gIGdldENvdmVyUG9vbEZ1bmRzQmFsYW5jZShjcFRva2VuOiBzdHJpbmcsIHRva2VuSWQ6IG51bWJlciwgc2VuZGVyOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpbi5jYWxsUmVhZE9ubHlGbihcbiAgICAgIGNwVG9rZW4sXG4gICAgICBcImdldC1jb3Zlci1wb29sLWZ1bmRzLWJhbGFuY2VcIiwgXG4gICAgICBbXG4gICAgICAgIHR5cGVzLnVpbnQodG9rZW5JZCksXG4gICAgICAgIHR5cGVzLnByaW5jaXBhbChzZW5kZXIpLFxuICAgICAgXSxcbiAgICAgIHRoaXMuZGVwbG95ZXIuYWRk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