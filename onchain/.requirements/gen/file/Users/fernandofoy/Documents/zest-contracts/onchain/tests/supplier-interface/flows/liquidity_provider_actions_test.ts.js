// deno-lint-ignore-file
import { Clarinet, Tx, types } from 'https://deno.land/x/clarinet@v1.0.3/index.ts';
import { Pool } from '../../interfaces/pool-v1-0.ts';
import { CoverPool } from '../../interfaces/cover-pool-v1-0.ts';
import { Loan } from '../../interfaces/loan-v1-0.ts';
import { LPToken } from '../../interfaces/lp-token.ts';
import { Buffer } from "https://deno.land/std@0.159.0/node/buffer.ts";
import { TestUtils } from '../../interfaces/test-utils.ts';
import { Magic } from '../../interfaces/magic_real.ts';
import { Globals } from '../../interfaces/globals.ts';
import { SupplierInterface } from '../../interfaces/supplier_interface.ts';
import { Payment } from '../../interfaces/payment.ts';
import { getHash, getTxId, getExpiration, swapperBuff, generateP2PKHTx, generateP2SHTx } from "../util.ts";
import { sendFundsP2SHTxs, registerSupplierTxs, finalizeOutboundTxs, consumeUint, finalizeDrawdown, makePaymentTxs } from '../../interfaces/common.ts';
import { LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, LIQUIDITY_VAULT, CP_TOKEN, XBTC, COLL_VAULT, FUNDING_VAULT, P2PKH_VERSION, HASH, recipient, sender, preimage, CP_REWARDS_TOKEN, COVER_VAULT, SWAP_ROUTER } from "../config.ts";
const MAX_MATURITY_LENGTH = 144 * 365 * 3; // 3 years
Clarinet.test({
    name: "Liquidity providers can send funds to Liquidity Pool 0 and to the Cover Pool",
    async fn (chain, accounts) {
        let deployerWallet = accounts.get("deployer");
        let LP_1 = accounts.get("wallet_1"); // LP_1
        let LP_2 = accounts.get("wallet_2"); // LP_2
        let coverPoolProvider = accounts.get("wallet_3"); // Cover_1
        let delegate_1 = accounts.get("wallet_7"); // Delegate_1
        let delegate_2 = accounts.get("wallet_9"); // Delegate_2
        let borrower_1 = accounts.get("wallet_8"); // borrower_1
        let assetMaps = chain.getAssetsMaps();
        let pool = new Pool(chain, deployerWallet);
        let loan = new Loan(chain, deployerWallet);
        let coverPool = new CoverPool(chain, deployerWallet);
        let block = pool.createPool(delegate_1.address, LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, 1000, 1000, 10_000_000_000, 10_000_000_000, 1, MAX_MATURITY_LENGTH, LIQUIDITY_VAULT, CP_TOKEN, COVER_VAULT, CP_REWARDS_TOKEN, XBTC, true);
        pool.finalizePool(delegate_1.address, LP_TOKEN, ZP_TOKEN, CP_TOKEN, 0);
        // creating second pool
        block = pool.createPool(delegate_2.address, LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, 1000, 1000, 10_000_000_000, 10_000_000_000, 1, MAX_MATURITY_LENGTH, LIQUIDITY_VAULT, CP_TOKEN, COVER_VAULT, CP_REWARDS_TOKEN, XBTC, true);
        block = pool.finalizePool(delegate_2.address, LP_TOKEN, ZP_TOKEN, CP_TOKEN, 1);
        // TO BE DONE DURING DEPLOYMENT
        // Prepare supplier, has to be done by backend.
        block = chain.mineBlock([
            Tx.contractCall("Wrapped-Bitcoin", "transfer", [
                types.uint(10_000_000_000),
                types.principal(deployerWallet.address),
                types.principal(`${deployerWallet.address}.supplier-interface`),
                types.none(), 
            ], deployerWallet.address),
            Tx.contractCall("supplier-interface", 'register-supplier', [
                types.buff(Buffer.from(recipient, "hex")),
                types.some(types.int(10)),
                types.some(types.int(10)),
                types.int(500),
                types.int(500),
                types.ascii("supplier-1"),
                types.uint(10_000_000_000), 
            ], deployerWallet.address)
        ]);
        // END OF DEPLOYMENT PREPARATION
        // Liquidity Provider 1 has to initialize as a swapper
        const supplierId1 = consumeUint(block.receipts[1].result.expectOk());
        block = chain.mineBlock([
            Tx.contractCall("magic-protocol", 'initialize-swapper', [], LP_1.address)
        ]);
        const lp1SwapperId = 0;
        const expiration = 500;
        const sent_amount = 100_000_000;
        let hash = getHash(preimage);
        let tx1 = generateP2SHTx(sender, recipient, expiration, hash, lp1SwapperId, sent_amount);
        let txid1 = getTxId(tx1);
        // NOT DONE ON TESTNET add Transaction dummy to test the contract on simnet. Equivalent of sending the Bitcoin transaction on the Bitcoin blockchain
        block = chain.mineBlock([
            Tx.contractCall("test-utils", "set-mined", [
                types.buff(Buffer.from(txid1, "hex"))
            ], deployerWallet.address)
        ]);
        // Transaction data
        const bitcoinBlock = {
            header: "",
            height: chain.blockHeight - 1
        };
        const prevBlocks = [];
        const proof = {
            "tx-index": 0,
            "hashes": [],
            "tree-depth": 0
        };
        // Output in which we're interested for the transaction
        const outputIndex = 0;
        // the 10 percent is  based on the inbound fee of supplier-1
        const minToReceive = sent_amount * 10 / 10_000;
        // sending funds by validating transaction.
        block = chain.mineBlock([
            Tx.contractCall("supplier-interface", "send-funds", [
                // Data used by the Magic Magic contract to prove that the Bitcoin transaction happened
                types.tuple({
                    header: types.buff(Buffer.from(bitcoinBlock.header, "hex")),
                    height: types.uint(bitcoinBlock.height)
                }),
                types.list(prevBlocks.map((val)=>types.buff(Buffer.from(val, "hex")))),
                types.buff(Buffer.from(tx1, "hex")),
                types.tuple({
                    "tx-index": types.uint(proof['tx-index']),
                    "hashes": types.list(proof.hashes.map((val)=>types.buff(Buffer.from(val, "hex")))),
                    "tree-depth": types.uint(proof['tree-depth'])
                }),
                types.uint(outputIndex),
                // end of Bitcoin Proof
                types.buff(Buffer.from(sender, "hex")),
                types.buff(Buffer.from(recipient, "hex")),
                types.buff(Buffer.from(getExpiration(expiration), "hex")),
                types.buff(Buffer.from(hash, "hex")),
                types.buff(Buffer.from(swapperBuff(lp1SwapperId), "hex")),
                types.uint(supplierId1),
                types.uint(minToReceive)
            ], LP_1.address)
        ]);
        const commitmentTime = 1;
        const poolId_0 = 0;
        block = chain.mineBlock([
            Tx.contractCall("supplier-interface", "send-funds-finalize", [
                types.buff(Buffer.from(txid1, "hex")),
                types.buff(Buffer.from(preimage, "hex")),
                types.uint(commitmentTime),
                types.principal(`${deployerWallet.address}.lp-token`),
                types.uint(poolId_0),
                types.principal(`${deployerWallet.address}.zest-reward-dist`),
                types.principal(`${deployerWallet.address}.liquidity-vault-v1-0`),
                types.principal(`${deployerWallet.address}.Wrapped-Bitcoin`),
                types.principal(`${deployerWallet.address}.rewards-calc`)
            ], LP_1.address)
        ]);
        // console.log(block);
        // same process for a second Liquidity Provider, sending to pool 1
        block = chain.mineBlock([
            Magic.initializeSwapper(LP_2.address),
            ...sendFundsP2SHTxs(deployerWallet.address, 1, LP_2.address, sender, recipient, 500, 1, 100_000_000, preimage, 0, 100_000_000 * 10 / 10_000, 1, chain.blockHeight - 1), 
        ]);
    }
});
Clarinet.test({
    name: "Liquidity providers can send funds to Liquidity Pool 0 and to the Cover Pool, then waits until commitment ends and can withdraw sent funds.",
    async fn (chain, accounts) {
        let deployerWallet = accounts.get("deployer");
        let LP_1 = accounts.get("wallet_1"); // LP_1
        let LP_2 = accounts.get("wallet_2"); // LP_2
        let coverPoolProvider1 = accounts.get("wallet_3"); // Cover_1
        let coverPoolProvider2 = accounts.get("wallet_4"); // Cover_2
        let delegate_1 = accounts.get("wallet_7"); // Delegate_1
        let borrower_1 = accounts.get("wallet_8"); // borrower_1
        let assetMaps = chain.getAssetsMaps();
        let pool = new Pool(chain, deployerWallet);
        let loan = new Loan(chain, deployerWallet);
        let coverPool = new CoverPool(chain, deployerWallet);
        let globals = Globals.getGlobals(chain, deployerWallet.address).expectTuple();
        // let block = runBootstrap(chain, deployerWallet);
        // Pool is created by Deployer. Pool Delegate is assigned.
        let block = pool.createPool(delegate_1.address, LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, 1000, 1000, 10_000_000_000, 10_000_000_000, 1, MAX_MATURITY_LENGTH, LIQUIDITY_VAULT, CP_TOKEN, COVER_VAULT, CP_REWARDS_TOKEN, XBTC, true);
        pool.finalizePool(delegate_1.address, LP_TOKEN, ZP_TOKEN, CP_TOKEN, 0);
        // Pool delegate has to enable cover pool of pool 0
        block = chain.mineBlock([
            Tx.contractCall("pool-v1-0", "enable-cover", [
                types.principal(`${deployerWallet.address}.lp-token`),
                types.principal(`${deployerWallet.address}.cp-token`),
                types.uint(0), 
            ], delegate_1.address)
        ]);
        const cover_amount = 1_000_000_000_000n;
        // Cover Pool provider sends funds to the cover pool of Pool 0.
        block = chain.mineBlock([
            Tx.contractCall("cover-pool-v1-0", "send-funds", [
                types.principal(`${deployerWallet.address}.cp-token`),
                types.principal(`${deployerWallet.address}.cover-vault`),
                types.principal(`${deployerWallet.address}.cp-rewards-token`),
                types.principal(`${deployerWallet.address}.Wrapped-Bitcoin`),
                types.uint(0),
                types.uint(cover_amount),
                types.uint(10),
                types.principal(`${deployerWallet.address}.rewards-calc`),
                types.principal(coverPoolProvider1.address), 
            ], coverPoolProvider1.address)
        ]);
        // Mine empty blocks until the commitment ends
        const cycleLength = consumeUint(coverPool.getPool(0)["cycle-length"]);
        chain.mineEmptyBlock(cycleLength * 10);
        // Cover pool provider has to signal that they're going to withdraw their funds from the pool before withdrawing
        block = chain.mineBlock([
            Tx.contractCall("cover-pool-v1-0", "signal-withdrawal", [
                types.principal(`${deployerWallet.address}.cp-token`),
                types.uint(0),
                types.uint(cover_amount)
            ], coverPoolProvider1.address)
        ]);
        // mine empty blocks until the cooldown period has passed.
        chain.mineEmptyBlock(consumeUint(globals["staker-cooldown-period"]));
        // cover pool provider withdraws their funds
        block = chain.mineBlock([
            Tx.contractCall("cover-pool-v1-0", "withdraw", [
                types.principal(`${deployerWallet.address}.cp-token`),
                types.principal(`${deployerWallet.address}.cp-rewards-token`),
                types.principal(`${deployerWallet.address}.Wrapped-Bitcoin`),
                types.uint(0),
                types.uint(cover_amount),
                types.principal(`${deployerWallet.address}.cover-vault`), 
            ], coverPoolProvider1.address)
        ]);
    }
});
Clarinet.test({
    name: "Liquidity providers can send funds to Liquidity Pool 0, then waits until commitment ends and can withdraw sent funds from the Liquidity Pool.",
    async fn (chain, accounts) {
        let deployerWallet = accounts.get("deployer");
        let LP_1 = accounts.get("wallet_1"); // LP_1
        let LP_2 = accounts.get("wallet_2"); // LP_2
        let coverPoolProvider1 = accounts.get("wallet_3"); // Cover_1
        let coverPoolProvider2 = accounts.get("wallet_4"); // Cover_2
        let delegate_1 = accounts.get("wallet_7"); // Delegate_1
        let borrower_1 = accounts.get("wallet_8"); // borrower_1
        let assetMaps = chain.getAssetsMaps();
        let pool = new Pool(chain, deployerWallet);
        let loan = new Loan(chain, deployerWallet);
        let coverPool = new CoverPool(chain, deployerWallet);
        let globals = Globals.getGlobals(chain, deployerWallet.address).expectTuple();
        let lpToken = new LPToken(chain, deployerWallet);
        // let block = runBootstrap(chain, deployerWallet);
        // Pool is created by Deployer. Pool Delegate is assigned.
        let block = pool.createPool(delegate_1.address, LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, 1000, 1000, 10_000_000_000, 10_000_000_000, 1, MAX_MATURITY_LENGTH, LIQUIDITY_VAULT, CP_TOKEN, COVER_VAULT, CP_REWARDS_TOKEN, XBTC, true);
        pool.finalizePool(delegate_1.address, LP_TOKEN, ZP_TOKEN, CP_TOKEN, 0);
        // get supplier id after registering the supplier
        const supplierId_0 = consumeUint(chain.mineBlock([
            ...registerSupplierTxs(deployerWallet.address, deployerWallet.address, recipient, 10, 10, 500, 500, "supplier-1", 10_000_000_000)
        ]).receipts[1].result.expectOk());
        const fee = Number(Magic.getSupplier(chain, supplierId_0, deployerWallet.address).expectSome().expectTuple()["inbound-fee"].expectSome());
        const poolId_0 = 0;
        const amountSent_1 = 100_000_000;
        const amountSent_2 = 200_000_000;
        const commitmentTime = 1;
        // calls initialize-swapper, send-funds, send-funds-finalized
        block = chain.mineBlock([
            Magic.initializeSwapper(LP_1.address),
            ...sendFundsP2SHTxs(deployerWallet.address, 0, LP_1.address, sender, recipient, 500, 0, amountSent_1, preimage, supplierId_0, amountSent_1 * fee / 10_000, commitmentTime, chain.blockHeight - 1),
            Magic.initializeSwapper(LP_2.address),
            ...sendFundsP2SHTxs(deployerWallet.address, 0, LP_2.address, sender, recipient, 500, 1, amountSent_2, preimage, supplierId_0, amountSent_2 * fee / 10_000, commitmentTime, chain.blockHeight - 1), 
        ]);
        // Mine empty blocks until the commitment ends
        const cycleLength = consumeUint(coverPool.getPool(poolId_0)["cycle-length"]);
        chain.mineEmptyBlock(cycleLength * commitmentTime);
        block = chain.mineBlock([
            Tx.contractCall("pool-v1-0", "signal-withdrawal", [
                types.principal(LP_TOKEN),
                types.uint(poolId_0),
                types.uint(amountSent_1)
            ], LP_1.address)
        ]);
        // mine empty blocks until the cooldown period has passed.
        chain.mineEmptyBlock(consumeUint(globals["lp-cooldown-period"]));
        const PUBKEYHASH = "0000000000000000000000000000000000000000";
        let balance = chain.mineBlock([
            Tx.contractCall("lp-token", "get-balance", [
                types.uint(poolId_0),
                types.principal(LP_1.address)
            ], LP_1.address)
        ]).receipts[0].result.expectOk();
        // initiate withdrawal process by the Liquidity Provider on Pool 0
        block = chain.mineBlock([
            Tx.contractCall("supplier-interface", "withdraw", [
                types.uint(consumeUint(balance)),
                types.buff(Buffer.from(P2PKH_VERSION, "hex")),
                types.buff(Buffer.from(PUBKEYHASH, "hex")),
                types.uint(supplierId_0),
                types.principal(LP_TOKEN),
                types.principal(ZP_TOKEN),
                types.uint(poolId_0),
                types.principal(LIQUIDITY_VAULT),
                types.principal(XBTC), 
            ], LP_1.address)
        ]);
        // Transaction data
        const bitcoinBlock = {
            header: "",
            height: chain.blockHeight - 1
        };
        const prevBlocks = [];
        const proof = {
            "tx-index": 0,
            "hashes": [],
            "tree-depth": 0
        };
        // Output in which we're interested for the transaction
        const outputIndex = 0;
        const lp1SwapperId = 0;
        const sent_amount = 100_000_000;
        // generate a P2PKH bitcoin transaction as the outbound transaction.
        let tx1 = generateP2PKHTx(PUBKEYHASH, sent_amount);
        let txid1 = getTxId(tx1);
        block = chain.mineBlock([
            TestUtils.setMinedTx(txid1, deployerWallet.address)
        ]);
        // finalize the withdrawal by the backend by confirming that the transaction happened.
        block = chain.mineBlock([
            Tx.contractCall("supplier-interface", "finalize-outbound", [
                types.tuple({
                    header: types.buff(Buffer.from(bitcoinBlock.header, "hex")),
                    height: types.uint(bitcoinBlock.height)
                }),
                types.list(prevBlocks.map((val)=>types.buff(Buffer.from(val, "hex")))),
                types.buff(Buffer.from(tx1, "hex")),
                types.tuple({
                    "tx-index": types.uint(proof['tx-index']),
                    "hashes": types.list(proof.hashes.map((val)=>types.buff(Buffer.from(val, "hex")))),
                    "tree-depth": types.uint(proof['tree-depth'])
                }),
                types.uint(outputIndex),
                types.uint(lp1SwapperId), 
            ], deployerWallet.address)
        ]);
    }
});
Clarinet.test({
    name: "Liquidity providers can claim rewards after the Borrower has made multiple payments and the final loan repayment",
    async fn (chain, accounts) {
        let deployerWallet = accounts.get("deployer");
        let LP_1 = accounts.get("wallet_1"); // LP_1
        let delegate_1 = accounts.get("wallet_7"); // Delegate_1
        let borrower_1 = accounts.get("wallet_8"); // borrower_1
        let assetMaps = chain.getAssetsMaps();
        let pool = new Pool(chain, deployerWallet);
        let loan = new Loan(chain, deployerWallet);
        let block = Globals.onboardUserAddress(chain, borrower_1.address, P2PKH_VERSION, HASH, deployerWallet.address);
        pool.createPool(delegate_1.address, LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, 1000, 1000, 10_000_000_000, 10_000_000_000, 1, MAX_MATURITY_LENGTH, LIQUIDITY_VAULT, CP_TOKEN, COVER_VAULT, CP_REWARDS_TOKEN, XBTC, true);
        pool.finalizePool(delegate_1.address, LP_TOKEN, ZP_TOKEN, CP_TOKEN, 0);
        let supplierId = consumeUint(chain.mineBlock([
            ...registerSupplierTxs(deployerWallet.address, deployerWallet.address, recipient, 10, 10, 500, 500, "supplier-1", 10_000_000_000)
        ]).receipts[1].result.expectOk());
        let fee = Number(Magic.getSupplier(chain, supplierId, deployerWallet.address).expectSome().expectTuple()["inbound-fee"].expectSome());
        const amountSent = 100_000_000;
        block = chain.mineBlock([
            Magic.initializeSwapper(LP_1.address),
            ...sendFundsP2SHTxs(deployerWallet.address, 0, LP_1.address, sender, recipient, 500, 0, amountSent, preimage, supplierId, amountSent * fee / 10_000, 1, chain.blockHeight - 1)
        ]);
        const loanAmount = 100_000_000;
        pool.createLoan(LP_TOKEN, 0, 100_000_000, XBTC, 0, XBTC, 300, 12960, 1440, COLL_VAULT, FUNDING_VAULT, borrower_1.address);
        pool.fundLoan(0, LP_TOKEN, 0, LIQUIDITY_VAULT, FUNDING_VAULT, XBTC, delegate_1.address);
        chain.mineBlock([
            SupplierInterface.updateLiquidity(chain.blockHeight, 100_000_000, deployerWallet.address)
        ]);
        block = chain.mineBlock([
            SupplierInterface.drawdown(0, LP_TOKEN, 0, XBTC, COLL_VAULT, FUNDING_VAULT, P2PKH_VERSION, HASH, 0, SWAP_ROUTER, XBTC, borrower_1.address)
        ]);
        block = chain.mineBlock([
            ...finalizeDrawdown(0, LP_TOKEN, 0, XBTC, COLL_VAULT, FUNDING_VAULT, XBTC, HASH, 99700000, 0, 28, borrower_1.address, deployerWallet.address)
        ]);
        chain.mineEmptyBlockUntil(consumeUint(loan.getLoanData(0).result.expectTuple()["next-payment"]) - 1);
        let regularPaymentDue = consumeUint(Payment.getCurrentLoanPayment(chain, 0, borrower_1.address));
        let minPaymentToReceive = Math.floor(regularPaymentDue * fee / 10_000);
        block = chain.mineBlock([
            Magic.initializeSwapper(borrower_1.address),
            ...makePaymentTxs(deployerWallet.address, borrower_1.address, sender, recipient, 500, 1, regularPaymentDue, "00", supplierId, minPaymentToReceive, 0, PAYMENT, LP_TOKEN, LIQUIDITY_VAULT, 0, CP_TOKEN, CP_REWARDS_TOKEN, ZP_TOKEN, SWAP_ROUTER, chain.blockHeight - 1, XBTC)
        ]);
        chain.mineEmptyBlock(consumeUint(loan.getLoanData(0).result.expectTuple()["next-payment"]) - block.height - 1);
        block = chain.mineBlock([
            ...makePaymentTxs(deployerWallet.address, borrower_1.address, sender, recipient, 500, 1, regularPaymentDue, "01", supplierId, minPaymentToReceive, 0, PAYMENT, LP_TOKEN, LIQUIDITY_VAULT, 0, CP_TOKEN, CP_REWARDS_TOKEN, ZP_TOKEN, SWAP_ROUTER, chain.blockHeight - 1, XBTC)
        ]);
        chain.mineEmptyBlock(consumeUint(loan.getLoanData(0).result.expectTuple()["next-payment"]) - chain.blockHeight - 1);
        block = chain.mineBlock([
            ...makePaymentTxs(deployerWallet.address, borrower_1.address, sender, recipient, 500, 1, regularPaymentDue, "02", supplierId, minPaymentToReceive, 0, PAYMENT, LP_TOKEN, LIQUIDITY_VAULT, 0, CP_TOKEN, CP_REWARDS_TOKEN, ZP_TOKEN, SWAP_ROUTER, chain.blockHeight - 1, XBTC)
        ]);
        // In a P2PKH, this hash is the hash of the public key of the user.
        const LP_1_ADDRESS_HASH = "0000000000000000000000000000000000000001";
        block = chain.mineBlock([
            SupplierInterface.withdrawRewards(P2PKH_VERSION, LP_1_ADDRESS_HASH, 0, LP_TOKEN, 0, LIQUIDITY_VAULT, XBTC, LP_1.address)
        ]);
        let rewardsEarned = consumeUint(block.receipts[0].result.expectOk());
        block = chain.mineBlock([
            ...finalizeOutboundTxs(LP_1_ADDRESS_HASH, rewardsEarned, 1, chain.blockHeight - 1, borrower_1.address, deployerWallet.address)
        ]);
        block.receipts[1].result.expectOk();
        chain.mineEmptyBlock(consumeUint(loan.getLoanData(0).result.expectTuple()["next-payment"]) - block.height - 1);
        block = chain.mineBlock([
            ...makePaymentTxs(deployerWallet.address, borrower_1.address, sender, recipient, 500, 1, regularPaymentDue, "03", supplierId, minPaymentToReceive, 0, PAYMENT, LP_TOKEN, LIQUIDITY_VAULT, 0, CP_TOKEN, CP_REWARDS_TOKEN, ZP_TOKEN, SWAP_ROUTER, chain.blockHeight - 1, XBTC)
        ]);
        chain.mineEmptyBlock(consumeUint(loan.getLoanData(0).result.expectTuple()["next-payment"]) - block.height - 1);
        block = chain.mineBlock([
            ...makePaymentTxs(deployerWallet.address, borrower_1.address, sender, recipient, 500, 1, regularPaymentDue, "04", supplierId, minPaymentToReceive, 0, PAYMENT, LP_TOKEN, LIQUIDITY_VAULT, 0, CP_TOKEN, CP_REWARDS_TOKEN, ZP_TOKEN, SWAP_ROUTER, chain.blockHeight - 1, XBTC)
        ]);
        chain.mineEmptyBlock(consumeUint(loan.getLoanData(0).result.expectTuple()["next-payment"]) - block.height - 1);
        block = chain.mineBlock([
            ...makePaymentTxs(deployerWallet.address, borrower_1.address, sender, recipient, 500, 1, regularPaymentDue, "05", supplierId, minPaymentToReceive, 0, PAYMENT, LP_TOKEN, LIQUIDITY_VAULT, 0, CP_TOKEN, CP_REWARDS_TOKEN, ZP_TOKEN, SWAP_ROUTER, chain.blockHeight - 1, XBTC)
        ]);
        chain.mineEmptyBlock(consumeUint(loan.getLoanData(0).result.expectTuple()["next-payment"]) - block.height - 1);
        block = chain.mineBlock([
            ...makePaymentTxs(deployerWallet.address, borrower_1.address, sender, recipient, 500, 1, regularPaymentDue, "06", supplierId, minPaymentToReceive, 0, PAYMENT, LP_TOKEN, LIQUIDITY_VAULT, 0, CP_TOKEN, CP_REWARDS_TOKEN, ZP_TOKEN, SWAP_ROUTER, chain.blockHeight - 1, XBTC)
        ]);
        chain.mineEmptyBlock(consumeUint(loan.getLoanData(0).result.expectTuple()["next-payment"]) - block.height - 1);
        block = chain.mineBlock([
            ...makePaymentTxs(deployerWallet.address, borrower_1.address, sender, recipient, 500, 1, regularPaymentDue, "07", supplierId, minPaymentToReceive, 0, PAYMENT, LP_TOKEN, LIQUIDITY_VAULT, 0, CP_TOKEN, CP_REWARDS_TOKEN, ZP_TOKEN, SWAP_ROUTER, chain.blockHeight - 1, XBTC)
        ]);
        chain.mineEmptyBlock(consumeUint(loan.getLoanData(0).result.expectTuple()["next-payment"]) - block.height - 1);
        block = chain.mineBlock([
            ...makePaymentTxs(deployerWallet.address, borrower_1.address, sender, recipient, 500, 1, regularPaymentDue + loanAmount, "08", supplierId, minPaymentToReceive, 0, PAYMENT, LP_TOKEN, LIQUIDITY_VAULT, 0, CP_TOKEN, CP_REWARDS_TOKEN, ZP_TOKEN, SWAP_ROUTER, chain.blockHeight - 1, XBTC)
        ]);
        // initiate claiming rewards
        block = chain.mineBlock([
            SupplierInterface.withdrawRewards(P2PKH_VERSION, LP_1_ADDRESS_HASH, 0, LP_TOKEN, 0, LIQUIDITY_VAULT, XBTC, LP_1.address)
        ]);
        rewardsEarned = consumeUint(block.receipts[0].result.expectOk());
        block = chain.mineBlock([
            ...finalizeOutboundTxs(LP_1_ADDRESS_HASH, rewardsEarned, 2, chain.blockHeight - 1, deployerWallet.address, deployerWallet.address)
        ]);
        // end of claiming rewards
        let globals = Globals.getGlobals(chain, deployerWallet.address).expectTuple();
        let cooldownTime = consumeUint(globals["lp-cooldown-period"]);
        block = pool.signalWithdrawal(LP_TOKEN, 0, amountSent, LP_1.address);
        chain.mineEmptyBlock(cooldownTime);
        block = chain.mineBlock([
            SupplierInterface.withdraw(amountSent, P2PKH_VERSION, LP_1_ADDRESS_HASH, 0, LP_TOKEN, ZP_TOKEN, 0, LIQUIDITY_VAULT, XBTC, LP_1.address)
        ]);
        block = chain.mineBlock([
            ...finalizeOutboundTxs(LP_1_ADDRESS_HASH, amountSent, 3, chain.blockHeight - 1, deployerWallet.address, deployerWallet.address)
        ]);
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvZmVybmFuZG9mb3kvRG9jdW1lbnRzL3plc3QtY29udHJhY3RzL29uY2hhaW4vdGVzdHMvc3VwcGxpZXItaW50ZXJmYWNlL2Zsb3dzL2xpcXVpZGl0eV9wcm92aWRlcl9hY3Rpb25zX3Rlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZGVuby1saW50LWlnbm9yZS1maWxlXG5pbXBvcnQgeyBDbGFyaW5ldCwgVHgsIENoYWluLCBBY2NvdW50LCB0eXBlcyB9IGZyb20gJ2h0dHBzOi8vZGVuby5sYW5kL3gvY2xhcmluZXRAdjEuMC4zL2luZGV4LnRzJztcbmltcG9ydCB7IGFzc2VydEVxdWFscywgYXNzZXJ0IH0gZnJvbSAnaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTU5LjAvdGVzdGluZy9hc3NlcnRzLnRzJztcbmltcG9ydCB7IFBvb2wgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3Bvb2wtdjEtMC50cyc7XG5pbXBvcnQgeyBDb3ZlclBvb2wgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL2NvdmVyLXBvb2wtdjEtMC50cyc7XG5pbXBvcnQgeyBMb2FuIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9sb2FuLXYxLTAudHMnO1xuaW1wb3J0IHsgTFBUb2tlbiB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvbHAtdG9rZW4udHMnO1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSBcImh0dHBzOi8vZGVuby5sYW5kL3N0ZEAwLjE1OS4wL25vZGUvYnVmZmVyLnRzXCI7XG5pbXBvcnQgeyBUZXN0VXRpbHMgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3Rlc3QtdXRpbHMudHMnO1xuaW1wb3J0IHsgTWFnaWMgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL21hZ2ljX3JlYWwudHMnO1xuaW1wb3J0IHsgR2xvYmFscyB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvZ2xvYmFscy50cyc7XG5pbXBvcnQgeyBTdXBwbGllckludGVyZmFjZSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvc3VwcGxpZXJfaW50ZXJmYWNlLnRzJztcbmltcG9ydCB7IFBheW1lbnQgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3BheW1lbnQudHMnO1xuaW1wb3J0IHsgWmVzdFJld2FyZERpc3QgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3plc3RSZXdhcmREaXN0LnRzJztcblxuaW1wb3J0IHsgXG4gIGdldEhhc2gsXG4gIGdldFJldmVyc2VUeElkLFxuICBnZXRUeElkLFxuICBnZXRFeHBpcmF0aW9uLFxuICBzd2FwcGVyQnVmZixcbiAgZ2VuZXJhdGVQMlBLSFR4LFxuICBnZW5lcmF0ZVAyU0hUeCxcbn0gZnJvbSBcIi4uL3V0aWwudHNcIjtcblxuaW1wb3J0IHtcbiAgc2V0Q29udHJhY3RPd25lcixcbiAgaW5pdENvbnRyYWN0T3duZXJzLFxuICBib290c3RyYXBBcHByb3ZlZENvbnRyYWN0cyxcbiAgYWRkQXBwcm92ZWRDb250cmFjdCxcbiAgcnVuQm9vdHN0cmFwLFxuICBhZGRCb3Jyb3dlcixcbiAgc2VuZEZ1bmRzUDJTSFR4cyxcbiAgcmVnaXN0ZXJTdXBwbGllclR4cyxcbiAgZmluYWxpemVPdXRib3VuZFR4cyxcbiAgY29uc3VtZVVpbnQsXG4gIGdldEJQLFxuICBmaW5hbGl6ZURyYXdkb3duLFxuICBtYWtlUGF5bWVudFR4c1xufSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL2NvbW1vbi50cyc7XG5cbmltcG9ydCB7XG4gIExQX1RPS0VOLFxuICBaUF9UT0tFTixcbiAgUEFZTUVOVCxcbiAgUkVXQVJEU19DQUxDLFxuICBMSVFVSURJVFlfVkFVTFQsXG4gIENQX1RPS0VOLFxuICBYQlRDLFxuICBDT0xMX1ZBVUxULFxuICBGVU5ESU5HX1ZBVUxULFxuICBQMlBLSF9WRVJTSU9OLFxuICBIQVNILFxuICByZWNpcGllbnQsXG4gIHNlbmRlcixcbiAgcHJlaW1hZ2UsXG4gIEVSUk9SUyxcbiAgT05FX0RBWSxcbiAgWkVTVF9UT0tFTixcbiAgQ1BfUkVXQVJEU19UT0tFTixcbiAgQ09WRVJfVkFVTFQsXG4gIFNXQVBfUk9VVEVSLFxufSBmcm9tIFwiLi4vY29uZmlnLnRzXCI7XG5cbmNvbnN0IE1BWF9NQVRVUklUWV9MRU5HVEggPSAxNDQgKiAzNjUgKiAzOyAvLyAzIHllYXJzXG5cbkNsYXJpbmV0LnRlc3Qoe1xuICBuYW1lOiBcIkxpcXVpZGl0eSBwcm92aWRlcnMgY2FuIHNlbmQgZnVuZHMgdG8gTGlxdWlkaXR5IFBvb2wgMCBhbmQgdG8gdGhlIENvdmVyIFBvb2xcIixcbiAgYXN5bmMgZm4oY2hhaW46IENoYWluLCBhY2NvdW50czogTWFwPHN0cmluZywgQWNjb3VudD4pIHtcbiAgICBsZXQgZGVwbG95ZXJXYWxsZXQgPSBhY2NvdW50cy5nZXQoXCJkZXBsb3llclwiKSBhcyBBY2NvdW50O1xuICAgIGxldCBMUF8xID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzFcIikgYXMgQWNjb3VudDsgLy8gTFBfMVxuICAgIGxldCBMUF8yID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzJcIikgYXMgQWNjb3VudDsgLy8gTFBfMlxuICAgIGxldCBjb3ZlclBvb2xQcm92aWRlciA9IGFjY291bnRzLmdldChcIndhbGxldF8zXCIpIGFzIEFjY291bnQ7IC8vIENvdmVyXzFcbiAgICBsZXQgZGVsZWdhdGVfMSA9IGFjY291bnRzLmdldChcIndhbGxldF83XCIpIGFzIEFjY291bnQ7IC8vIERlbGVnYXRlXzFcbiAgICBsZXQgZGVsZWdhdGVfMiA9IGFjY291bnRzLmdldChcIndhbGxldF85XCIpIGFzIEFjY291bnQ7IC8vIERlbGVnYXRlXzJcbiAgICBsZXQgYm9ycm93ZXJfMSA9IGFjY291bnRzLmdldChcIndhbGxldF84XCIpIGFzIEFjY291bnQ7IC8vIGJvcnJvd2VyXzFcblxuICAgIGxldCBhc3NldE1hcHMgPSBjaGFpbi5nZXRBc3NldHNNYXBzKCk7XG4gICAgbGV0IHBvb2wgPSBuZXcgUG9vbChjaGFpbiwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIGxldCBsb2FuID0gbmV3IExvYW4oY2hhaW4sIGRlcGxveWVyV2FsbGV0KTtcbiAgICBsZXQgY292ZXJQb29sID0gbmV3IENvdmVyUG9vbChjaGFpbiwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIFxuICAgIGxldCBibG9jayA9IHBvb2wuY3JlYXRlUG9vbChkZWxlZ2F0ZV8xLmFkZHJlc3MsTFBfVE9LRU4sWlBfVE9LRU4sUEFZTUVOVCxSRVdBUkRTX0NBTEMsMTAwMCwxMDAwLDEwXzAwMF8wMDBfMDAwLDEwXzAwMF8wMDBfMDAwLDEsTUFYX01BVFVSSVRZX0xFTkdUSCxMSVFVSURJVFlfVkFVTFQsQ1BfVE9LRU4sQ09WRVJfVkFVTFQsQ1BfUkVXQVJEU19UT0tFTixYQlRDLHRydWUpO1xuICAgIHBvb2wuZmluYWxpemVQb29sKGRlbGVnYXRlXzEuYWRkcmVzcywgTFBfVE9LRU4sIFpQX1RPS0VOLCBDUF9UT0tFTiwgMCk7XG4gICAgLy8gY3JlYXRpbmcgc2Vjb25kIHBvb2xcbiAgICBibG9jayA9IHBvb2wuY3JlYXRlUG9vbChkZWxlZ2F0ZV8yLmFkZHJlc3MsTFBfVE9LRU4sWlBfVE9LRU4sUEFZTUVOVCxSRVdBUkRTX0NBTEMsMTAwMCwxMDAwLDEwXzAwMF8wMDBfMDAwLDEwXzAwMF8wMDBfMDAwLDEsTUFYX01BVFVSSVRZX0xFTkdUSCxMSVFVSURJVFlfVkFVTFQsQ1BfVE9LRU4sQ09WRVJfVkFVTFQsQ1BfUkVXQVJEU19UT0tFTixYQlRDLHRydWUpO1xuICAgIGJsb2NrID0gcG9vbC5maW5hbGl6ZVBvb2woZGVsZWdhdGVfMi5hZGRyZXNzLCBMUF9UT0tFTiwgWlBfVE9LRU4sIENQX1RPS0VOLCAxKTtcblxuICAgIFxuICAgIC8vIFRPIEJFIERPTkUgRFVSSU5HIERFUExPWU1FTlRcbiAgICAvLyBQcmVwYXJlIHN1cHBsaWVyLCBoYXMgdG8gYmUgZG9uZSBieSBiYWNrZW5kLlxuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFtcbiAgICAgIFR4LmNvbnRyYWN0Q2FsbChcbiAgICAgICAgXCJXcmFwcGVkLUJpdGNvaW5cIixcbiAgICAgICAgXCJ0cmFuc2ZlclwiLFxuICAgICAgICBbXG4gICAgICAgICAgdHlwZXMudWludCgxMF8wMDBfMDAwXzAwMCksXG4gICAgICAgICAgdHlwZXMucHJpbmNpcGFsKGRlcGxveWVyV2FsbGV0LmFkZHJlc3MpLFxuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChgJHtkZXBsb3llcldhbGxldC5hZGRyZXNzfS5zdXBwbGllci1pbnRlcmZhY2VgKSxcbiAgICAgICAgICB0eXBlcy5ub25lKCksXG4gICAgICAgIF0sXG4gICAgICAgIGRlcGxveWVyV2FsbGV0LmFkZHJlc3NcbiAgICAgICksXG4gICAgICBUeC5jb250cmFjdENhbGwoXG4gICAgICAgIFwic3VwcGxpZXItaW50ZXJmYWNlXCIsXG4gICAgICAgICdyZWdpc3Rlci1zdXBwbGllcicsXG4gICAgICAgIFtcbiAgICAgICAgICB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKHJlY2lwaWVudCwgXCJoZXhcIikpLFxuICAgICAgICAgIHR5cGVzLnNvbWUodHlwZXMuaW50KDEwKSksXG4gICAgICAgICAgdHlwZXMuc29tZSh0eXBlcy5pbnQoMTApKSxcbiAgICAgICAgICB0eXBlcy5pbnQoNTAwKSxcbiAgICAgICAgICB0eXBlcy5pbnQoNTAwKSxcbiAgICAgICAgICB0eXBlcy5hc2NpaShcInN1cHBsaWVyLTFcIiksXG4gICAgICAgICAgdHlwZXMudWludCgxMF8wMDBfMDAwXzAwMCksXG4gICAgICAgIF0sXG4gICAgICAgIGRlcGxveWVyV2FsbGV0LmFkZHJlc3NcbiAgICAgIClcbiAgICBdKTtcbiAgICAvLyBFTkQgT0YgREVQTE9ZTUVOVCBQUkVQQVJBVElPTlxuICAgIFxuICAgIC8vIExpcXVpZGl0eSBQcm92aWRlciAxIGhhcyB0byBpbml0aWFsaXplIGFzIGEgc3dhcHBlclxuICAgIGNvbnN0IHN1cHBsaWVySWQxID0gKGNvbnN1bWVVaW50KGJsb2NrLnJlY2VpcHRzWzFdLnJlc3VsdC5leHBlY3RPaygpKSk7XG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soWyBUeC5jb250cmFjdENhbGwoIFwibWFnaWMtcHJvdG9jb2xcIiwgJ2luaXRpYWxpemUtc3dhcHBlcicsIFtdLCBMUF8xLmFkZHJlc3MpIF0pO1xuICAgIFxuICAgIGNvbnN0IGxwMVN3YXBwZXJJZCA9IDA7XG4gICAgY29uc3QgZXhwaXJhdGlvbiA9IDUwMDtcbiAgICBjb25zdCBzZW50X2Ftb3VudCA9IDEwMF8wMDBfMDAwO1xuXG4gICAgbGV0IGhhc2ggPSBnZXRIYXNoKHByZWltYWdlKTtcbiAgICBsZXQgdHgxID0gZ2VuZXJhdGVQMlNIVHgoc2VuZGVyLCByZWNpcGllbnQsIGV4cGlyYXRpb24sIGhhc2gsIGxwMVN3YXBwZXJJZCwgc2VudF9hbW91bnQpO1xuICAgIGxldCB0eGlkMSA9IGdldFR4SWQodHgxKTtcblxuICAgIC8vIE5PVCBET05FIE9OIFRFU1RORVQgYWRkIFRyYW5zYWN0aW9uIGR1bW15IHRvIHRlc3QgdGhlIGNvbnRyYWN0IG9uIHNpbW5ldC4gRXF1aXZhbGVudCBvZiBzZW5kaW5nIHRoZSBCaXRjb2luIHRyYW5zYWN0aW9uIG9uIHRoZSBCaXRjb2luIGJsb2NrY2hhaW5cbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbIFR4LmNvbnRyYWN0Q2FsbChcInRlc3QtdXRpbHNcIixcInNldC1taW5lZFwiLCBbIHR5cGVzLmJ1ZmYoQnVmZmVyLmZyb20odHhpZDEsIFwiaGV4XCIpKSBdLCBkZXBsb3llcldhbGxldC5hZGRyZXNzKSBdKTtcblxuICAgIC8vIFRyYW5zYWN0aW9uIGRhdGFcbiAgICBjb25zdCBiaXRjb2luQmxvY2sgPSB7IGhlYWRlcjogXCJcIiwgaGVpZ2h0OiBjaGFpbi5ibG9ja0hlaWdodCAtIDEgfTtcbiAgICBjb25zdCBwcmV2QmxvY2tzID0gW10gYXMgc3RyaW5nW107XG4gICAgY29uc3QgcHJvb2YgPSB7IFwidHgtaW5kZXhcIjogMCwgXCJoYXNoZXNcIjogW10sIFwidHJlZS1kZXB0aFwiOiAwIH1cbiAgICAvLyBPdXRwdXQgaW4gd2hpY2ggd2UncmUgaW50ZXJlc3RlZCBmb3IgdGhlIHRyYW5zYWN0aW9uXG4gICAgY29uc3Qgb3V0cHV0SW5kZXggPSAwO1xuICAgIC8vIHRoZSAxMCBwZXJjZW50IGlzICBiYXNlZCBvbiB0aGUgaW5ib3VuZCBmZWUgb2Ygc3VwcGxpZXItMVxuICAgIGNvbnN0IG1pblRvUmVjZWl2ZSA9IHNlbnRfYW1vdW50ICogMTAgLyAxMF8wMDA7XG5cbiAgICAvLyBzZW5kaW5nIGZ1bmRzIGJ5IHZhbGlkYXRpbmcgdHJhbnNhY3Rpb24uXG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soW1xuICAgICAgVHguY29udHJhY3RDYWxsKFxuICAgICAgICBcInN1cHBsaWVyLWludGVyZmFjZVwiLFxuICAgICAgICBcInNlbmQtZnVuZHNcIixcbiAgICAgICAgW1xuICAgICAgICAgIC8vIERhdGEgdXNlZCBieSB0aGUgTWFnaWMgTWFnaWMgY29udHJhY3QgdG8gcHJvdmUgdGhhdCB0aGUgQml0Y29pbiB0cmFuc2FjdGlvbiBoYXBwZW5lZFxuICAgICAgICAgIHR5cGVzLnR1cGxlKHtcbiAgICAgICAgICAgIGhlYWRlcjogdHlwZXMuYnVmZihCdWZmZXIuZnJvbShiaXRjb2luQmxvY2suaGVhZGVyLCBcImhleFwiKSksXG4gICAgICAgICAgICBoZWlnaHQ6IHR5cGVzLnVpbnQoYml0Y29pbkJsb2NrLmhlaWdodClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB0eXBlcy5saXN0KHByZXZCbG9ja3MubWFwKCh2YWwpID0+IHR5cGVzLmJ1ZmYoQnVmZmVyLmZyb20odmFsLCBcImhleFwiKSkpKSxcbiAgICAgICAgICB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKHR4MSwgXCJoZXhcIikpLFxuICAgICAgICAgIHR5cGVzLnR1cGxlKHtcbiAgICAgICAgICAgIFwidHgtaW5kZXhcIjogdHlwZXMudWludChwcm9vZlsndHgtaW5kZXgnXSksXG4gICAgICAgICAgICBcImhhc2hlc1wiOiB0eXBlcy5saXN0KHByb29mLmhhc2hlcy5tYXAodmFsID0+IHR5cGVzLmJ1ZmYoQnVmZmVyLmZyb20odmFsLCBcImhleFwiKSkpKSxcbiAgICAgICAgICAgIFwidHJlZS1kZXB0aFwiOiB0eXBlcy51aW50KHByb29mWyd0cmVlLWRlcHRoJ10pXG4gICAgICAgICAgfSksXG4gICAgICAgICAgdHlwZXMudWludChvdXRwdXRJbmRleCksXG4gICAgICAgICAgLy8gZW5kIG9mIEJpdGNvaW4gUHJvb2ZcbiAgICAgICAgICB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKHNlbmRlciwgXCJoZXhcIikpLCAgICAgICAgICAgICAgICAgICAgIC8vIFB1YmxpYyBrZXkgb2YgdGhlIExQXzEgc2VuZGluZyB0aGUgQml0Y29pbi4gVXNlZCB0byByZWNvdmVyIHRoZSBmdW5kcyBpZiB0aGUgc2VudCBiaXRjb2luIGZhaWxzLlxuICAgICAgICAgIHR5cGVzLmJ1ZmYoQnVmZmVyLmZyb20ocmVjaXBpZW50LCBcImhleFwiKSksICAgICAgICAgICAgICAgICAgLy8gUHVibGljIGtleSB1c2VkIGJ5IHRoZSBNYWdpYyB0aGF0IGlzIHRoZSByZWNpcGllbnQgb2YgQml0Y29pbi5cbiAgICAgICAgICB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKGdldEV4cGlyYXRpb24oZXhwaXJhdGlvbiksIFwiaGV4XCIpKSwgIC8vIEV4cGlyYXRpb24gdGltZSBpbiBMaXR0bGUgRW5kaWFuIGFuZCBwYWRkZWQgdG8gMiBieXRlcyAoc3RyaW5nIGxlbmd0aCBvZiA0KS4gRXggZm9yIDUwMDogJzAxRjQnXG4gICAgICAgICAgdHlwZXMuYnVmZihCdWZmZXIuZnJvbShoYXNoLCBcImhleFwiKSksICAgICAgICAgICAgICAgICAgICAgICAvLyBIYXNoIG9mIHRoZSBwcmVpbWFnZSB1c2VkIGZvciB0aGUgSFRMQ1xuICAgICAgICAgIHR5cGVzLmJ1ZmYoQnVmZmVyLmZyb20oc3dhcHBlckJ1ZmYobHAxU3dhcHBlcklkKSwgXCJoZXhcIikpLCAgLy8gU3dhcHBlciBpZCBpbiBMaXR0bGUgZW5kaW5nIHBhZGRlZCB0byA0IGJ5dGVzIChzdHJpbmcgbGVuZ3RoIG9mIDgpLiBFeCBmb3IgdTA6IFwiMDAwMDAwMDBcIlxuICAgICAgICAgIHR5cGVzLnVpbnQoc3VwcGxpZXJJZDEpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VwcGxpZXIgaWQgaW4gdWludFxuICAgICAgICAgIHR5cGVzLnVpbnQobWluVG9SZWNlaXZlKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pbmltdW0gYW1vdW50IHRoYXQgaGFzIHRvIGJlIHJlY2VpdmVkLiBJcyB0aGUgYW1vdW50IG9mIHRoZSBzZW50IGZ1bmRzIG1pbnVzIHRoZSBmZWVzIG9mIHRoZSBzdXBwbGllci5cbiAgICAgICAgXSxcbiAgICAgICAgTFBfMS5hZGRyZXNzXG4gICAgICApXG4gICAgXSk7XG4gICAgXG4gICAgY29uc3QgY29tbWl0bWVudFRpbWUgPSAxO1xuICAgIGNvbnN0IHBvb2xJZF8wID0gMDtcblxuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFtcbiAgICAgIFR4LmNvbnRyYWN0Q2FsbChcbiAgICAgICAgXCJzdXBwbGllci1pbnRlcmZhY2VcIixcbiAgICAgICAgXCJzZW5kLWZ1bmRzLWZpbmFsaXplXCIsXG4gICAgICAgIFtcbiAgICAgICAgICB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKHR4aWQxLFwiaGV4XCIpKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyYW5zYWN0aW9uIElEIG9mIHRoZSBwcmV2aW91c2x5IGNvbmZpcm1lZCB0cmFuc2FjdGlvbi5cbiAgICAgICAgICB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKHByZWltYWdlLFwiaGV4XCIpKSwgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZWltYWdlIG9mIHRoZSBoYXNoIHVzZWQgYnkgdGhlIEhUTENcbiAgICAgICAgICB0eXBlcy51aW50KGNvbW1pdG1lbnRUaW1lKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOdW1iZXIgb2YgY3ljbGVzIHRoYXQgdGhlIExpcXVpZGl0eSBQcm92aWRlciB3YW50cyB0byBjb21taXQgbm93LlxuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChgJHtkZXBsb3llcldhbGxldC5hZGRyZXNzfS5scC10b2tlbmApLCAgICAgICAgICAgIC8vIExpcXVpZGl0eSBQcm92aWRlcnMgVG9rZW4gdXNlZCB0byBhY2NvdW50IGZvciB0aGUgeEJUQyByZXdhcmRzIG9mIHRoZSBwb29sXG4gICAgICAgICAgdHlwZXMudWludChwb29sSWRfMCksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUG9vbCBpZCBvZiB0aGUgc2VsZWN0ZWQgcG9vbFxuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChgJHtkZXBsb3llcldhbGxldC5hZGRyZXNzfS56ZXN0LXJld2FyZC1kaXN0YCksICAgIC8vIFRva2VuIGZvciB0aGUgTGlxdWlkaXR5IFByb3ZpZGVycyB0byBhY2NvdW50IGZvciBaZXN0IHJld2FyZHNcbiAgICAgICAgICB0eXBlcy5wcmluY2lwYWwoYCR7ZGVwbG95ZXJXYWxsZXQuYWRkcmVzc30ubGlxdWlkaXR5LXZhdWx0LXYxLTBgKSwvLyBMaXF1aWRpdHkgVmF1bHQgY29udHJhY3QgaG9sZGluZyBmdW5kcyBvZiB0aGUgTGlxdWlkaXR5IFBvb2wuXG4gICAgICAgICAgdHlwZXMucHJpbmNpcGFsKGAke2RlcGxveWVyV2FsbGV0LmFkZHJlc3N9LldyYXBwZWQtQml0Y29pbmApLCAgICAgLy8gVGhlIGFzc2V0IHVzZWQgZm9yIGxvYW5zIGluIHRoZSBwb29sXG4gICAgICAgICAgdHlwZXMucHJpbmNpcGFsKGAke2RlcGxveWVyV2FsbGV0LmFkZHJlc3N9LnJld2FyZHMtY2FsY2ApLCAgICAgICAgLy8gQ29udHJhY3QgY29udGFpbmluZyB0aGUgbG9naWMgb2YgaG93IFplc3QgcmV3YXJkcyBhcmUgY2FsY3VsYXRlZC5cbiAgICAgICAgXSxcbiAgICAgICAgTFBfMS5hZGRyZXNzXG4gICAgICApXG4gICAgXSk7XG4gICAgLy8gY29uc29sZS5sb2coYmxvY2spO1xuXG4gICAgLy8gc2FtZSBwcm9jZXNzIGZvciBhIHNlY29uZCBMaXF1aWRpdHkgUHJvdmlkZXIsIHNlbmRpbmcgdG8gcG9vbCAxXG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soW1xuICAgICAgTWFnaWMuaW5pdGlhbGl6ZVN3YXBwZXIoTFBfMi5hZGRyZXNzKSxcbiAgICAgIC4uLnNlbmRGdW5kc1AyU0hUeHMoZGVwbG95ZXJXYWxsZXQuYWRkcmVzcywxLExQXzIuYWRkcmVzcyxzZW5kZXIscmVjaXBpZW50LDUwMCwxLDEwMF8wMDBfMDAwLHByZWltYWdlLDAsMTAwXzAwMF8wMDAgKiAxMCAvIDEwXzAwMCwxLGNoYWluLmJsb2NrSGVpZ2h0IC0gMSksXG4gICAgXSk7XG4gIH0sXG59KTtcblxuXG5DbGFyaW5ldC50ZXN0KHtcbiAgbmFtZTogXCJMaXF1aWRpdHkgcHJvdmlkZXJzIGNhbiBzZW5kIGZ1bmRzIHRvIExpcXVpZGl0eSBQb29sIDAgYW5kIHRvIHRoZSBDb3ZlciBQb29sLCB0aGVuIHdhaXRzIHVudGlsIGNvbW1pdG1lbnQgZW5kcyBhbmQgY2FuIHdpdGhkcmF3IHNlbnQgZnVuZHMuXCIsXG4gIGFzeW5jIGZuKGNoYWluOiBDaGFpbiwgYWNjb3VudHM6IE1hcDxzdHJpbmcsIEFjY291bnQ+KSB7XG4gICAgbGV0IGRlcGxveWVyV2FsbGV0ID0gYWNjb3VudHMuZ2V0KFwiZGVwbG95ZXJcIikgYXMgQWNjb3VudDtcbiAgICBsZXQgTFBfMSA9IGFjY291bnRzLmdldChcIndhbGxldF8xXCIpIGFzIEFjY291bnQ7IC8vIExQXzFcbiAgICBsZXQgTFBfMiA9IGFjY291bnRzLmdldChcIndhbGxldF8yXCIpIGFzIEFjY291bnQ7IC8vIExQXzJcbiAgICBsZXQgY292ZXJQb29sUHJvdmlkZXIxID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzNcIikgYXMgQWNjb3VudDsgLy8gQ292ZXJfMVxuICAgIGxldCBjb3ZlclBvb2xQcm92aWRlcjIgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfNFwiKSBhcyBBY2NvdW50OyAvLyBDb3Zlcl8yXG4gICAgbGV0IGRlbGVnYXRlXzEgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfN1wiKSBhcyBBY2NvdW50OyAvLyBEZWxlZ2F0ZV8xXG4gICAgbGV0IGJvcnJvd2VyXzEgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfOFwiKSBhcyBBY2NvdW50OyAvLyBib3Jyb3dlcl8xXG5cbiAgICBsZXQgYXNzZXRNYXBzID0gY2hhaW4uZ2V0QXNzZXRzTWFwcygpO1xuICAgIGxldCBwb29sID0gbmV3IFBvb2woY2hhaW4sIGRlcGxveWVyV2FsbGV0KTtcbiAgICBsZXQgbG9hbiA9IG5ldyBMb2FuKGNoYWluLCBkZXBsb3llcldhbGxldCk7XG4gICAgbGV0IGNvdmVyUG9vbCA9IG5ldyBDb3ZlclBvb2woY2hhaW4sIGRlcGxveWVyV2FsbGV0KTtcbiAgICBsZXQgZ2xvYmFscyA9IEdsb2JhbHMuZ2V0R2xvYmFscyhjaGFpbiwgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcykuZXhwZWN0VHVwbGUoKTtcblxuICAgIC8vIGxldCBibG9jayA9IHJ1bkJvb3RzdHJhcChjaGFpbiwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIFxuICAgIC8vIFBvb2wgaXMgY3JlYXRlZCBieSBEZXBsb3llci4gUG9vbCBEZWxlZ2F0ZSBpcyBhc3NpZ25lZC5cbiAgICBsZXQgYmxvY2sgPSBwb29sLmNyZWF0ZVBvb2woZGVsZWdhdGVfMS5hZGRyZXNzLExQX1RPS0VOLFpQX1RPS0VOLFBBWU1FTlQsUkVXQVJEU19DQUxDLDEwMDAsMTAwMCwxMF8wMDBfMDAwXzAwMCwxMF8wMDBfMDAwXzAwMCwxLE1BWF9NQVRVUklUWV9MRU5HVEgsTElRVUlESVRZX1ZBVUxULENQX1RPS0VOLENPVkVSX1ZBVUxULENQX1JFV0FSRFNfVE9LRU4sWEJUQyx0cnVlKTtcbiAgICBwb29sLmZpbmFsaXplUG9vbChkZWxlZ2F0ZV8xLmFkZHJlc3MsIExQX1RPS0VOLCBaUF9UT0tFTiwgQ1BfVE9LRU4sIDApO1xuXG4gICAgLy8gUG9vbCBkZWxlZ2F0ZSBoYXMgdG8gZW5hYmxlIGNvdmVyIHBvb2wgb2YgcG9vbCAwXG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soW1xuICAgICAgVHguY29udHJhY3RDYWxsKFxuICAgICAgICBcInBvb2wtdjEtMFwiLFxuICAgICAgICBcImVuYWJsZS1jb3ZlclwiLFxuICAgICAgICBbXG4gICAgICAgICAgdHlwZXMucHJpbmNpcGFsKGAke2RlcGxveWVyV2FsbGV0LmFkZHJlc3N9LmxwLXRva2VuYCksXG4gICAgICAgICAgdHlwZXMucHJpbmNpcGFsKGAke2RlcGxveWVyV2FsbGV0LmFkZHJlc3N9LmNwLXRva2VuYCksXG4gICAgICAgICAgdHlwZXMudWludCgwKSxcbiAgICAgICAgXSxcbiAgICAgICAgZGVsZWdhdGVfMS5hZGRyZXNzXG4gICAgICApXG4gICAgXSk7XG5cbiAgICBjb25zdCBjb3Zlcl9hbW91bnQgPSAxXzAwMF8wMDBfMDAwXzAwMG47XG4gICAgLy8gQ292ZXIgUG9vbCBwcm92aWRlciBzZW5kcyBmdW5kcyB0byB0aGUgY292ZXIgcG9vbCBvZiBQb29sIDAuXG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soW1xuICAgICAgVHguY29udHJhY3RDYWxsKFxuICAgICAgICBcImNvdmVyLXBvb2wtdjEtMFwiLFxuICAgICAgICBcInNlbmQtZnVuZHNcIixcbiAgICAgICAgW1xuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChgJHtkZXBsb3llcldhbGxldC5hZGRyZXNzfS5jcC10b2tlbmApLFxuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChgJHtkZXBsb3llcldhbGxldC5hZGRyZXNzfS5jb3Zlci12YXVsdGApLFxuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChgJHtkZXBsb3llcldhbGxldC5hZGRyZXNzfS5jcC1yZXdhcmRzLXRva2VuYCksXG4gICAgICAgICAgdHlwZXMucHJpbmNpcGFsKGAke2RlcGxveWVyV2FsbGV0LmFkZHJlc3N9LldyYXBwZWQtQml0Y29pbmApLFxuICAgICAgICAgIHR5cGVzLnVpbnQoMCksXG4gICAgICAgICAgdHlwZXMudWludChjb3Zlcl9hbW91bnQpLFxuICAgICAgICAgIHR5cGVzLnVpbnQoMTApLFxuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChgJHtkZXBsb3llcldhbGxldC5hZGRyZXNzfS5yZXdhcmRzLWNhbGNgKSxcbiAgICAgICAgICB0eXBlcy5wcmluY2lwYWwoY292ZXJQb29sUHJvdmlkZXIxLmFkZHJlc3MpLFxuICAgICAgICBdLFxuICAgICAgICBjb3ZlclBvb2xQcm92aWRlcjEuYWRkcmVzc1xuICAgICAgKVxuICAgIF0pO1xuXG4gICAgLy8gTWluZSBlbXB0eSBibG9ja3MgdW50aWwgdGhlIGNvbW1pdG1lbnQgZW5kc1xuICAgIGNvbnN0IGN5Y2xlTGVuZ3RoID0gY29uc3VtZVVpbnQoY292ZXJQb29sLmdldFBvb2woMClbXCJjeWNsZS1sZW5ndGhcIl0pO1xuICAgIGNoYWluLm1pbmVFbXB0eUJsb2NrKGN5Y2xlTGVuZ3RoICogMTApO1xuXG4gICAgLy8gQ292ZXIgcG9vbCBwcm92aWRlciBoYXMgdG8gc2lnbmFsIHRoYXQgdGhleSdyZSBnb2luZyB0byB3aXRoZHJhdyB0aGVpciBmdW5kcyBmcm9tIHRoZSBwb29sIGJlZm9yZSB3aXRoZHJhd2luZ1xuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFtcbiAgICAgIFR4LmNvbnRyYWN0Q2FsbChcbiAgICAgICAgXCJjb3Zlci1wb29sLXYxLTBcIixcbiAgICAgICAgXCJzaWduYWwtd2l0aGRyYXdhbFwiLFxuICAgICAgICBbXG4gICAgICAgICAgdHlwZXMucHJpbmNpcGFsKGAke2RlcGxveWVyV2FsbGV0LmFkZHJlc3N9LmNwLXRva2VuYCksXG4gICAgICAgICAgdHlwZXMudWludCgwKSxcbiAgICAgICAgICB0eXBlcy51aW50KGNvdmVyX2Ftb3VudClcbiAgICAgICAgXSxcbiAgICAgICAgY292ZXJQb29sUHJvdmlkZXIxLmFkZHJlc3NcbiAgICAgIClcbiAgICBdKTtcblxuICAgIC8vIG1pbmUgZW1wdHkgYmxvY2tzIHVudGlsIHRoZSBjb29sZG93biBwZXJpb2QgaGFzIHBhc3NlZC5cbiAgICBjaGFpbi5taW5lRW1wdHlCbG9jayhjb25zdW1lVWludChnbG9iYWxzW1wic3Rha2VyLWNvb2xkb3duLXBlcmlvZFwiXSkpO1xuXG4gICAgLy8gY292ZXIgcG9vbCBwcm92aWRlciB3aXRoZHJhd3MgdGhlaXIgZnVuZHNcbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbXG4gICAgICBUeC5jb250cmFjdENhbGwoXG4gICAgICAgIFwiY292ZXItcG9vbC12MS0wXCIsXG4gICAgICAgIFwid2l0aGRyYXdcIixcbiAgICAgICAgW1xuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChgJHtkZXBsb3llcldhbGxldC5hZGRyZXNzfS5jcC10b2tlbmApLFxuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChgJHtkZXBsb3llcldhbGxldC5hZGRyZXNzfS5jcC1yZXdhcmRzLXRva2VuYCksXG4gICAgICAgICAgdHlwZXMucHJpbmNpcGFsKGAke2RlcGxveWVyV2FsbGV0LmFkZHJlc3N9LldyYXBwZWQtQml0Y29pbmApLFxuICAgICAgICAgIHR5cGVzLnVpbnQoMCksXG4gICAgICAgICAgdHlwZXMudWludChjb3Zlcl9hbW91bnQpLFxuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChgJHtkZXBsb3llcldhbGxldC5hZGRyZXNzfS5jb3Zlci12YXVsdGApLFxuICAgICAgICBdLFxuICAgICAgICBjb3ZlclBvb2xQcm92aWRlcjEuYWRkcmVzc1xuICAgICAgKVxuICAgIF0pOyAgICBcbiAgfSxcbn0pO1xuXG5DbGFyaW5ldC50ZXN0KHtcbiAgbmFtZTogXCJMaXF1aWRpdHkgcHJvdmlkZXJzIGNhbiBzZW5kIGZ1bmRzIHRvIExpcXVpZGl0eSBQb29sIDAsIHRoZW4gd2FpdHMgdW50aWwgY29tbWl0bWVudCBlbmRzIGFuZCBjYW4gd2l0aGRyYXcgc2VudCBmdW5kcyBmcm9tIHRoZSBMaXF1aWRpdHkgUG9vbC5cIixcbiAgYXN5bmMgZm4oY2hhaW46IENoYWluLCBhY2NvdW50czogTWFwPHN0cmluZywgQWNjb3VudD4pIHtcbiAgICBsZXQgZGVwbG95ZXJXYWxsZXQgPSBhY2NvdW50cy5nZXQoXCJkZXBsb3llclwiKSBhcyBBY2NvdW50O1xuICAgIGxldCBMUF8xID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzFcIikgYXMgQWNjb3VudDsgLy8gTFBfMVxuICAgIGxldCBMUF8yID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzJcIikgYXMgQWNjb3VudDsgLy8gTFBfMlxuICAgIGxldCBjb3ZlclBvb2xQcm92aWRlcjEgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfM1wiKSBhcyBBY2NvdW50OyAvLyBDb3Zlcl8xXG4gICAgbGV0IGNvdmVyUG9vbFByb3ZpZGVyMiA9IGFjY291bnRzLmdldChcIndhbGxldF80XCIpIGFzIEFjY291bnQ7IC8vIENvdmVyXzJcbiAgICBsZXQgZGVsZWdhdGVfMSA9IGFjY291bnRzLmdldChcIndhbGxldF83XCIpIGFzIEFjY291bnQ7IC8vIERlbGVnYXRlXzFcbiAgICBsZXQgYm9ycm93ZXJfMSA9IGFjY291bnRzLmdldChcIndhbGxldF84XCIpIGFzIEFjY291bnQ7IC8vIGJvcnJvd2VyXzFcblxuICAgIGxldCBhc3NldE1hcHMgPSBjaGFpbi5nZXRBc3NldHNNYXBzKCk7XG4gICAgbGV0IHBvb2wgPSBuZXcgUG9vbChjaGFpbiwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIGxldCBsb2FuID0gbmV3IExvYW4oY2hhaW4sIGRlcGxveWVyV2FsbGV0KTtcbiAgICBsZXQgY292ZXJQb29sID0gbmV3IENvdmVyUG9vbChjaGFpbiwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIGxldCBnbG9iYWxzID0gR2xvYmFscy5nZXRHbG9iYWxzKGNoYWluLCBkZXBsb3llcldhbGxldC5hZGRyZXNzKS5leHBlY3RUdXBsZSgpO1xuICAgIGxldCBscFRva2VuID0gbmV3IExQVG9rZW4oY2hhaW4sIGRlcGxveWVyV2FsbGV0KTtcblxuICAgIC8vIGxldCBibG9jayA9IHJ1bkJvb3RzdHJhcChjaGFpbiwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIFxuICAgIC8vIFBvb2wgaXMgY3JlYXRlZCBieSBEZXBsb3llci4gUG9vbCBEZWxlZ2F0ZSBpcyBhc3NpZ25lZC5cbiAgICBsZXQgYmxvY2sgPSBwb29sLmNyZWF0ZVBvb2woZGVsZWdhdGVfMS5hZGRyZXNzLExQX1RPS0VOLFpQX1RPS0VOLFBBWU1FTlQsUkVXQVJEU19DQUxDLDEwMDAsMTAwMCwxMF8wMDBfMDAwXzAwMCwxMF8wMDBfMDAwXzAwMCwxLE1BWF9NQVRVUklUWV9MRU5HVEgsTElRVUlESVRZX1ZBVUxULENQX1RPS0VOLENPVkVSX1ZBVUxULENQX1JFV0FSRFNfVE9LRU4sWEJUQyx0cnVlKTtcbiAgICBwb29sLmZpbmFsaXplUG9vbChkZWxlZ2F0ZV8xLmFkZHJlc3MsIExQX1RPS0VOLCBaUF9UT0tFTiwgQ1BfVE9LRU4sIDApO1xuXG4gICAgLy8gZ2V0IHN1cHBsaWVyIGlkIGFmdGVyIHJlZ2lzdGVyaW5nIHRoZSBzdXBwbGllclxuICAgIGNvbnN0IHN1cHBsaWVySWRfMCA9IGNvbnN1bWVVaW50KGNoYWluLm1pbmVCbG9jayhbLi4ucmVnaXN0ZXJTdXBwbGllclR4cyhkZXBsb3llcldhbGxldC5hZGRyZXNzLCBkZXBsb3llcldhbGxldC5hZGRyZXNzLCByZWNpcGllbnQsIDEwLCAxMCwgNTAwLCA1MDAsIFwic3VwcGxpZXItMVwiLCAxMF8wMDBfMDAwXzAwMCldKS5yZWNlaXB0c1sxXS5yZXN1bHQuZXhwZWN0T2soKSBhcyBzdHJpbmcpO1xuICAgIGNvbnN0IGZlZSA9IE51bWJlcihNYWdpYy5nZXRTdXBwbGllcihjaGFpbiwgc3VwcGxpZXJJZF8wLCBkZXBsb3llcldhbGxldC5hZGRyZXNzKS5leHBlY3RTb21lKCkuZXhwZWN0VHVwbGUoKVtcImluYm91bmQtZmVlXCJdLmV4cGVjdFNvbWUoKSk7XG4gICAgY29uc3QgcG9vbElkXzAgPSAwO1xuXG4gICAgY29uc3QgYW1vdW50U2VudF8xID0gMTAwXzAwMF8wMDA7XG4gICAgY29uc3QgYW1vdW50U2VudF8yID0gMjAwXzAwMF8wMDA7XG4gICAgY29uc3QgY29tbWl0bWVudFRpbWUgPSAxO1xuICAgIC8vIGNhbGxzIGluaXRpYWxpemUtc3dhcHBlciwgc2VuZC1mdW5kcywgc2VuZC1mdW5kcy1maW5hbGl6ZWRcbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbXG4gICAgICBNYWdpYy5pbml0aWFsaXplU3dhcHBlcihMUF8xLmFkZHJlc3MpLFxuICAgICAgLi4uc2VuZEZ1bmRzUDJTSFR4cyhkZXBsb3llcldhbGxldC5hZGRyZXNzLDAsTFBfMS5hZGRyZXNzLHNlbmRlcixyZWNpcGllbnQsNTAwLDAsYW1vdW50U2VudF8xLHByZWltYWdlLHN1cHBsaWVySWRfMCxhbW91bnRTZW50XzEgKiBmZWUgLyAxMF8wMDAsY29tbWl0bWVudFRpbWUsY2hhaW4uYmxvY2tIZWlnaHQgLSAxKSxcbiAgICAgIE1hZ2ljLmluaXRpYWxpemVTd2FwcGVyKExQXzIuYWRkcmVzcyksXG4gICAgICAuLi5zZW5kRnVuZHNQMlNIVHhzKGRlcGxveWVyV2FsbGV0LmFkZHJlc3MsMCxMUF8yLmFkZHJlc3Msc2VuZGVyLHJlY2lwaWVudCw1MDAsMSxhbW91bnRTZW50XzIscHJlaW1hZ2Usc3VwcGxpZXJJZF8wLGFtb3VudFNlbnRfMiAqIGZlZSAvIDEwXzAwMCxjb21taXRtZW50VGltZSxjaGFpbi5ibG9ja0hlaWdodCAtIDEpLFxuICAgIF0pO1xuXG4gICAgLy8gTWluZSBlbXB0eSBibG9ja3MgdW50aWwgdGhlIGNvbW1pdG1lbnQgZW5kc1xuICAgIGNvbnN0IGN5Y2xlTGVuZ3RoID0gY29uc3VtZVVpbnQoY292ZXJQb29sLmdldFBvb2wocG9vbElkXzApW1wiY3ljbGUtbGVuZ3RoXCJdKTtcbiAgICBjaGFpbi5taW5lRW1wdHlCbG9jayhjeWNsZUxlbmd0aCAqIGNvbW1pdG1lbnRUaW1lKTtcblxuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFtcbiAgICAgIFR4LmNvbnRyYWN0Q2FsbChcbiAgICAgICAgXCJwb29sLXYxLTBcIixcbiAgICAgICAgXCJzaWduYWwtd2l0aGRyYXdhbFwiLFxuICAgICAgICBbXG4gICAgICAgICAgdHlwZXMucHJpbmNpcGFsKExQX1RPS0VOKSxcbiAgICAgICAgICB0eXBlcy51aW50KHBvb2xJZF8wKSxcbiAgICAgICAgICB0eXBlcy51aW50KGFtb3VudFNlbnRfMSlcbiAgICAgICAgXSxcbiAgICAgICAgTFBfMS5hZGRyZXNzXG4gICAgICApXG4gICAgXSk7XG5cbiAgICAvLyBtaW5lIGVtcHR5IGJsb2NrcyB1bnRpbCB0aGUgY29vbGRvd24gcGVyaW9kIGhhcyBwYXNzZWQuXG4gICAgY2hhaW4ubWluZUVtcHR5QmxvY2soY29uc3VtZVVpbnQoZ2xvYmFsc1tcImxwLWNvb2xkb3duLXBlcmlvZFwiXSkpO1xuICAgIGNvbnN0IFBVQktFWUhBU0ggPSBcIjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIjtcblxuICAgIGxldCBiYWxhbmNlID0gY2hhaW4ubWluZUJsb2NrKFsgVHguY29udHJhY3RDYWxsKFwibHAtdG9rZW5cIiwgXCJnZXQtYmFsYW5jZVwiLCBbIHR5cGVzLnVpbnQocG9vbElkXzApLCB0eXBlcy5wcmluY2lwYWwoTFBfMS5hZGRyZXNzKSBdLCBMUF8xLmFkZHJlc3MpIF0pLnJlY2VpcHRzWzBdLnJlc3VsdC5leHBlY3RPaygpO1xuICAgIC8vIGluaXRpYXRlIHdpdGhkcmF3YWwgcHJvY2VzcyBieSB0aGUgTGlxdWlkaXR5IFByb3ZpZGVyIG9uIFBvb2wgMFxuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFtcbiAgICAgIFR4LmNvbnRyYWN0Q2FsbChcbiAgICAgICAgXCJzdXBwbGllci1pbnRlcmZhY2VcIixcbiAgICAgICAgXCJ3aXRoZHJhd1wiLFxuICAgICAgICBbXG4gICAgICAgICAgdHlwZXMudWludCgoY29uc3VtZVVpbnQoYmFsYW5jZSkpKSxcbiAgICAgICAgICB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKFAyUEtIX1ZFUlNJT04sIFwiaGV4XCIpKSxcbiAgICAgICAgICB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKFBVQktFWUhBU0gsIFwiaGV4XCIpKSxcbiAgICAgICAgICB0eXBlcy51aW50KHN1cHBsaWVySWRfMCksXG4gICAgICAgICAgdHlwZXMucHJpbmNpcGFsKExQX1RPS0VOKSxcbiAgICAgICAgICB0eXBlcy5wcmluY2lwYWwoWlBfVE9LRU4pLFxuICAgICAgICAgIHR5cGVzLnVpbnQocG9vbElkXzApLFxuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChMSVFVSURJVFlfVkFVTFQpLFxuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChYQlRDKSxcbiAgICAgICAgXSxcbiAgICAgICAgTFBfMS5hZGRyZXNzXG4gICAgICApXG4gICAgXSk7XG5cbiAgICAvLyBUcmFuc2FjdGlvbiBkYXRhXG4gICAgY29uc3QgYml0Y29pbkJsb2NrID0geyBoZWFkZXI6IFwiXCIsIGhlaWdodDogY2hhaW4uYmxvY2tIZWlnaHQgLSAxIH07XG4gICAgY29uc3QgcHJldkJsb2NrcyA9IFtdIGFzIHN0cmluZ1tdO1xuICAgIGNvbnN0IHByb29mID0geyBcInR4LWluZGV4XCI6IDAsIFwiaGFzaGVzXCI6IFtdLCBcInRyZWUtZGVwdGhcIjogMCB9XG4gICAgLy8gT3V0cHV0IGluIHdoaWNoIHdlJ3JlIGludGVyZXN0ZWQgZm9yIHRoZSB0cmFuc2FjdGlvblxuICAgIGNvbnN0IG91dHB1dEluZGV4ID0gMDtcblxuICAgIGNvbnN0IGxwMVN3YXBwZXJJZCA9IDA7XG4gICAgY29uc3Qgc2VudF9hbW91bnQgPSAxMDBfMDAwXzAwMDtcblxuICAgIC8vIGdlbmVyYXRlIGEgUDJQS0ggYml0Y29pbiB0cmFuc2FjdGlvbiBhcyB0aGUgb3V0Ym91bmQgdHJhbnNhY3Rpb24uXG4gICAgbGV0IHR4MSA9IGdlbmVyYXRlUDJQS0hUeChQVUJLRVlIQVNILCBzZW50X2Ftb3VudCk7XG4gICAgbGV0IHR4aWQxID0gZ2V0VHhJZCh0eDEpO1xuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFtUZXN0VXRpbHMuc2V0TWluZWRUeCh0eGlkMSwgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcyldKTtcbiAgICBcbiAgICAvLyBmaW5hbGl6ZSB0aGUgd2l0aGRyYXdhbCBieSB0aGUgYmFja2VuZCBieSBjb25maXJtaW5nIHRoYXQgdGhlIHRyYW5zYWN0aW9uIGhhcHBlbmVkLlxuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFtcbiAgICAgIFR4LmNvbnRyYWN0Q2FsbChcbiAgICAgICAgXCJzdXBwbGllci1pbnRlcmZhY2VcIixcbiAgICAgICAgXCJmaW5hbGl6ZS1vdXRib3VuZFwiLFxuICAgICAgICBbXG4gICAgICAgICAgdHlwZXMudHVwbGUoe1xuICAgICAgICAgICAgaGVhZGVyOiB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKGJpdGNvaW5CbG9jay5oZWFkZXIsIFwiaGV4XCIpKSxcbiAgICAgICAgICAgIGhlaWdodDogdHlwZXMudWludChiaXRjb2luQmxvY2suaGVpZ2h0KVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHR5cGVzLmxpc3QocHJldkJsb2Nrcy5tYXAoKHZhbCkgPT4gdHlwZXMuYnVmZihCdWZmZXIuZnJvbSh2YWwsIFwiaGV4XCIpKSkpLFxuICAgICAgICAgIHR5cGVzLmJ1ZmYoQnVmZmVyLmZyb20odHgxLCBcImhleFwiKSksXG4gICAgICAgICAgdHlwZXMudHVwbGUoe1xuICAgICAgICAgICAgXCJ0eC1pbmRleFwiOiB0eXBlcy51aW50KHByb29mWyd0eC1pbmRleCddKSxcbiAgICAgICAgICAgIFwiaGFzaGVzXCI6IHR5cGVzLmxpc3QocHJvb2YuaGFzaGVzLm1hcCh2YWwgPT4gdHlwZXMuYnVmZihCdWZmZXIuZnJvbSh2YWwsIFwiaGV4XCIpKSkpLFxuICAgICAgICAgICAgXCJ0cmVlLWRlcHRoXCI6IHR5cGVzLnVpbnQocHJvb2ZbJ3RyZWUtZGVwdGgnXSlcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB0eXBlcy51aW50KG91dHB1dEluZGV4KSxcbiAgICAgICAgICB0eXBlcy51aW50KGxwMVN3YXBwZXJJZCksXG4gICAgICAgIF0sXG4gICAgICAgIGRlcGxveWVyV2FsbGV0LmFkZHJlc3NcbiAgICAgIClcbiAgICBdKTtcbiAgfSxcbn0pO1xuXG5DbGFyaW5ldC50ZXN0KHtcbiAgbmFtZTogXCJMaXF1aWRpdHkgcHJvdmlkZXJzIGNhbiBjbGFpbSByZXdhcmRzIGFmdGVyIHRoZSBCb3Jyb3dlciBoYXMgbWFkZSBtdWx0aXBsZSBwYXltZW50cyBhbmQgdGhlIGZpbmFsIGxvYW4gcmVwYXltZW50XCIsXG4gIGFzeW5jIGZuKGNoYWluOiBDaGFpbiwgYWNjb3VudHM6IE1hcDxzdHJpbmcsIEFjY291bnQ+KSB7XG4gICAgbGV0IGRlcGxveWVyV2FsbGV0ID0gYWNjb3VudHMuZ2V0KFwiZGVwbG95ZXJcIikgYXMgQWNjb3VudDtcbiAgICBsZXQgTFBfMSA9IGFjY291bnRzLmdldChcIndhbGxldF8xXCIpIGFzIEFjY291bnQ7IC8vIExQXzFcbiAgICBsZXQgZGVsZWdhdGVfMSA9IGFjY291bnRzLmdldChcIndhbGxldF83XCIpIGFzIEFjY291bnQ7IC8vIERlbGVnYXRlXzFcbiAgICBsZXQgYm9ycm93ZXJfMSA9IGFjY291bnRzLmdldChcIndhbGxldF84XCIpIGFzIEFjY291bnQ7IC8vIGJvcnJvd2VyXzFcblxuICAgIGxldCBhc3NldE1hcHMgPSBjaGFpbi5nZXRBc3NldHNNYXBzKCk7XG4gICAgbGV0IHBvb2wgPSBuZXcgUG9vbChjaGFpbiwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIGxldCBsb2FuID0gbmV3IExvYW4oY2hhaW4sIGRlcGxveWVyV2FsbGV0KTtcblxuICAgIGxldCBibG9jayA9IEdsb2JhbHMub25ib2FyZFVzZXJBZGRyZXNzKGNoYWluLCBib3Jyb3dlcl8xLmFkZHJlc3MsIFAyUEtIX1ZFUlNJT04sIEhBU0gsIGRlcGxveWVyV2FsbGV0LmFkZHJlc3MpO1xuXG4gICAgcG9vbC5jcmVhdGVQb29sKGRlbGVnYXRlXzEuYWRkcmVzcyxMUF9UT0tFTixaUF9UT0tFTixQQVlNRU5ULFJFV0FSRFNfQ0FMQywxMDAwLDEwMDAsMTBfMDAwXzAwMF8wMDAsMTBfMDAwXzAwMF8wMDAsMSxNQVhfTUFUVVJJVFlfTEVOR1RILExJUVVJRElUWV9WQVVMVCxDUF9UT0tFTixDT1ZFUl9WQVVMVCxDUF9SRVdBUkRTX1RPS0VOLFhCVEMsdHJ1ZSk7XG4gICAgcG9vbC5maW5hbGl6ZVBvb2woZGVsZWdhdGVfMS5hZGRyZXNzLCBMUF9UT0tFTiwgWlBfVE9LRU4sIENQX1RPS0VOLCAwKTtcblxuICAgIGxldCBzdXBwbGllcklkID0gY29uc3VtZVVpbnQoY2hhaW4ubWluZUJsb2NrKFsuLi5yZWdpc3RlclN1cHBsaWVyVHhzKGRlcGxveWVyV2FsbGV0LmFkZHJlc3MsIGRlcGxveWVyV2FsbGV0LmFkZHJlc3MsIHJlY2lwaWVudCwgMTAsIDEwLCA1MDAsIDUwMCwgXCJzdXBwbGllci0xXCIsIDEwXzAwMF8wMDBfMDAwKV0pLnJlY2VpcHRzWzFdLnJlc3VsdC5leHBlY3RPaygpIGFzIHN0cmluZyk7XG4gICAgbGV0IGZlZSA9IE51bWJlcihNYWdpYy5nZXRTdXBwbGllcihjaGFpbiwgc3VwcGxpZXJJZCwgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcykuZXhwZWN0U29tZSgpLmV4cGVjdFR1cGxlKClbXCJpbmJvdW5kLWZlZVwiXS5leHBlY3RTb21lKCkpO1xuXG4gICAgY29uc3QgYW1vdW50U2VudCA9IDEwMF8wMDBfMDAwO1xuXG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soW1xuICAgICAgTWFnaWMuaW5pdGlhbGl6ZVN3YXBwZXIoTFBfMS5hZGRyZXNzKSxcbiAgICAgIC4uLnNlbmRGdW5kc1AyU0hUeHMoZGVwbG95ZXJXYWxsZXQuYWRkcmVzcywwLExQXzEuYWRkcmVzcyxzZW5kZXIscmVjaXBpZW50LDUwMCwwLGFtb3VudFNlbnQscHJlaW1hZ2Usc3VwcGxpZXJJZCxhbW91bnRTZW50ICogZmVlIC8gMTBfMDAwLDEsY2hhaW4uYmxvY2tIZWlnaHQgLSAxKVxuICAgIF0pO1xuICAgIGNvbnN0IGxvYW5BbW91bnQgPSAxMDBfMDAwXzAwMDtcbiAgICBwb29sLmNyZWF0ZUxvYW4oTFBfVE9LRU4sMCwxMDBfMDAwXzAwMCxYQlRDLDAsWEJUQywzMDAsMTI5NjAsMTQ0MCxDT0xMX1ZBVUxULEZVTkRJTkdfVkFVTFQsYm9ycm93ZXJfMS5hZGRyZXNzKTtcbiAgICBwb29sLmZ1bmRMb2FuKDAsTFBfVE9LRU4sMCxMSVFVSURJVFlfVkFVTFQsRlVORElOR19WQVVMVCxYQlRDLGRlbGVnYXRlXzEuYWRkcmVzcyk7XG4gICAgY2hhaW4ubWluZUJsb2NrKFtTdXBwbGllckludGVyZmFjZS51cGRhdGVMaXF1aWRpdHkoY2hhaW4uYmxvY2tIZWlnaHQsIDEwMF8wMDBfMDAwLCBkZXBsb3llcldhbGxldC5hZGRyZXNzKV0pO1xuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFtcbiAgICAgIFN1cHBsaWVySW50ZXJmYWNlLmRyYXdkb3duKDAsIExQX1RPS0VOLCAwLCBYQlRDLCBDT0xMX1ZBVUxULCBGVU5ESU5HX1ZBVUxULCBQMlBLSF9WRVJTSU9OLCBIQVNILCAwLCBTV0FQX1JPVVRFUixYQlRDLCBib3Jyb3dlcl8xLmFkZHJlc3MpXG4gICAgXSk7XG5cbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbLi4uZmluYWxpemVEcmF3ZG93bigwLCBMUF9UT0tFTiwgMCwgWEJUQywgQ09MTF9WQVVMVCwgRlVORElOR19WQVVMVCwgWEJUQywgSEFTSCwgOTk3MDAwMDAsIDAsIDI4LCBib3Jyb3dlcl8xLmFkZHJlc3MsIGRlcGxveWVyV2FsbGV0LmFkZHJlc3MpXSk7XG5cbiAgICBjaGFpbi5taW5lRW1wdHlCbG9ja1VudGlsKGNvbnN1bWVVaW50KGxvYW4uZ2V0TG9hbkRhdGEoMCkucmVzdWx0LmV4cGVjdFR1cGxlKClbXCJuZXh0LXBheW1lbnRcIl0pIC0gMSk7XG4gICAgbGV0IHJlZ3VsYXJQYXltZW50RHVlID0gKGNvbnN1bWVVaW50KFBheW1lbnQuZ2V0Q3VycmVudExvYW5QYXltZW50KGNoYWluLCAwLCBib3Jyb3dlcl8xLmFkZHJlc3MpKSk7XG4gICAgbGV0IG1pblBheW1lbnRUb1JlY2VpdmUgPSAgTWF0aC5mbG9vcihyZWd1bGFyUGF5bWVudER1ZSAqIGZlZSAvIDEwXzAwMCk7XG5cbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbXG4gICAgICBNYWdpYy5pbml0aWFsaXplU3dhcHBlcihib3Jyb3dlcl8xLmFkZHJlc3MpLFxuICAgICAgLi4ubWFrZVBheW1lbnRUeHMoZGVwbG95ZXJXYWxsZXQuYWRkcmVzcywgYm9ycm93ZXJfMS5hZGRyZXNzLHNlbmRlcixyZWNpcGllbnQsNTAwLDEscmVndWxhclBheW1lbnREdWUsXCIwMFwiLHN1cHBsaWVySWQsbWluUGF5bWVudFRvUmVjZWl2ZSwwLCBQQVlNRU5ULCBMUF9UT0tFTixMSVFVSURJVFlfVkFVTFQsIDAsIENQX1RPS0VOLENQX1JFV0FSRFNfVE9LRU4sIFpQX1RPS0VOLCBTV0FQX1JPVVRFUixjaGFpbi5ibG9ja0hlaWdodCAtIDEsIFhCVEMpXG4gICAgXSk7XG5cbiAgICBjaGFpbi5taW5lRW1wdHlCbG9jayhjb25zdW1lVWludChsb2FuLmdldExvYW5EYXRhKDApLnJlc3VsdC5leHBlY3RUdXBsZSgpW1wibmV4dC1wYXltZW50XCJdKSAtIGJsb2NrLmhlaWdodCAtIDEpO1xuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFsuLi5tYWtlUGF5bWVudFR4cyhkZXBsb3llcldhbGxldC5hZGRyZXNzLCBib3Jyb3dlcl8xLmFkZHJlc3Msc2VuZGVyLHJlY2lwaWVudCw1MDAsMSxyZWd1bGFyUGF5bWVudER1ZSxcIjAxXCIsc3VwcGxpZXJJZCxtaW5QYXltZW50VG9SZWNlaXZlLDAsIFBBWU1FTlQsIExQX1RPS0VOLExJUVVJRElUWV9WQVVMVCwgMCwgQ1BfVE9LRU4sQ1BfUkVXQVJEU19UT0tFTiwgWlBfVE9LRU4sIFNXQVBfUk9VVEVSLGNoYWluLmJsb2NrSGVpZ2h0IC0gMSwgWEJUQyldKTtcblxuICAgIGNoYWluLm1pbmVFbXB0eUJsb2NrKGNvbnN1bWVVaW50KGxvYW4uZ2V0TG9hbkRhdGEoMCkucmVzdWx0LmV4cGVjdFR1cGxlKClbXCJuZXh0LXBheW1lbnRcIl0pIC0gY2hhaW4uYmxvY2tIZWlnaHQgLSAxKTtcbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbLi4ubWFrZVBheW1lbnRUeHMoZGVwbG95ZXJXYWxsZXQuYWRkcmVzcywgYm9ycm93ZXJfMS5hZGRyZXNzLHNlbmRlcixyZWNpcGllbnQsNTAwLDEscmVndWxhclBheW1lbnREdWUsXCIwMlwiLHN1cHBsaWVySWQsbWluUGF5bWVudFRvUmVjZWl2ZSwwLCBQQVlNRU5ULCBMUF9UT0tFTixMSVFVSURJVFlfVkFVTFQsIDAsIENQX1RPS0VOLENQX1JFV0FSRFNfVE9LRU4sIFpQX1RPS0VOLCBTV0FQX1JPVVRFUixjaGFpbi5ibG9ja0hlaWdodCAtIDEsIFhCVEMpXSk7XG4gICAgXG4gICAgLy8gSW4gYSBQMlBLSCwgdGhpcyBoYXNoIGlzIHRoZSBoYXNoIG9mIHRoZSBwdWJsaWMga2V5IG9mIHRoZSB1c2VyLlxuICAgIGNvbnN0IExQXzFfQUREUkVTU19IQVNIID0gXCIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxXCI7XG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soWyBTdXBwbGllckludGVyZmFjZS53aXRoZHJhd1Jld2FyZHMoUDJQS0hfVkVSU0lPTiwgTFBfMV9BRERSRVNTX0hBU0gsIDAsIExQX1RPS0VOLCAwLCBMSVFVSURJVFlfVkFVTFQsIFhCVEMsIExQXzEuYWRkcmVzcykgXSk7XG4gICAgbGV0IHJld2FyZHNFYXJuZWQgPSBjb25zdW1lVWludChibG9jay5yZWNlaXB0c1swXS5yZXN1bHQuZXhwZWN0T2soKSk7XG5cbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbIC4uLmZpbmFsaXplT3V0Ym91bmRUeHMoTFBfMV9BRERSRVNTX0hBU0gsIHJld2FyZHNFYXJuZWQsIDEsIGNoYWluLmJsb2NrSGVpZ2h0IC0gMSwgYm9ycm93ZXJfMS5hZGRyZXNzLCBkZXBsb3llcldhbGxldC5hZGRyZXNzKSBdKTtcbiAgICBibG9jay5yZWNlaXB0c1sxXS5yZXN1bHQuZXhwZWN0T2soKTtcblxuICAgIGNoYWluLm1pbmVFbXB0eUJsb2NrKGNvbnN1bWVVaW50KGxvYW4uZ2V0TG9hbkRhdGEoMCkucmVzdWx0LmV4cGVjdFR1cGxlKClbXCJuZXh0LXBheW1lbnRcIl0pIC0gYmxvY2suaGVpZ2h0IC0gMSk7XG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soWy4uLm1ha2VQYXltZW50VHhzKGRlcGxveWVyV2FsbGV0LmFkZHJlc3MsIGJvcnJvd2VyXzEuYWRkcmVzcyxzZW5kZXIscmVjaXBpZW50LDUwMCwxLHJlZ3VsYXJQYXltZW50RHVlLFwiMDNcIixzdXBwbGllcklkLG1pblBheW1lbnRUb1JlY2VpdmUsMCwgUEFZTUVOVCwgTFBfVE9LRU4sTElRVUlESVRZX1ZBVUxULCAwLCBDUF9UT0tFTixDUF9SRVdBUkRTX1RPS0VOLCBaUF9UT0tFTiwgU1dBUF9ST1VURVIsY2hhaW4uYmxvY2tIZWlnaHQgLSAxLCBYQlRDKV0pO1xuXG4gICAgY2hhaW4ubWluZUVtcHR5QmxvY2soY29uc3VtZVVpbnQobG9hbi5nZXRMb2FuRGF0YSgwKS5yZXN1bHQuZXhwZWN0VHVwbGUoKVtcIm5leHQtcGF5bWVudFwiXSkgLSBibG9jay5oZWlnaHQgLSAxKTtcbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbLi4ubWFrZVBheW1lbnRUeHMoZGVwbG95ZXJXYWxsZXQuYWRkcmVzcywgYm9ycm93ZXJfMS5hZGRyZXNzLHNlbmRlcixyZWNpcGllbnQsNTAwLDEscmVndWxhclBheW1lbnREdWUsXCIwNFwiLHN1cHBsaWVySWQsbWluUGF5bWVudFRvUmVjZWl2ZSwwLCBQQVlNRU5ULCBMUF9UT0tFTixMSVFVSURJVFlfVkFVTFQsIDAsIENQX1RPS0VOLENQX1JFV0FSRFNfVE9LRU4sIFpQX1RPS0VOLCBTV0FQX1JPVVRFUixjaGFpbi5ibG9ja0hlaWdodCAtIDEsIFhCVEMpXSk7XG5cbiAgICBjaGFpbi5taW5lRW1wdHlCbG9jayhjb25zdW1lVWludChsb2FuLmdldExvYW5EYXRhKDApLnJlc3VsdC5leHBlY3RUdXBsZSgpW1wibmV4dC1wYXltZW50XCJdKSAtIGJsb2NrLmhlaWdodCAtIDEpO1xuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFsuLi5tYWtlUGF5bWVudFR4cyhkZXBsb3llcldhbGxldC5hZGRyZXNzLCBib3Jyb3dlcl8xLmFkZHJlc3Msc2VuZGVyLHJlY2lwaWVudCw1MDAsMSxyZWd1bGFyUGF5bWVudER1ZSxcIjA1XCIsc3VwcGxpZXJJZCxtaW5QYXltZW50VG9SZWNlaXZlLDAsIFBBWU1FTlQsIExQX1RPS0VOLExJUVVJRElUWV9WQVVMVCwgMCwgQ1BfVE9LRU4sQ1BfUkVXQVJEU19UT0tFTiwgWlBfVE9LRU4sIFNXQVBfUk9VVEVSLGNoYWluLmJsb2NrSGVpZ2h0IC0gMSwgWEJUQyldKTtcblxuICAgIGNoYWluLm1pbmVFbXB0eUJsb2NrKGNvbnN1bWVVaW50KGxvYW4uZ2V0TG9hbkRhdGEoMCkucmVzdWx0LmV4cGVjdFR1cGxlKClbXCJuZXh0LXBheW1lbnRcIl0pIC0gYmxvY2suaGVpZ2h0IC0gMSk7XG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soWy4uLm1ha2VQYXltZW50VHhzKGRlcGxveWVyV2FsbGV0LmFkZHJlc3MsIGJvcnJvd2VyXzEuYWRkcmVzcyxzZW5kZXIscmVjaXBpZW50LDUwMCwxLHJlZ3VsYXJQYXltZW50RHVlLFwiMDZcIixzdXBwbGllcklkLG1pblBheW1lbnRUb1JlY2VpdmUsMCwgUEFZTUVOVCwgTFBfVE9LRU4sTElRVUlESVRZX1ZBVUxULCAwLCBDUF9UT0tFTixDUF9SRVdBUkRTX1RPS0VOLCBaUF9UT0tFTiwgU1dBUF9ST1VURVIsY2hhaW4uYmxvY2tIZWlnaHQgLSAxLCBYQlRDKV0pO1xuICAgIGNoYWluLm1pbmVFbXB0eUJsb2NrKGNvbnN1bWVVaW50KGxvYW4uZ2V0TG9hbkRhdGEoMCkucmVzdWx0LmV4cGVjdFR1cGxlKClbXCJuZXh0LXBheW1lbnRcIl0pIC0gYmxvY2suaGVpZ2h0IC0gMSk7XG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soWy4uLm1ha2VQYXltZW50VHhzKGRlcGxveWVyV2FsbGV0LmFkZHJlc3MsIGJvcnJvd2VyXzEuYWRkcmVzcyxzZW5kZXIscmVjaXBpZW50LDUwMCwxLHJlZ3VsYXJQYXltZW50RHVlLFwiMDdcIixzdXBwbGllcklkLG1pblBheW1lbnRUb1JlY2VpdmUsMCwgUEFZTUVOVCwgTFBfVE9LRU4sTElRVUlESVRZX1ZBVUxULCAwLCBDUF9UT0tFTixDUF9SRVdBUkRTX1RPS0VOLCBaUF9UT0tFTiwgU1dBUF9ST1VURVIsY2hhaW4uYmxvY2tIZWlnaHQgLSAxLCBYQlRDKV0pO1xuICAgIGNoYWluLm1pbmVFbXB0eUJsb2NrKGNvbnN1bWVVaW50KGxvYW4uZ2V0TG9hbkRhdGEoMCkucmVzdWx0LmV4cGVjdFR1cGxlKClbXCJuZXh0LXBheW1lbnRcIl0pIC0gYmxvY2suaGVpZ2h0IC0gMSk7XG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soWy4uLm1ha2VQYXltZW50VHhzKGRlcGxveWVyV2FsbGV0LmFkZHJlc3MsIGJvcnJvd2VyXzEuYWRkcmVzcyxzZW5kZXIscmVjaXBpZW50LDUwMCwxLHJlZ3VsYXJQYXltZW50RHVlICsgbG9hbkFtb3VudCxcIjA4XCIsc3VwcGxpZXJJZCxtaW5QYXltZW50VG9SZWNlaXZlLDAsIFBBWU1FTlQsIExQX1RPS0VOLExJUVVJRElUWV9WQVVMVCwgMCwgQ1BfVE9LRU4sQ1BfUkVXQVJEU19UT0tFTiwgWlBfVE9LRU4sIFNXQVBfUk9VVEVSLGNoYWluLmJsb2NrSGVpZ2h0IC0gMSwgWEJUQyldKTtcbiAgICBcbiAgICAvLyBpbml0aWF0ZSBjbGFpbWluZyByZXdhcmRzXG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soWyBTdXBwbGllckludGVyZmFjZS53aXRoZHJhd1Jld2FyZHMoUDJQS0hfVkVSU0lPTiwgTFBfMV9BRERSRVNTX0hBU0gsIDAsIExQX1RPS0VOLCAwLCBMSVFVSURJVFlfVkFVTFQsIFhCVEMsIExQXzEuYWRkcmVzcykgXSk7XG4gICAgcmV3YXJkc0Vhcm5lZCA9IGNvbnN1bWVVaW50KGJsb2NrLnJlY2VpcHRzWzBdLnJlc3VsdC5leHBlY3RPaygpKTtcbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbIC4uLmZpbmFsaXplT3V0Ym91bmRUeHMoTFBfMV9BRERSRVNTX0hBU0gsIHJld2FyZHNFYXJuZWQsIDIsIGNoYWluLmJsb2NrSGVpZ2h0IC0gMSwgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcywgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcykgXSk7XG4gICAgLy8gZW5kIG9mIGNsYWltaW5nIHJld2FyZHNcblxuICAgIGxldCBnbG9iYWxzID0gR2xvYmFscy5nZXRHbG9iYWxzKGNoYWluLCBkZXBsb3llcldhbGxldC5hZGRyZXNzKS5leHBlY3RUdXBsZSgpO1xuICAgIGxldCBjb29sZG93blRpbWUgPSBjb25zdW1lVWludChnbG9iYWxzW1wibHAtY29vbGRvd24tcGVyaW9kXCJdKTtcblxuICAgIGJsb2NrID0gcG9vbC5zaWduYWxXaXRoZHJhd2FsKExQX1RPS0VOLDAsIGFtb3VudFNlbnQsIExQXzEuYWRkcmVzcyk7XG4gICAgY2hhaW4ubWluZUVtcHR5QmxvY2soY29vbGRvd25UaW1lKTtcblxuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFsgU3VwcGxpZXJJbnRlcmZhY2Uud2l0aGRyYXcoYW1vdW50U2VudCwgUDJQS0hfVkVSU0lPTiwgTFBfMV9BRERSRVNTX0hBU0gsIDAsIExQX1RPS0VOLFpQX1RPS0VOLCAwLExJUVVJRElUWV9WQVVMVCwgWEJUQywgTFBfMS5hZGRyZXNzKSBdKTtcbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbIC4uLmZpbmFsaXplT3V0Ym91bmRUeHMoTFBfMV9BRERSRVNTX0hBU0gsIGFtb3VudFNlbnQsIDMsIGNoYWluLmJsb2NrSGVpZ2h0IC0gMSwgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcywgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcykgXSk7XG4gIH0sXG59KTsiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsd0JBQXdCO0FBQ3hCLFNBQVMsUUFBUSxFQUFFLEVBQUUsRUFBa0IsS0FBSyxRQUFRLDhDQUE4QyxDQUFDO0FBRW5HLFNBQVMsSUFBSSxRQUFRLCtCQUErQixDQUFDO0FBQ3JELFNBQVMsU0FBUyxRQUFRLHFDQUFxQyxDQUFDO0FBQ2hFLFNBQVMsSUFBSSxRQUFRLCtCQUErQixDQUFDO0FBQ3JELFNBQVMsT0FBTyxRQUFRLDhCQUE4QixDQUFDO0FBQ3ZELFNBQVMsTUFBTSxRQUFRLDhDQUE4QyxDQUFDO0FBQ3RFLFNBQVMsU0FBUyxRQUFRLGdDQUFnQyxDQUFDO0FBQzNELFNBQVMsS0FBSyxRQUFRLGdDQUFnQyxDQUFDO0FBQ3ZELFNBQVMsT0FBTyxRQUFRLDZCQUE2QixDQUFDO0FBQ3RELFNBQVMsaUJBQWlCLFFBQVEsd0NBQXdDLENBQUM7QUFDM0UsU0FBUyxPQUFPLFFBQVEsNkJBQTZCLENBQUM7QUFHdEQsU0FDRSxPQUFPLEVBRVAsT0FBTyxFQUNQLGFBQWEsRUFDYixXQUFXLEVBQ1gsZUFBZSxFQUNmLGNBQWMsUUFDVCxZQUFZLENBQUM7QUFFcEIsU0FPRSxnQkFBZ0IsRUFDaEIsbUJBQW1CLEVBQ25CLG1CQUFtQixFQUNuQixXQUFXLEVBRVgsZ0JBQWdCLEVBQ2hCLGNBQWMsUUFDVCw0QkFBNEIsQ0FBQztBQUVwQyxTQUNFLFFBQVEsRUFDUixRQUFRLEVBQ1IsT0FBTyxFQUNQLFlBQVksRUFDWixlQUFlLEVBQ2YsUUFBUSxFQUNSLElBQUksRUFD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