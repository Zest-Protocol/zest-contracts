// deno-lint-ignore-file
import { Clarinet, Tx, types } from 'https://deno.land/x/clarinet@v1.0.3/index.ts';
import { Pool } from '../../interfaces/pool-v1-0.ts';
import { CoverPool } from '../../interfaces/cover-pool-v1-0.ts';
import { Loan } from '../../interfaces/loan-v1-0.ts';
import { LPToken } from '../../interfaces/lp-token.ts';
import { CPToken } from '../../interfaces/cp-token.ts';
import { Globals } from '../../interfaces/globals.ts';
import { LiquidityVault } from '../../interfaces/liquidity-vault.ts';
import { consumeUint } from '../../interfaces/common.ts';
import { LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, LIQUIDITY_VAULT, CP_TOKEN, XBTC, FUNDING_VAULT, P2PKH_VERSION, HASH, ONE_DAY, DAYS_PER_YEAR, CP_REWARDS_TOKEN, COVER_VAULT } from "../config.ts";
const MAX_MATURITY_LENGTH = ONE_DAY * DAYS_PER_YEAR * 3; // 3 years
Clarinet.test({
    name: "Add funds to cover flow",
    async fn (chain, accounts) {
        let deployerWallet = accounts.get("deployer");
        let LP_1 = accounts.get("wallet_1"); // LP_1
        let LP_2 = accounts.get("wallet_2"); // LP_2
        let LP_3 = accounts.get("wallet_3"); // LP_3
        let LP_4 = accounts.get("wallet_4"); // LP_4
        let cover_1 = accounts.get("wallet_5"); // Cover_1
        let cover_2 = accounts.get("wallet_6"); // Cover_2
        let delegate_1 = accounts.get("wallet_7"); // Delegate_1
        let delegate_2 = accounts.get("wallet_8"); // Delegate_2
        let delegate_3 = accounts.get("wallet_9"); // Delegate_3
        let delegate_4 = accounts.get("wallet_10"); // Delegate_4
        let borrower_1 = accounts.get("wallet_11"); // borrower_1
        let borrower_2 = accounts.get("wallet_12"); // borrower_2
        let borrower_3 = accounts.get("wallet_13"); // borrower_2
        let cover_provider_1 = accounts.get("wallet_14"); // cover_provider_1
        let cover_provider_2 = accounts.get("wallet_15"); // cover_provider_2
        let assetMaps = chain.getAssetsMaps();
        let pool = new Pool(chain, deployerWallet);
        let loan = new Loan(chain, deployerWallet);
        let coverPool = new CoverPool(chain, deployerWallet);
        let LpToken = new LPToken(chain, deployerWallet);
        let CpToken = new CPToken(chain, deployerWallet);
        let lv = new LiquidityVault(chain, LIQUIDITY_VAULT, deployerWallet);
        let fv = new LiquidityVault(chain, FUNDING_VAULT, deployerWallet);
        const poolId0 = 0;
        // Start Set up
        let block = Globals.onboardUserAddress(chain, borrower_1.address, P2PKH_VERSION, HASH, deployerWallet.address);
        block = pool.createPool(delegate_1.address, LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, 1000, 1000, 10_000_000_000, 10_000_000_000, 1, MAX_MATURITY_LENGTH, LIQUIDITY_VAULT, CP_TOKEN, COVER_VAULT, CP_REWARDS_TOKEN, XBTC, true);
        pool.finalizePool(delegate_1.address, LP_TOKEN, ZP_TOKEN, CP_TOKEN, 0);
        block = pool.enableCover(LP_TOKEN, CP_TOKEN, 0, delegate_1.address);
        // End Set up
        // Start Flow
        // COVER POOL HAS A LIMIT OF 10_000_000_000
        block = chain.mineBlock([
            Tx.contractCall('cover-pool-v1-0', 'send-funds', [
                types.principal(`${deployerWallet.address}.cp-token`),
                types.principal(`${deployerWallet.address}.cover-vault`),
                types.principal(`${deployerWallet.address}.cp-rewards-token`),
                types.principal(`${deployerWallet.address}.Wrapped-Bitcoin`),
                types.uint(poolId0),
                types.uint(6_000_000_000n),
                types.uint(1),
                types.principal(`${deployerWallet.address}.rewards-calc`),
                types.principal(cover_provider_1.address)
            ], cover_provider_1.address)
        ]);
    }
});
Clarinet.test({
    name: "Withdraw funds from cover pool flow",
    async fn (chain, accounts) {
        let deployerWallet = accounts.get("deployer");
        let LP_1 = accounts.get("wallet_1"); // LP_1
        let LP_2 = accounts.get("wallet_2"); // LP_2
        let LP_3 = accounts.get("wallet_3"); // LP_3
        let LP_4 = accounts.get("wallet_4"); // LP_4
        let cover_1 = accounts.get("wallet_5"); // Cover_1
        let cover_2 = accounts.get("wallet_6"); // Cover_2
        let delegate_1 = accounts.get("wallet_7"); // Delegate_1
        let delegate_2 = accounts.get("wallet_8"); // Delegate_2
        let delegate_3 = accounts.get("wallet_9"); // Delegate_3
        let delegate_4 = accounts.get("wallet_10"); // Delegate_4
        let borrower_1 = accounts.get("wallet_11"); // borrower_1
        let borrower_2 = accounts.get("wallet_12"); // borrower_2
        let borrower_3 = accounts.get("wallet_13"); // borrower_2
        let cover_provider_1 = accounts.get("wallet_14"); // cover_provider_1
        let cover_provider_2 = accounts.get("wallet_15"); // cover_provider_2
        let assetMaps = chain.getAssetsMaps();
        let pool = new Pool(chain, deployerWallet);
        let loan = new Loan(chain, deployerWallet);
        let coverPool = new CoverPool(chain, deployerWallet);
        let LpToken = new LPToken(chain, deployerWallet);
        let CpToken = new CPToken(chain, deployerWallet);
        let lv = new LiquidityVault(chain, LIQUIDITY_VAULT, deployerWallet);
        let fv = new LiquidityVault(chain, FUNDING_VAULT, deployerWallet);
        const poolId0 = 0;
        const commitmentTime = 1;
        const amountCommitted = 6_000_000_000n;
        // Start Set up
        let block = Globals.onboardUserAddress(chain, borrower_1.address, P2PKH_VERSION, HASH, deployerWallet.address);
        block = pool.createPool(delegate_1.address, LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, 1000, 1000, 10_000_000_000, 10_000_000_000, 1, MAX_MATURITY_LENGTH, LIQUIDITY_VAULT, CP_TOKEN, COVER_VAULT, CP_REWARDS_TOKEN, XBTC, true);
        pool.finalizePool(delegate_1.address, LP_TOKEN, ZP_TOKEN, CP_TOKEN, 0);
        block = pool.enableCover(LP_TOKEN, CP_TOKEN, 0, delegate_1.address);
        block = coverPool.sendFunds(CP_TOKEN, COVER_VAULT, CP_REWARDS_TOKEN, XBTC, poolId0, amountCommitted, commitmentTime, REWARDS_CALC, cover_provider_1.address);
        let result = coverPool.getPool(poolId0);
        // We have to wait until the time committed has passed
        let commitmentBlockTime = consumeUint(result["cycle-length"]) * commitmentTime;
        chain.mineEmptyBlock(commitmentBlockTime);
        // End Set up
        // Flow Starts here
        // Signal that we want to start a withdrawal
        block = chain.mineBlock([
            Tx.contractCall('cover-pool-v1-0', 'signal-withdrawal', [
                types.principal(`${deployerWallet.address}.cp-token`),
                types.uint(poolId0),
                types.uint(amountCommitted)
            ], cover_provider_1.address)
        ]);
        // Get time for staker cooldown period time
        let globals = Globals.getGlobals(chain, deployerWallet.address).expectTuple();
        let stakerCooldownPeriod = consumeUint(globals["staker-cooldown-period"]);
        // wait until time has passed.
        chain.mineEmptyBlock(stakerCooldownPeriod);
        block = chain.mineBlock([
            Tx.contractCall('cover-pool-v1-0', 'withdraw', [
                types.principal(`${deployerWallet.address}.cp-token`),
                types.principal(`${deployerWallet.address}.cp-rewards-token`),
                types.principal(`${deployerWallet.address}.Wrapped-Bitcoin`),
                types.uint(poolId0),
                types.uint(amountCommitted),
                types.principal(`${deployerWallet.address}.cover-vault`)
            ], cover_provider_1.address)
        ]);
        block.receipts[0].result.expectOk();
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvZmVybmFuZG9mb3kvRG9jdW1lbnRzL3plc3QtY29udHJhY3RzL29uY2hhaW4vdGVzdHMvc3VwcGxpZXItaW50ZXJmYWNlL2Zsb3dzL2FkZF9jb3Zlcl9mbG93X3Rlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZGVuby1saW50LWlnbm9yZS1maWxlXG5pbXBvcnQgeyBDbGFyaW5ldCwgVHgsIENoYWluLCBBY2NvdW50LCB0eXBlcyB9IGZyb20gJ2h0dHBzOi8vZGVuby5sYW5kL3gvY2xhcmluZXRAdjEuMC4zL2luZGV4LnRzJztcbmltcG9ydCB7IGFzc2VydEVxdWFscywgYXNzZXJ0IH0gZnJvbSAnaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTU5LjAvdGVzdGluZy9hc3NlcnRzLnRzJztcbmltcG9ydCB7IFBvb2wgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3Bvb2wtdjEtMC50cyc7XG5pbXBvcnQgeyBDb3ZlclBvb2wgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL2NvdmVyLXBvb2wtdjEtMC50cyc7XG5pbXBvcnQgeyBMb2FuIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9sb2FuLXYxLTAudHMnO1xuaW1wb3J0IHsgTFBUb2tlbiB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvbHAtdG9rZW4udHMnO1xuaW1wb3J0IHsgQ1BUb2tlbiB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvY3AtdG9rZW4udHMnO1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSBcImh0dHBzOi8vZGVuby5sYW5kL3N0ZEAwLjE1OS4wL25vZGUvYnVmZmVyLnRzXCI7XG5pbXBvcnQgeyBUZXN0VXRpbHMgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3Rlc3QtdXRpbHMudHMnO1xuaW1wb3J0IHsgTWFnaWMgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL21hZ2ljX3JlYWwudHMnO1xuaW1wb3J0IHsgR2xvYmFscyB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvZ2xvYmFscy50cyc7XG5pbXBvcnQgeyBTdXBwbGllckludGVyZmFjZSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvc3VwcGxpZXJfaW50ZXJmYWNlLnRzJztcbmltcG9ydCB7IExpcXVpZGl0eVZhdWx0IH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9saXF1aWRpdHktdmF1bHQudHMnO1xuaW1wb3J0IHsgQ29sbFZhdWx0IH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9jb2xsLXZhdWx0LnRzJztcbmltcG9ydCB7IENvdmVyVmF1bHQgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL2NvdmVyLXZhdWx0LnRzJztcbmltcG9ydCB7IEZ1bmRpbmdWYXVsdCB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvZnVuZGluZy12YXVsdC50cyc7XG5pbXBvcnQgeyBQYXltZW50IH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9wYXltZW50LnRzJztcblxuaW1wb3J0IHsgXG4gIGdldEhhc2gsXG4gIGdldFJldmVyc2VUeElkLFxuICBnZXRUeElkLFxuICBnZXRFeHBpcmF0aW9uLFxuICBzd2FwcGVyQnVmZixcbiAgZ2VuZXJhdGVQMlBLSFR4LFxuICBnZW5lcmF0ZVAyU0hUeCxcbiAgcGFkVG8sXG4gIG51bWJlclRvSGV4LFxuICB0b0xpdHRsZUVuZGlhbixcbiAgZ2VuZXJhdGVQMlBLSFNjcmlwdCxcbiAgZ2VuZXJhdGVSYW5kb21IZXhTdHJpbmcsXG59IGZyb20gXCIuLi91dGlsLnRzXCI7XG5cbmltcG9ydCB7XG4gIHNldENvbnRyYWN0T3duZXIsXG4gIGluaXRDb250cmFjdE93bmVycyxcbiAgYm9vdHN0cmFwQXBwcm92ZWRDb250cmFjdHMsXG4gIGFkZEFwcHJvdmVkQ29udHJhY3QsXG4gIHJ1bkJvb3RzdHJhcCxcbiAgYWRkQm9ycm93ZXIsXG4gIHNlbmRGdW5kc1AyU0hUeHMsXG4gIHJlZ2lzdGVyU3VwcGxpZXJUeHMsXG4gIGNvbnN1bWVVaW50LFxuICBnZXRCUCxcbiAgZmluYWxpemVEcmF3ZG93bixcbiAgbWFrZVBheW1lbnRUeHMsXG4gIGZpbmFsaXplT3V0Ym91bmRUeHMsXG4gIGZpbmFsaXplUm9sbG92ZXIsXG59IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvY29tbW9uLnRzJztcblxuaW1wb3J0IHtcbiAgTFBfVE9LRU4sXG4gIFpQX1RPS0VOLFxuICBQQVlNRU5ULFxuICBSRVdBUkRTX0NBTEMsXG4gIExJUVVJRElUWV9WQVVMVCxcbiAgQ1BfVE9LRU4sXG4gIFhCVEMsXG4gIENPTExfVkFVTFQsXG4gIEZVTkRJTkdfVkFVTFQsXG4gIFAyUEtIX1ZFUlNJT04sXG4gIEhBU0gsXG4gIHJlY2lwaWVudCxcbiAgc2VuZGVyLFxuICBwcmVpbWFnZSxcbiAgRVJST1JTLFxuICBPTkVfREFZLFxuICBEQVlTX1BFUl9ZRUFSLFxuICBEQVlTX1BFUl9XRUVLLFxuICBDUF9SRVdBUkRTX1RPS0VOLFxuICBDT1ZFUl9WQVVMVCxcbiAgWFVTRF9DT05UUkFDVF9TSU1ORVQsXG4gIFNXQVBfUk9VVEVSLFxufSBmcm9tIFwiLi4vY29uZmlnLnRzXCI7XG5cblxuY29uc3QgTUFYX01BVFVSSVRZX0xFTkdUSCA9IE9ORV9EQVkgKiBEQVlTX1BFUl9ZRUFSICogMzsgLy8gMyB5ZWFyc1xuXG5DbGFyaW5ldC50ZXN0KHtcbiAgbmFtZTogXCJBZGQgZnVuZHMgdG8gY292ZXIgZmxvd1wiLFxuICBhc3luYyBmbihjaGFpbjogQ2hhaW4sIGFjY291bnRzOiBNYXA8c3RyaW5nLCBBY2NvdW50Pikge1xuICAgIGxldCBkZXBsb3llcldhbGxldCA9IGFjY291bnRzLmdldChcImRlcGxveWVyXCIpIGFzIEFjY291bnQ7XG4gICAgbGV0IExQXzEgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfMVwiKSBhcyBBY2NvdW50OyAvLyBMUF8xXG4gICAgbGV0IExQXzIgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfMlwiKSBhcyBBY2NvdW50OyAvLyBMUF8yXG4gICAgbGV0IExQXzMgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfM1wiKSBhcyBBY2NvdW50OyAvLyBMUF8zXG4gICAgbGV0IExQXzQgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfNFwiKSBhcyBBY2NvdW50OyAvLyBMUF80XG4gICAgbGV0IGNvdmVyXzEgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfNVwiKSBhcyBBY2NvdW50OyAvLyBDb3Zlcl8xXG4gICAgbGV0IGNvdmVyXzIgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfNlwiKSBhcyBBY2NvdW50OyAvLyBDb3Zlcl8yXG4gICAgbGV0IGRlbGVnYXRlXzEgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfN1wiKSBhcyBBY2NvdW50OyAvLyBEZWxlZ2F0ZV8xXG4gICAgbGV0IGRlbGVnYXRlXzIgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfOFwiKSBhcyBBY2NvdW50OyAvLyBEZWxlZ2F0ZV8yXG4gICAgbGV0IGRlbGVnYXRlXzMgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfOVwiKSBhcyBBY2NvdW50OyAvLyBEZWxlZ2F0ZV8zXG4gICAgbGV0IGRlbGVnYXRlXzQgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfMTBcIikgYXMgQWNjb3VudDsgLy8gRGVsZWdhdGVfNFxuICAgIGxldCBib3Jyb3dlcl8xID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzExXCIpIGFzIEFjY291bnQ7IC8vIGJvcnJvd2VyXzFcbiAgICBsZXQgYm9ycm93ZXJfMiA9IGFjY291bnRzLmdldChcIndhbGxldF8xMlwiKSBhcyBBY2NvdW50OyAvLyBib3Jyb3dlcl8yXG4gICAgbGV0IGJvcnJvd2VyXzMgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfMTNcIikgYXMgQWNjb3VudDsgLy8gYm9ycm93ZXJfMlxuICAgIGxldCBjb3Zlcl9wcm92aWRlcl8xID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzE0XCIpIGFzIEFjY291bnQ7IC8vIGNvdmVyX3Byb3ZpZGVyXzFcbiAgICBsZXQgY292ZXJfcHJvdmlkZXJfMiA9IGFjY291bnRzLmdldChcIndhbGxldF8xNVwiKSBhcyBBY2NvdW50OyAvLyBjb3Zlcl9wcm92aWRlcl8yXG5cbiAgICBsZXQgYXNzZXRNYXBzID0gY2hhaW4uZ2V0QXNzZXRzTWFwcygpO1xuICAgIGxldCBwb29sID0gbmV3IFBvb2woY2hhaW4sIGRlcGxveWVyV2FsbGV0KTtcbiAgICBsZXQgbG9hbiA9IG5ldyBMb2FuKGNoYWluLCBkZXBsb3llcldhbGxldCk7XG4gICAgbGV0IGNvdmVyUG9vbCA9IG5ldyBDb3ZlclBvb2woY2hhaW4sIGRlcGxveWVyV2FsbGV0KTtcbiAgICBsZXQgTHBUb2tlbiA9IG5ldyBMUFRva2VuKGNoYWluLCBkZXBsb3llcldhbGxldCk7XG4gICAgbGV0IENwVG9rZW4gPSBuZXcgQ1BUb2tlbihjaGFpbiwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIGxldCBsdiAgPSBuZXcgTGlxdWlkaXR5VmF1bHQoY2hhaW4sIExJUVVJRElUWV9WQVVMVCwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIGxldCBmdiAgPSBuZXcgTGlxdWlkaXR5VmF1bHQoY2hhaW4sIEZVTkRJTkdfVkFVTFQsIGRlcGxveWVyV2FsbGV0KTtcblxuICAgIGNvbnN0IHBvb2xJZDAgPSAwO1xuXG4gICAgLy8gU3RhcnQgU2V0IHVwXG4gICAgbGV0IGJsb2NrID0gR2xvYmFscy5vbmJvYXJkVXNlckFkZHJlc3MoY2hhaW4sIGJvcnJvd2VyXzEuYWRkcmVzcywgUDJQS0hfVkVSU0lPTiwgSEFTSCwgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcyk7XG4gICAgYmxvY2sgPSBwb29sLmNyZWF0ZVBvb2woZGVsZWdhdGVfMS5hZGRyZXNzLExQX1RPS0VOLFpQX1RPS0VOLFBBWU1FTlQsUkVXQVJEU19DQUxDLDEwMDAsMTAwMCwxMF8wMDBfMDAwXzAwMCwxMF8wMDBfMDAwXzAwMCwxLE1BWF9NQVRVUklUWV9MRU5HVEgsTElRVUlESVRZX1ZBVUxULENQX1RPS0VOLENPVkVSX1ZBVUxULENQX1JFV0FSRFNfVE9LRU4sWEJUQyx0cnVlKTtcbiAgICBwb29sLmZpbmFsaXplUG9vbChkZWxlZ2F0ZV8xLmFkZHJlc3MsIExQX1RPS0VOLCBaUF9UT0tFTiwgQ1BfVE9LRU4sIDApO1xuICAgIGJsb2NrID0gcG9vbC5lbmFibGVDb3ZlcihMUF9UT0tFTiwgQ1BfVE9LRU4sIDAsIGRlbGVnYXRlXzEuYWRkcmVzcyk7XG4gICAgLy8gRW5kIFNldCB1cFxuXG4gICAgLy8gU3RhcnQgRmxvd1xuICAgIC8vIENPVkVSIFBPT0wgSEFTIEEgTElNSVQgT0YgMTBfMDAwXzAwMF8wMDBcbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbXG4gICAgICBUeC5jb250cmFjdENhbGwoXG4gICAgICAgICdjb3Zlci1wb29sLXYxLTAnLFxuICAgICAgICAnc2VuZC1mdW5kcycsXG4gICAgICAgIFtcbiAgICAgICAgICB0eXBlcy5wcmluY2lwYWwoYCR7ZGVwbG95ZXJXYWxsZXQuYWRkcmVzc30uY3AtdG9rZW5gKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ292ZXIgcG9vbCBjb250cmFjdCB0byBhY2NvdW50IGZvciBaZXN0IHJld2FyZHNcbiAgICAgICAgICB0eXBlcy5wcmluY2lwYWwoYCR7ZGVwbG95ZXJXYWxsZXQuYWRkcmVzc30uY292ZXItdmF1bHRgKSwgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ292ZXIgVmF1bHQgY29udHJhY3QgdG8gaG9sZCB0aGUgZnVuZHMgb2YgdGhlIGNvdmVyIHBvb2xcbiAgICAgICAgICB0eXBlcy5wcmluY2lwYWwoYCR7ZGVwbG95ZXJXYWxsZXQuYWRkcmVzc30uY3AtcmV3YXJkcy10b2tlbmApLCAgICAgICAgICAgICAgICAgICAgLy8gQ29udHJhY3QgdG8gYWNjb3VudCBmb3IgeEJUQyByZXdhcmRzIHRvIGNvdmVyIHBvb2wgcHJvdmlkZXJzXG4gICAgICAgICAgdHlwZXMucHJpbmNpcGFsKGAke2RlcGxveWVyV2FsbGV0LmFkZHJlc3N9LldyYXBwZWQtQml0Y29pbmApLCAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBhc3NldCB1c2VkIGZvciBsb2FucyBpbiB0aGUgcG9vbFxuICAgICAgICAgIHR5cGVzLnVpbnQocG9vbElkMCksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQb29sIElEXG4gICAgICAgICAgdHlwZXMudWludCg2XzAwMF8wMDBfMDAwbiksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFtb3VudCBjb21taXRlZCB0byB0aGUgcG9vbCBieSB0aGUgY292ZXIgcHJvdmlkZXJcbiAgICAgICAgICB0eXBlcy51aW50KDEpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbnVtYmVyIG9mIGN5Y2xlcyBjb21taXR0ZWRcbiAgICAgICAgICB0eXBlcy5wcmluY2lwYWwoYCR7ZGVwbG95ZXJXYWxsZXQuYWRkcmVzc30ucmV3YXJkcy1jYWxjYCksICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udHJhY3QgY29udGFpbmluZyB0aGUgbG9naWMgb2YgaG93IFplc3QgcmV3YXJkcyBhcmUgY2FsY3VsYXRlZC5cbiAgICAgICAgICB0eXBlcy5wcmluY2lwYWwoY292ZXJfcHJvdmlkZXJfMS5hZGRyZXNzKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkcmVzcyBvZiB0aGUgdXNlciBzZW5kaW5nIHRoZSBmdW5kcyAodGhlIGNhbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgICAgIF0sXG4gICAgICAgIGNvdmVyX3Byb3ZpZGVyXzEuYWRkcmVzc1xuICAgICAgKVxuICAgIF0pO1xuICB9LFxufSk7XG5cbkNsYXJpbmV0LnRlc3Qoe1xuICBuYW1lOiBcIldpdGhkcmF3IGZ1bmRzIGZyb20gY292ZXIgcG9vbCBmbG93XCIsXG4gIGFzeW5jIGZuKGNoYWluOiBDaGFpbiwgYWNjb3VudHM6IE1hcDxzdHJpbmcsIEFjY291bnQ+KSB7XG4gICAgbGV0IGRlcGxveWVyV2FsbGV0ID0gYWNjb3VudHMuZ2V0KFwiZGVwbG95ZXJcIikgYXMgQWNjb3VudDtcbiAgICBsZXQgTFBfMSA9IGFjY291bnRzLmdldChcIndhbGxldF8xXCIpIGFzIEFjY291bnQ7IC8vIExQXzFcbiAgICBsZXQgTFBfMiA9IGFjY291bnRzLmdldChcIndhbGxldF8yXCIpIGFzIEFjY291bnQ7IC8vIExQXzJcbiAgICBsZXQgTFBfMyA9IGFjY291bnRzLmdldChcIndhbGxldF8zXCIpIGFzIEFjY291bnQ7IC8vIExQXzNcbiAgICBsZXQgTFBfNCA9IGFjY291bnRzLmdldChcIndhbGxldF80XCIpIGFzIEFjY291bnQ7IC8vIExQXzRcbiAgICBsZXQgY292ZXJfMSA9IGFjY291bnRzLmdldChcIndhbGxldF81XCIpIGFzIEFjY291bnQ7IC8vIENvdmVyXzFcbiAgICBsZXQgY292ZXJfMiA9IGFjY291bnRzLmdldChcIndhbGxldF82XCIpIGFzIEFjY291bnQ7IC8vIENvdmVyXzJcbiAgICBsZXQgZGVsZWdhdGVfMSA9IGFjY291bnRzLmdldChcIndhbGxldF83XCIpIGFzIEFjY291bnQ7IC8vIERlbGVnYXRlXzFcbiAgICBsZXQgZGVsZWdhdGVfMiA9IGFjY291bnRzLmdldChcIndhbGxldF84XCIpIGFzIEFjY291bnQ7IC8vIERlbGVnYXRlXzJcbiAgICBsZXQgZGVsZWdhdGVfMyA9IGFjY291bnRzLmdldChcIndhbGxldF85XCIpIGFzIEFjY291bnQ7IC8vIERlbGVnYXRlXzNcbiAgICBsZXQgZGVsZWdhdGVfNCA9IGFjY291bnRzLmdldChcIndhbGxldF8xMFwiKSBhcyBBY2NvdW50OyAvLyBEZWxlZ2F0ZV80XG4gICAgbGV0IGJvcnJvd2VyXzEgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfMTFcIikgYXMgQWNjb3VudDsgLy8gYm9ycm93ZXJfMVxuICAgIGxldCBib3Jyb3dlcl8yID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzEyXCIpIGFzIEFjY291bnQ7IC8vIGJvcnJvd2VyXzJcbiAgICBsZXQgYm9ycm93ZXJfMyA9IGFjY291bnRzLmdldChcIndhbGxldF8xM1wiKSBhcyBBY2NvdW50OyAvLyBib3Jyb3dlcl8yXG4gICAgbGV0IGNvdmVyX3Byb3ZpZGVyXzEgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfMTRcIikgYXMgQWNjb3VudDsgLy8gY292ZXJfcHJvdmlkZXJfMVxuICAgIGxldCBjb3Zlcl9wcm92aWRlcl8yID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzE1XCIpIGFzIEFjY291bnQ7IC8vIGNvdmVyX3Byb3ZpZGVyXzJcblxuICAgIGxldCBhc3NldE1hcHMgPSBjaGFpbi5nZXRBc3NldHNNYXBzKCk7XG4gICAgbGV0IHBvb2wgPSBuZXcgUG9vbChjaGFpbiwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIGxldCBsb2FuID0gbmV3IExvYW4oY2hhaW4sIGRlcGxveWVyV2FsbGV0KTtcbiAgICBsZXQgY292ZXJQb29sID0gbmV3IENvdmVyUG9vbChjaGFpbiwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIGxldCBMcFRva2VuID0gbmV3IExQVG9rZW4oY2hhaW4sIGRlcGxveWVyV2FsbGV0KTtcbiAgICBsZXQgQ3BUb2tlbiA9IG5ldyBDUFRva2VuKGNoYWluLCBkZXBsb3llcldhbGxldCk7XG4gICAgbGV0IGx2ICA9IG5ldyBMaXF1aWRpdHlWYXVsdChjaGFpbiwgTElRVUlESVRZX1ZBVUxULCBkZXBsb3llcldhbGxldCk7XG4gICAgbGV0IGZ2ICA9IG5ldyBMaXF1aWRpdHlWYXVsdChjaGFpbiwgRlVORElOR19WQVVMVCwgZGVwbG95ZXJXYWxsZXQpO1xuXG4gICAgY29uc3QgcG9vbElkMCA9IDA7XG4gICAgY29uc3QgY29tbWl0bWVudFRpbWUgPSAxO1xuICAgIGNvbnN0IGFtb3VudENvbW1pdHRlZCA9IDZfMDAwXzAwMF8wMDBuO1xuXG4gICAgLy8gU3RhcnQgU2V0IHVwXG4gICAgbGV0IGJsb2NrID0gR2xvYmFscy5vbmJvYXJkVXNlckFkZHJlc3MoY2hhaW4sIGJvcnJvd2VyXzEuYWRkcmVzcywgUDJQS0hfVkVSU0lPTiwgSEFTSCwgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcyk7XG4gICAgYmxvY2sgPSBwb29sLmNyZWF0ZVBvb2woZGVsZWdhdGVfMS5hZGRyZXNzLExQX1RPS0VOLFpQX1RPS0VOLFBBWU1FTlQsUkVXQVJEU19DQUxDLDEwMDAsMTAwMCwxMF8wMDBfMDAwXzAwMCwxMF8wMDBfMDAwXzAwMCwxLE1BWF9NQVRVUklUWV9MRU5HVEgsTElRVUlESVRZX1ZBVUxULENQX1RPS0VOLENPVkVSX1ZBVUxULENQX1JFV0FSRFNfVE9LRU4sWEJUQyx0cnVlKTtcbiAgICBwb29sLmZpbmFsaXplUG9vbChkZWxlZ2F0ZV8xLmFkZHJlc3MsIExQX1RPS0VOLCBaUF9UT0tFTiwgQ1BfVE9LRU4sIDApO1xuICAgIGJsb2NrID0gcG9vbC5lbmFibGVDb3ZlcihMUF9UT0tFTiwgQ1BfVE9LRU4sIDAsIGRlbGVnYXRlXzEuYWRkcmVzcyk7XG4gICAgXG5cbiAgICBibG9jayA9IGNvdmVyUG9vbC5zZW5kRnVuZHMoQ1BfVE9LRU4sQ09WRVJfVkFVTFQsQ1BfUkVXQVJEU19UT0tFTixYQlRDLCBwb29sSWQwLCBhbW91bnRDb21taXR0ZWQsIGNvbW1pdG1lbnRUaW1lLCBSRVdBUkRTX0NBTEMsIGNvdmVyX3Byb3ZpZGVyXzEuYWRkcmVzcyk7XG5cbiAgICBsZXQgcmVzdWx0ID0gY292ZXJQb29sLmdldFBvb2wocG9vbElkMCk7XG4gICAgLy8gV2UgaGF2ZSB0byB3YWl0IHVudGlsIHRoZSB0aW1lIGNvbW1pdHRlZCBoYXMgcGFzc2VkXG4gICAgbGV0IGNvbW1pdG1lbnRCbG9ja1RpbWUgPSBjb25zdW1lVWludChyZXN1bHRbXCJjeWNsZS1sZW5ndGhcIl0pICogY29tbWl0bWVudFRpbWU7XG4gICAgY2hhaW4ubWluZUVtcHR5QmxvY2soY29tbWl0bWVudEJsb2NrVGltZSk7XG4gICAgLy8gRW5kIFNldCB1cFxuXG4gICAgLy8gRmxvdyBTdGFydHMgaGVyZVxuICAgIC8vIFNpZ25hbCB0aGF0IHdlIHdhbnQgdG8gc3RhcnQgYSB3aXRoZHJhd2FsXG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soW1xuICAgICAgVHguY29udHJhY3RDYWxsKFxuICAgICAgICAnY292ZXItcG9vbC12MS0wJyxcbiAgICAgICAgJ3NpZ25hbC13aXRoZHJhd2FsJyxcbiAgICAgICAgW1xuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChgJHtkZXBsb3llcldhbGxldC5hZGRyZXNzfS5jcC10b2tlbmApLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3ZlciBwb29sIGNvbnRyYWN0IHRvIGFjY291bnQgZm9yIFplc3QgcmV3YXJkc1xuICAgICAgICAgIHR5cGVzLnVpbnQocG9vbElkMCksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQb29sIElEXG4gICAgICAgICAgdHlwZXMudWludChhbW91bnRDb21taXR0ZWQpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFtb3VudCB0aGF0IHRoZSBjb3ZlciBwb29sIHByb3ZpZGVyIHdpc2hlcyB0byB3aXRoZHJhd1xuICAgICAgICBdLFxuICAgICAgICBjb3Zlcl9wcm92aWRlcl8xLmFkZHJlc3NcbiAgICAgIClcbiAgICBdKTtcblxuICAgIC8vIEdldCB0aW1lIGZvciBzdGFrZXIgY29vbGRvd24gcGVyaW9kIHRpbWVcbiAgICBsZXQgZ2xvYmFscyA9IEdsb2JhbHMuZ2V0R2xvYmFscyhjaGFpbiwgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcykuZXhwZWN0VHVwbGUoKTtcbiAgICBsZXQgc3Rha2VyQ29vbGRvd25QZXJpb2QgPSAoY29uc3VtZVVpbnQoZ2xvYmFsc1tcInN0YWtlci1jb29sZG93bi1wZXJpb2RcIl0pKTtcblxuICAgIC8vIHdhaXQgdW50aWwgdGltZSBoYXMgcGFzc2VkLlxuICAgIGNoYWluLm1pbmVFbXB0eUJsb2NrKHN0YWtlckNvb2xkb3duUGVyaW9kKTtcblxuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFtcbiAgICAgIFR4LmNvbnRyYWN0Q2FsbChcbiAgICAgICAgJ2NvdmVyLXBvb2wtdjEtMCcsXG4gICAgICAgICd3aXRoZHJhdycsXG4gICAgICAgIFtcbiAgICAgICAgICB0eXBlcy5wcmluY2lwYWwoYCR7ZGVwbG95ZXJXYWxsZXQuYWRkcmVzc30uY3AtdG9rZW5gKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ292ZXIgcG9vbCBjb250cmFjdCB0byBhY2NvdW50IGZvciBaZXN0IHJld2FyZHNcbiAgICAgICAgICB0eXBlcy5wcmluY2lwYWwoYCR7ZGVwbG95ZXJXYWxsZXQuYWRkcmVzc30uY3AtcmV3YXJkcy10b2tlbmApLCAgICAgICAgICAgICAgICAgICAgLy8gQ29udHJhY3QgdG8gYWNjb3VudCBmb3IgeEJUQyByZXdhcmRzIHRvIGNvdmVyIHBvb2wgcHJvdmlkZXJzXG4gICAgICAgICAgdHlwZXMucHJpbmNpcGFsKGAke2RlcGxveWVyV2FsbGV0LmFkZHJlc3N9LldyYXBwZWQtQml0Y29pbmApLCAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBhc3NldCB1c2VkIGZvciBsb2FucyBpbiB0aGUgcG9vbFxuICAgICAgICAgIHR5cGVzLnVpbnQocG9vbElkMCksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQb29sIElEXG4gICAgICAgICAgdHlwZXMudWludChhbW91bnRDb21taXR0ZWQpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFtb3VudCB0aGF0IHRoZSBjYWxsZXIgd2lsbCB3aXRoZHJhd1xuICAgICAgICAgIHR5cGVzLnByaW5jaXBhbChgJHtkZXBsb3llcldhbGxldC5hZGRyZXNzfS5jb3Zlci12YXVsdGApLCAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3ZlciBWYXVsdCBjb250cmFjdCB0byBob2xkIHRoZSBmdW5kcyBvZiB0aGUgY292ZXIgcG9vbFxuICAgICAgICBdLFxuICAgICAgICBjb3Zlcl9wcm92aWRlcl8xLmFkZHJlc3NcbiAgICAgIClcbiAgICBdKTtcbiAgICBibG9jay5yZWNlaXB0c1swXS5yZXN1bHQuZXhwZWN0T2soKTtcbiAgfSxcbn0pO1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHdCQUF3QjtBQUN4QixTQUFTLFFBQVEsRUFBRSxFQUFFLEVBQWtCLEtBQUssUUFBUSw4Q0FBOEMsQ0FBQztBQUVuRyxTQUFTLElBQUksUUFBUSwrQkFBK0IsQ0FBQztBQUNyRCxTQUFTLFNBQVMsUUFBUSxxQ0FBcUMsQ0FBQztBQUNoRSxTQUFTLElBQUksUUFBUSwrQkFBK0IsQ0FBQztBQUNyRCxTQUFTLE9BQU8sUUFBUSw4QkFBOEIsQ0FBQztBQUN2RCxTQUFTLE9BQU8sUUFBUSw4QkFBOEIsQ0FBQztBQUl2RCxTQUFTLE9BQU8sUUFBUSw2QkFBNkIsQ0FBQztBQUV0RCxTQUFTLGNBQWMsUUFBUSxxQ0FBcUMsQ0FBQztBQXFCckUsU0FTRSxXQUFXLFFBTU4sNEJBQTRCLENBQUM7QUFFcEMsU0FDRSxRQUFRLEVBQ1IsUUFBUSxFQUNSLE9BQU8sRUFDUCxZQUFZLEVBQ1osZUFBZSxFQUNmLFFBQVEsRUFDUixJQUFJLEVBRUosYUFBYSxFQUNiLGFBQWEsRUFDYixJQUFJLEVBS0osT0FBTyxFQUNQLGFBQWEsRUFFYixnQkFBZ0IsRUFDaEIsV0FBVyxRQUdOLGNBQWMsQ0FBQztBQUd0QixNQUFNLG1CQUFtQixHQUFHLE9BQU8sR0FBRyxhQUFhLEdBQUcsQ0FBQyxBQUFDLEVBQUMsVUFBVTtBQUVuRSxRQUFRLENBQUMsSUFBSSxDQUFDO0lBQ1osSUFBSSxFQUFFLHlCQUF5QjtJQUMvQixNQUFNLEVBQUUsRUFBQyxLQUFZLEVBQUUsUUFBOEIsRUFBRTtRQUNyRCxJQUFJLGNBQWMsR0FBRyxRQUFRLENBQUMsR0FBRyxD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