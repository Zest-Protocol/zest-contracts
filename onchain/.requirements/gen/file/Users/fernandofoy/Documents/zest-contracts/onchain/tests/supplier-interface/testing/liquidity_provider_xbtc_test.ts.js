// deno-lint-ignore-file
import { Clarinet } from 'https://deno.land/x/clarinet@v1.0.3/index.ts';
import { assertEquals } from 'https://deno.land/std@0.159.0/testing/asserts.ts';
import { Pool } from '../../interfaces/pool-v1-0.ts';
import { CoverPool } from '../../interfaces/cover-pool-v1-0.ts';
import { Loan } from '../../interfaces/loan-v1-0.ts';
import { Globals } from '../../interfaces/globals.ts';
import { SupplierInterface } from '../../interfaces/supplier_interface.ts';
import { consumeUint } from '../../interfaces/common.ts';
import { LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, LIQUIDITY_VAULT, CP_TOKEN, XBTC, COLL_VAULT, FUNDING_VAULT, P2PKH_VERSION, HASH, ERRORS, CP_REWARDS_TOKEN, SWAP_ROUTER, COVER_VAULT, CYCLE_LENGTH } from "../config.ts";
const MAX_MATURITY_LENGTH = 144 * 365 * 3; // 3 years
Clarinet.test({
    name: "Liquidity providers can send xBTC and withdraw",
    async fn (chain, accounts) {
        let deployerWallet = accounts.get("deployer");
        let LP_1 = accounts.get("wallet_1"); // LP_1
        let LP_2 = accounts.get("wallet_2"); // LP_2
        let coverPoolProvider = accounts.get("wallet_3"); // Cover_1
        let delegate_1 = accounts.get("wallet_7"); // Delegate_1
        let borrower_1 = accounts.get("wallet_8"); // borrower_1
        let assetMaps = chain.getAssetsMaps();
        let pool = new Pool(chain, deployerWallet);
        let loan = new Loan(chain, deployerWallet);
        let coverPool = new CoverPool(chain, deployerWallet);
        // Pool is created by Deployer. Pool Delegate is assigned.
        pool.createPool(delegate_1.address, LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, 1000, 1000, 10_000_000_000, 10_000_000_000, 1, MAX_MATURITY_LENGTH, LIQUIDITY_VAULT, CP_TOKEN, COVER_VAULT, CP_REWARDS_TOKEN, XBTC, true);
        // Cover Pool Provider sends funds to the cover pool of Pool 0.
        pool.finalizePool(delegate_1.address, LP_TOKEN, ZP_TOKEN, CP_TOKEN, 0);
        let block = Globals.setcontingencyPlan(chain, true, deployerWallet.address);
        block = chain.mineBlock([
            SupplierInterface.sendFundsXBTC(1, LP_TOKEN, 0, ZP_TOKEN, LIQUIDITY_VAULT, XBTC, 100_000_000, REWARDS_CALC, LP_1.address)
        ]);
        let globals = Globals.getGlobals(chain, deployerWallet.address).expectTuple();
        let cooldownTime = consumeUint(globals["lp-cooldown-period"]);
        let unstakeWindow = consumeUint(globals["lp-unstake-window"]);
        block = pool.signalWithdrawal(LP_TOKEN, 0, 100_000_000, LP_1.address);
        chain.mineEmptyBlock(cooldownTime - 11);
        // lockup period in progress even after cooldown period
        block = chain.mineBlock([
            SupplierInterface.withdrawXBTC(100_000_000, LP_TOKEN, ZP_TOKEN, 0, LIQUIDITY_VAULT, XBTC, LP_1.address)
        ]);
        block.receipts[0].result.expectErr().expectUint(ERRORS.ERR_FUNDS_LOCKED);
        // wait arbitraririly large number
        chain.mineEmptyBlock(cooldownTime * 2);
        block = chain.mineBlock([
            SupplierInterface.withdrawXBTC(100_000_000, LP_TOKEN, ZP_TOKEN, 0, LIQUIDITY_VAULT, XBTC, LP_1.address)
        ]);
        block.receipts[0].result.expectErr().expectUint(ERRORS.ERR_UNSTAKE_WINDOW_EXPIRED);
        pool.signalWithdrawal(LP_TOKEN, 0, 100_000_000, LP_1.address);
        chain.mineEmptyBlock(cooldownTime);
        block = chain.mineBlock([
            SupplierInterface.withdrawXBTC(100_000_000, LP_TOKEN, ZP_TOKEN, 0, LIQUIDITY_VAULT, XBTC, LP_1.address)
        ]);
        block.receipts[0].result.expectOk();
        assertEquals(chain.getAssetsMaps().assets[".Wrapped-Bitcoin.wrapped-bitcoin"][LP_1.address], 100_000_000_000_000);
    }
});
Clarinet.test({
    name: "Liquidity providers can send xBTC, but withdrawal is blocked when lockup is still ongoing",
    async fn (chain, accounts) {
        let deployerWallet = accounts.get("deployer");
        let LP_1 = accounts.get("wallet_1"); // LP_1
        let LP_2 = accounts.get("wallet_2"); // LP_2
        let coverPoolProvider = accounts.get("wallet_3"); // Cover_1
        let delegate_1 = accounts.get("wallet_7"); // Delegate_1
        let borrower_1 = accounts.get("wallet_8"); // borrower_1
        let assetMaps = chain.getAssetsMaps();
        let pool = new Pool(chain, deployerWallet);
        let loan = new Loan(chain, deployerWallet);
        let coverPool = new CoverPool(chain, deployerWallet);
        // Pool is created by Deployer. Pool Delegate is assigned.
        let block = pool.createPool(delegate_1.address, LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, 1000, 1000, 10_000_000_000, 10_000_000_000, 6, MAX_MATURITY_LENGTH, LIQUIDITY_VAULT, CP_TOKEN, COVER_VAULT, CP_REWARDS_TOKEN, XBTC, true);
        // Cover Pool Provider sends funds to the cover pool of Pool 0.
        block = pool.finalizePool(delegate_1.address, LP_TOKEN, ZP_TOKEN, CP_TOKEN, 0);
        block = Globals.setcontingencyPlan(chain, true, deployerWallet.address);
        block = chain.mineBlock([
            SupplierInterface.sendFundsXBTC(6, LP_TOKEN, 0, ZP_TOKEN, LIQUIDITY_VAULT, XBTC, 100_000_000, REWARDS_CALC, LP_1.address)
        ]);
        let globals = Globals.getGlobals(chain, deployerWallet.address).expectTuple();
        let cooldownTime = consumeUint(globals["lp-cooldown-period"]);
        let unstakeWindow = consumeUint(globals["lp-unstake-window"]);
        block = pool.signalWithdrawal(LP_TOKEN, 0, 100_000_000, LP_1.address);
        // wait a cycle length
        chain.mineEmptyBlock(CYCLE_LENGTH);
        block = chain.mineBlock([
            SupplierInterface.withdrawXBTC(100_000_000, LP_TOKEN, ZP_TOKEN, 0, LIQUIDITY_VAULT, XBTC, LP_1.address)
        ]);
        block.receipts[0].result.expectErr().expectUint(ERRORS.ERR_UNSTAKE_WINDOW_EXPIRED);
        pool.signalWithdrawal(LP_TOKEN, 0, 100_000_000, LP_1.address);
        // wait a cooldown cycle
        chain.mineEmptyBlock(cooldownTime);
        block = chain.mineBlock([
            SupplierInterface.withdrawXBTC(100_000_000, LP_TOKEN, ZP_TOKEN, 0, LIQUIDITY_VAULT, XBTC, LP_1.address)
        ]);
        block.receipts[0].result.expectErr().expectUint(ERRORS.ERR_FUNDS_LOCKED);
        // nothing moved
        assertEquals(chain.getAssetsMaps().assets[".Wrapped-Bitcoin.wrapped-bitcoin"][LP_1.address], 100_000_000_000_000 - 100_000_000);
        // wait the remaining commitment time minus the passed time and a cooldown period ahead of time
        chain.mineEmptyBlock(CYCLE_LENGTH * 5 - 2 * cooldownTime);
        pool.signalWithdrawal(LP_TOKEN, 0, 100_000_000, LP_1.address);
        chain.mineEmptyBlock(cooldownTime);
        block = chain.mineBlock([
            SupplierInterface.withdrawXBTC(100_000_000, LP_TOKEN, ZP_TOKEN, 0, LIQUIDITY_VAULT, XBTC, LP_1.address)
        ]);
        // funds moved to LP_1
        assertEquals(chain.getAssetsMaps().assets[".Wrapped-Bitcoin.wrapped-bitcoin"][LP_1.address], 100_000_000_000_000);
    }
});
Clarinet.test({
    name: "Borrower can drawdown funds in pool using xBTC",
    async fn (chain, accounts) {
        let deployerWallet = accounts.get("deployer");
        let LP_1 = accounts.get("wallet_1"); // LP_1
        let delegate_1 = accounts.get("wallet_7"); // Delegate_1
        let borrower_1 = accounts.get("wallet_8"); // borrower_1
        let assetMaps = chain.getAssetsMaps();
        let pool = new Pool(chain, deployerWallet);
        let loan = new Loan(chain, deployerWallet);
        let block = Globals.onboardUserAddress(chain, borrower_1.address, P2PKH_VERSION, HASH, deployerWallet.address);
        let amountBegin = chain.getAssetsMaps().assets[".Wrapped-Bitcoin.wrapped-bitcoin"]["ST3NBRSFKX28FQ2ZJ1MAKX58HKHSDGNV5N7R21XCP"];
        pool.createPool(delegate_1.address, LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, 1000, 1000, 10_000_000_000, 10_000_000_000, 1, MAX_MATURITY_LENGTH, LIQUIDITY_VAULT, CP_TOKEN, COVER_VAULT, CP_REWARDS_TOKEN, XBTC, true);
        pool.finalizePool(delegate_1.address, LP_TOKEN, ZP_TOKEN, CP_TOKEN, 0);
        block = Globals.setcontingencyPlan(chain, true, deployerWallet.address);
        block = chain.mineBlock([
            SupplierInterface.sendFundsXBTC(1, LP_TOKEN, 0, ZP_TOKEN, LIQUIDITY_VAULT, XBTC, 100_000_000, REWARDS_CALC, LP_1.address)
        ]);
        const LOAN_AMOUNT = 100_000_000;
        block = pool.createLoan(LP_TOKEN, 0, LOAN_AMOUNT, XBTC, 0, XBTC, 300, 12960, 1440, COLL_VAULT, FUNDING_VAULT, borrower_1.address);
        pool.fundLoan(0, LP_TOKEN, 0, LIQUIDITY_VAULT, FUNDING_VAULT, XBTC, delegate_1.address);
        chain.mineBlock([
            SupplierInterface.updateLiquidity(chain.blockHeight, 100_000_000, deployerWallet.address)
        ]);
        block = chain.mineBlock([
            SupplierInterface.drawdownXBTC(0, LP_TOKEN, 0, XBTC, COLL_VAULT, FUNDING_VAULT, SWAP_ROUTER, XBTC, borrower_1.address)
        ]);
        let amountSent = consumeUint(block.receipts[0].result.expectOk().expectTuple().sats);
        assertEquals(chain.getAssetsMaps().assets[".Wrapped-Bitcoin.wrapped-bitcoin"]["ST3NBRSFKX28FQ2ZJ1MAKX58HKHSDGNV5N7R21XCP"], amountBegin + amountSent);
    }
});
Clarinet.test({
    name: "Borrower cannot drawdown funds in pool using xBTC if contingency plan activated and then deactivated",
    async fn (chain, accounts) {
        let deployerWallet = accounts.get("deployer");
        let LP_1 = accounts.get("wallet_1"); // LP_1
        let delegate_1 = accounts.get("wallet_7"); // Delegate_1
        let borrower_1 = accounts.get("wallet_8"); // borrower_1
        let assetMaps = chain.getAssetsMaps();
        let pool = new Pool(chain, deployerWallet);
        let loan = new Loan(chain, deployerWallet);
        let block = Globals.onboardUserAddress(chain, borrower_1.address, P2PKH_VERSION, HASH, deployerWallet.address);
        let amountBegin = chain.getAssetsMaps().assets[".Wrapped-Bitcoin.wrapped-bitcoin"]["ST3NBRSFKX28FQ2ZJ1MAKX58HKHSDGNV5N7R21XCP"];
        pool.createPool(delegate_1.address, LP_TOKEN, ZP_TOKEN, PAYMENT, REWARDS_CALC, 1000, 1000, 10_000_000_000, 10_000_000_000, 1, MAX_MATURITY_LENGTH, LIQUIDITY_VAULT, CP_TOKEN, COVER_VAULT, CP_REWARDS_TOKEN, XBTC, true);
        pool.finalizePool(delegate_1.address, LP_TOKEN, ZP_TOKEN, CP_TOKEN, 0);
        block = chain.mineBlock([
            SupplierInterface.sendFundsXBTC(1, LP_TOKEN, 0, ZP_TOKEN, LIQUIDITY_VAULT, XBTC, 100_000_000, REWARDS_CALC, LP_1.address)
        ]);
        block.receipts[0].result.expectErr();
        block = Globals.setcontingencyPlan(chain, true, deployerWallet.address);
        block = chain.mineBlock([
            SupplierInterface.sendFundsXBTC(1, LP_TOKEN, 0, ZP_TOKEN, LIQUIDITY_VAULT, XBTC, 100_000_000, REWARDS_CALC, LP_1.address)
        ]);
        block.receipts[0].result.expectOk();
        const LOAN_AMOUNT = 100_000_000;
        block = pool.createLoan(LP_TOKEN, 0, LOAN_AMOUNT, XBTC, 0, XBTC, 300, 12960, 1440, COLL_VAULT, FUNDING_VAULT, borrower_1.address);
        pool.fundLoan(0, LP_TOKEN, 0, LIQUIDITY_VAULT, FUNDING_VAULT, XBTC, delegate_1.address);
        chain.mineBlock([
            SupplierInterface.updateLiquidity(chain.blockHeight, 100_000_000, deployerWallet.address)
        ]);
        block = Globals.setcontingencyPlan(chain, false, deployerWallet.address);
        block = chain.mineBlock([
            SupplierInterface.drawdownXBTC(0, LP_TOKEN, 0, XBTC, COLL_VAULT, FUNDING_VAULT, SWAP_ROUTER, XBTC, borrower_1.address)
        ]);
        block.receipts[0].result.expectErr();
        block = Globals.setcontingencyPlan(chain, true, deployerWallet.address);
        block = chain.mineBlock([
            SupplierInterface.drawdownXBTC(0, LP_TOKEN, 0, XBTC, COLL_VAULT, FUNDING_VAULT, SWAP_ROUTER, XBTC, borrower_1.address)
        ]);
        block.receipts[0].result.expectOk();
        let amountSent = consumeUint(block.receipts[0].result.expectOk().expectTuple().sats);
        assertEquals(chain.getAssetsMaps().assets[".Wrapped-Bitcoin.wrapped-bitcoin"]["ST3NBRSFKX28FQ2ZJ1MAKX58HKHSDGNV5N7R21XCP"], amountBegin + amountSent);
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvZmVybmFuZG9mb3kvRG9jdW1lbnRzL3plc3QtY29udHJhY3RzL29uY2hhaW4vdGVzdHMvc3VwcGxpZXItaW50ZXJmYWNlL3Rlc3RpbmcvbGlxdWlkaXR5X3Byb3ZpZGVyX3hidGNfdGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBkZW5vLWxpbnQtaWdub3JlLWZpbGVcbmltcG9ydCB7IENsYXJpbmV0LCBUeCwgQ2hhaW4sIEFjY291bnQsIHR5cGVzIH0gZnJvbSAnaHR0cHM6Ly9kZW5vLmxhbmQveC9jbGFyaW5ldEB2MS4wLjMvaW5kZXgudHMnO1xuaW1wb3J0IHsgYXNzZXJ0RXF1YWxzLCBhc3NlcnQgfSBmcm9tICdodHRwczovL2Rlbm8ubGFuZC9zdGRAMC4xNTkuMC90ZXN0aW5nL2Fzc2VydHMudHMnO1xuaW1wb3J0IHsgUG9vbCB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvcG9vbC12MS0wLnRzJztcbmltcG9ydCB7IENvdmVyUG9vbCB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvY292ZXItcG9vbC12MS0wLnRzJztcbmltcG9ydCB7IExvYW4gfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL2xvYW4tdjEtMC50cyc7XG5pbXBvcnQgeyBMUFRva2VuIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9scC10b2tlbi50cyc7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTU5LjAvbm9kZS9idWZmZXIudHNcIjtcbmltcG9ydCB7IFRlc3RVdGlscyB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvdGVzdC11dGlscy50cyc7XG5pbXBvcnQgeyBHbG9iYWxzIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9nbG9iYWxzLnRzJztcbmltcG9ydCB7IFN1cHBsaWVySW50ZXJmYWNlIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9zdXBwbGllcl9pbnRlcmZhY2UudHMnO1xuaW1wb3J0IHsgXG4gIGdldEhhc2gsXG4gIGdldFJldmVyc2VUeElkLFxuICBnZXRUeElkLFxuICBnZXRFeHBpcmF0aW9uLFxuICBzd2FwcGVyQnVmZixcbiAgZ2VuZXJhdGVQMlBLSFR4XG59IGZyb20gXCIuLi91dGlsLnRzXCI7XG5cbmltcG9ydCB7XG4gIHNldENvbnRyYWN0T3duZXIsXG4gIGluaXRDb250cmFjdE93bmVycyxcbiAgYm9vdHN0cmFwQXBwcm92ZWRDb250cmFjdHMsXG4gIGFkZEFwcHJvdmVkQ29udHJhY3QsXG4gIHJ1bkJvb3RzdHJhcCxcbiAgYWRkQm9ycm93ZXIsXG4gIHNlbmRGdW5kc1AyU0hUeHMsXG4gIHJlZ2lzdGVyU3VwcGxpZXJUeHMsXG4gIGZpbmFsaXplT3V0Ym91bmRUeHMsXG4gIGNvbnN1bWVVaW50LFxuICBnZXRCUFxufSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL2NvbW1vbi50cyc7XG5cbmltcG9ydCB7XG4gIExQX1RPS0VOLFxuICBaUF9UT0tFTixcbiAgUEFZTUVOVCxcbiAgUkVXQVJEU19DQUxDLFxuICBMSVFVSURJVFlfVkFVTFQsXG4gIENQX1RPS0VOLFxuICBYQlRDLFxuICBDT0xMX1ZBVUxULFxuICBGVU5ESU5HX1ZBVUxULFxuICBQMlBLSF9WRVJTSU9OLFxuICBIQVNILFxuICByZWNpcGllbnQsXG4gIHNlbmRlcixcbiAgcHJlaW1hZ2UsXG4gIEVSUk9SUyxcbiAgT05FX0RBWSxcbiAgQ1BfUkVXQVJEU19UT0tFTixcbiAgU1dBUF9ST1VURVIsXG4gIENPVkVSX1ZBVUxULFxuICBDWUNMRV9MRU5HVEgsXG59IGZyb20gXCIuLi9jb25maWcudHNcIjtcblxuY29uc3QgTUFYX01BVFVSSVRZX0xFTkdUSCA9IDE0NCAqIDM2NSAqIDM7IC8vIDMgeWVhcnNcblxuQ2xhcmluZXQudGVzdCh7XG4gIG5hbWU6IFwiTGlxdWlkaXR5IHByb3ZpZGVycyBjYW4gc2VuZCB4QlRDIGFuZCB3aXRoZHJhd1wiLFxuICBhc3luYyBmbihjaGFpbjogQ2hhaW4sIGFjY291bnRzOiBNYXA8c3RyaW5nLCBBY2NvdW50Pikge1xuICAgIGxldCBkZXBsb3llcldhbGxldCA9IGFjY291bnRzLmdldChcImRlcGxveWVyXCIpIGFzIEFjY291bnQ7XG4gICAgbGV0IExQXzEgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfMVwiKSBhcyBBY2NvdW50OyAvLyBMUF8xXG4gICAgbGV0IExQXzIgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfMlwiKSBhcyBBY2NvdW50OyAvLyBMUF8yXG4gICAgbGV0IGNvdmVyUG9vbFByb3ZpZGVyID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzNcIikgYXMgQWNjb3VudDsgLy8gQ292ZXJfMVxuICAgIGxldCBkZWxlZ2F0ZV8xID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzdcIikgYXMgQWNjb3VudDsgLy8gRGVsZWdhdGVfMVxuICAgIGxldCBib3Jyb3dlcl8xID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzhcIikgYXMgQWNjb3VudDsgLy8gYm9ycm93ZXJfMVxuXG4gICAgbGV0IGFzc2V0TWFwcyA9IGNoYWluLmdldEFzc2V0c01hcHMoKTtcbiAgICBsZXQgcG9vbCA9IG5ldyBQb29sKGNoYWluLCBkZXBsb3llcldhbGxldCk7XG4gICAgbGV0IGxvYW4gPSBuZXcgTG9hbihjaGFpbiwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIGxldCBjb3ZlclBvb2wgPSBuZXcgQ292ZXJQb29sKGNoYWluLCBkZXBsb3llcldhbGxldCk7XG5cbiAgICAvLyBQb29sIGlzIGNyZWF0ZWQgYnkgRGVwbG95ZXIuIFBvb2wgRGVsZWdhdGUgaXMgYXNzaWduZWQuXG4gICAgcG9vbC5jcmVhdGVQb29sKGRlbGVnYXRlXzEuYWRkcmVzcyxMUF9UT0tFTixaUF9UT0tFTixQQVlNRU5ULFJFV0FSRFNfQ0FMQywxMDAwLDEwMDAsMTBfMDAwXzAwMF8wMDAsMTBfMDAwXzAwMF8wMDAsMSxNQVhfTUFUVVJJVFlfTEVOR1RILExJUVVJRElUWV9WQVVMVCxDUF9UT0tFTixDT1ZFUl9WQVVMVCxDUF9SRVdBUkRTX1RPS0VOLFhCVEMsdHJ1ZSk7XG4gICAgLy8gQ292ZXIgUG9vbCBQcm92aWRlciBzZW5kcyBmdW5kcyB0byB0aGUgY292ZXIgcG9vbCBvZiBQb29sIDAuXG4gICAgcG9vbC5maW5hbGl6ZVBvb2woZGVsZWdhdGVfMS5hZGRyZXNzLCBMUF9UT0tFTiwgWlBfVE9LRU4sIENQX1RPS0VOLCAwKTtcbiAgICBcbiAgICBsZXQgYmxvY2sgPSBHbG9iYWxzLnNldGNvbnRpbmdlbmN5UGxhbihjaGFpbiwgdHJ1ZSwgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcyk7XG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soW1xuICAgICAgU3VwcGxpZXJJbnRlcmZhY2Uuc2VuZEZ1bmRzWEJUQygxLExQX1RPS0VOLDAsWlBfVE9LRU4sTElRVUlESVRZX1ZBVUxULFhCVEMsMTAwXzAwMF8wMDAsIFJFV0FSRFNfQ0FMQywgTFBfMS5hZGRyZXNzKVxuICAgIF0pO1xuXG4gICAgbGV0IGdsb2JhbHMgPSBHbG9iYWxzLmdldEdsb2JhbHMoY2hhaW4sIGRlcGxveWVyV2FsbGV0LmFkZHJlc3MpLmV4cGVjdFR1cGxlKCk7XG4gICAgbGV0IGNvb2xkb3duVGltZSA9IGNvbnN1bWVVaW50KGdsb2JhbHNbXCJscC1jb29sZG93bi1wZXJpb2RcIl0pO1xuICAgIGxldCB1bnN0YWtlV2luZG93ID0gY29uc3VtZVVpbnQoZ2xvYmFsc1tcImxwLXVuc3Rha2Utd2luZG93XCJdKTtcblxuICAgIGJsb2NrID0gcG9vbC5zaWduYWxXaXRoZHJhd2FsKExQX1RPS0VOLDAsIDEwMF8wMDBfMDAwLCBMUF8xLmFkZHJlc3MpO1xuXG4gICAgY2hhaW4ubWluZUVtcHR5QmxvY2soY29vbGRvd25UaW1lIC0gMTEpO1xuICAgIC8vIGxvY2t1cCBwZXJpb2QgaW4gcHJvZ3Jlc3MgZXZlbiBhZnRlciBjb29sZG93biBwZXJpb2RcblxuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFtTdXBwbGllckludGVyZmFjZS53aXRoZHJhd1hCVEMoMTAwXzAwMF8wMDAsTFBfVE9LRU4sWlBfVE9LRU4sMCxMSVFVSURJVFlfVkFVTFQsWEJUQyxMUF8xLmFkZHJlc3MpXSk7XG4gICAgYmxvY2sucmVjZWlwdHNbMF0ucmVzdWx0LmV4cGVjdEVycigpLmV4cGVjdFVpbnQoRVJST1JTLkVSUl9GVU5EU19MT0NLRUQpO1xuXG4gICAgLy8gd2FpdCBhcmJpdHJhcmlyaWx5IGxhcmdlIG51bWJlclxuICAgIGNoYWluLm1pbmVFbXB0eUJsb2NrKChjb29sZG93blRpbWUgKiAyKSk7XG5cbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbU3VwcGxpZXJJbnRlcmZhY2Uud2l0aGRyYXdYQlRDKDEwMF8wMDBfMDAwLExQX1RPS0VOLFpQX1RPS0VOLDAsTElRVUlESVRZX1ZBVUxULFhCVEMsTFBfMS5hZGRyZXNzKV0pO1xuICAgIGJsb2NrLnJlY2VpcHRzWzBdLnJlc3VsdC5leHBlY3RFcnIoKS5leHBlY3RVaW50KEVSUk9SUy5FUlJfVU5TVEFLRV9XSU5ET1dfRVhQSVJFRCk7XG5cbiAgICBwb29sLnNpZ25hbFdpdGhkcmF3YWwoTFBfVE9LRU4sMCwgMTAwXzAwMF8wMDAsIExQXzEuYWRkcmVzcyk7XG4gICAgXG4gICAgY2hhaW4ubWluZUVtcHR5QmxvY2soY29vbGRvd25UaW1lKTtcblxuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFtTdXBwbGllckludGVyZmFjZS53aXRoZHJhd1hCVEMoMTAwXzAwMF8wMDAsTFBfVE9LRU4sWlBfVE9LRU4sMCxMSVFVSURJVFlfVkFVTFQsWEJUQyxMUF8xLmFkZHJlc3MpXSk7XG4gICAgYmxvY2sucmVjZWlwdHNbMF0ucmVzdWx0LmV4cGVjdE9rKCk7XG4gICAgXG4gICAgYXNzZXJ0RXF1YWxzKGNoYWluLmdldEFzc2V0c01hcHMoKS5hc3NldHNbXCIuV3JhcHBlZC1CaXRjb2luLndyYXBwZWQtYml0Y29pblwiXVtMUF8xLmFkZHJlc3NdLCAxMDBfMDAwXzAwMF8wMDBfMDAwKTtcbiAgfSxcbn0pO1xuXG5cbkNsYXJpbmV0LnRlc3Qoe1xuICBuYW1lOiBcIkxpcXVpZGl0eSBwcm92aWRlcnMgY2FuIHNlbmQgeEJUQywgYnV0IHdpdGhkcmF3YWwgaXMgYmxvY2tlZCB3aGVuIGxvY2t1cCBpcyBzdGlsbCBvbmdvaW5nXCIsXG4gIGFzeW5jIGZuKGNoYWluOiBDaGFpbiwgYWNjb3VudHM6IE1hcDxzdHJpbmcsIEFjY291bnQ+KSB7XG4gICAgbGV0IGRlcGxveWVyV2FsbGV0ID0gYWNjb3VudHMuZ2V0KFwiZGVwbG95ZXJcIikgYXMgQWNjb3VudDtcbiAgICBsZXQgTFBfMSA9IGFjY291bnRzLmdldChcIndhbGxldF8xXCIpIGFzIEFjY291bnQ7IC8vIExQXzFcbiAgICBsZXQgTFBfMiA9IGFjY291bnRzLmdldChcIndhbGxldF8yXCIpIGFzIEFjY291bnQ7IC8vIExQXzJcbiAgICBsZXQgY292ZXJQb29sUHJvdmlkZXIgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfM1wiKSBhcyBBY2NvdW50OyAvLyBDb3Zlcl8xXG4gICAgbGV0IGRlbGVnYXRlXzEgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfN1wiKSBhcyBBY2NvdW50OyAvLyBEZWxlZ2F0ZV8xXG4gICAgbGV0IGJvcnJvd2VyXzEgPSBhY2NvdW50cy5nZXQoXCJ3YWxsZXRfOFwiKSBhcyBBY2NvdW50OyAvLyBib3Jyb3dlcl8xXG5cbiAgICBsZXQgYXNzZXRNYXBzID0gY2hhaW4uZ2V0QXNzZXRzTWFwcygpO1xuICAgIGxldCBwb29sID0gbmV3IFBvb2woY2hhaW4sIGRlcGxveWVyV2FsbGV0KTtcbiAgICBsZXQgbG9hbiA9IG5ldyBMb2FuKGNoYWluLCBkZXBsb3llcldhbGxldCk7XG4gICAgbGV0IGNvdmVyUG9vbCA9IG5ldyBDb3ZlclBvb2woY2hhaW4sIGRlcGxveWVyV2FsbGV0KTtcbiAgICBcbiAgICAvLyBQb29sIGlzIGNyZWF0ZWQgYnkgRGVwbG95ZXIuIFBvb2wgRGVsZWdhdGUgaXMgYXNzaWduZWQuXG4gICAgbGV0IGJsb2NrID0gcG9vbC5jcmVhdGVQb29sKGRlbGVnYXRlXzEuYWRkcmVzcyxMUF9UT0tFTixaUF9UT0tFTixQQVlNRU5ULFJFV0FSRFNfQ0FMQywxMDAwLDEwMDAsMTBfMDAwXzAwMF8wMDAsMTBfMDAwXzAwMF8wMDAsNixNQVhfTUFUVVJJVFlfTEVOR1RILExJUVVJRElUWV9WQVVMVCxDUF9UT0tFTixDT1ZFUl9WQVVMVCxDUF9SRVdBUkRTX1RPS0VOLFhCVEMsdHJ1ZSk7XG4gICAgLy8gQ292ZXIgUG9vbCBQcm92aWRlciBzZW5kcyBmdW5kcyB0byB0aGUgY292ZXIgcG9vbCBvZiBQb29sIDAuXG4gICAgYmxvY2sgPSBwb29sLmZpbmFsaXplUG9vbChkZWxlZ2F0ZV8xLmFkZHJlc3MsIExQX1RPS0VOLCBaUF9UT0tFTiwgQ1BfVE9LRU4sIDApO1xuICAgIFxuICAgIGJsb2NrID0gR2xvYmFscy5zZXRjb250aW5nZW5jeVBsYW4oY2hhaW4sIHRydWUsIGRlcGxveWVyV2FsbGV0LmFkZHJlc3MpO1xuICAgIGJsb2NrID0gY2hhaW4ubWluZUJsb2NrKFtcbiAgICAgIFN1cHBsaWVySW50ZXJmYWNlLnNlbmRGdW5kc1hCVEMoNixMUF9UT0tFTiwwLFpQX1RPS0VOLExJUVVJRElUWV9WQVVMVCxYQlRDLDEwMF8wMDBfMDAwLCBSRVdBUkRTX0NBTEMsIExQXzEuYWRkcmVzcylcbiAgICBdKTtcblxuICAgIGxldCBnbG9iYWxzID0gR2xvYmFscy5nZXRHbG9iYWxzKGNoYWluLCBkZXBsb3llcldhbGxldC5hZGRyZXNzKS5leHBlY3RUdXBsZSgpO1xuICAgIGxldCBjb29sZG93blRpbWUgPSBjb25zdW1lVWludChnbG9iYWxzW1wibHAtY29vbGRvd24tcGVyaW9kXCJdKTtcbiAgICBsZXQgdW5zdGFrZVdpbmRvdyA9IGNvbnN1bWVVaW50KGdsb2JhbHNbXCJscC11bnN0YWtlLXdpbmRvd1wiXSk7XG5cbiAgICBibG9jayA9IHBvb2wuc2lnbmFsV2l0aGRyYXdhbChMUF9UT0tFTiwwLCAxMDBfMDAwXzAwMCwgTFBfMS5hZGRyZXNzKTtcblxuICAgIC8vIHdhaXQgYSBjeWNsZSBsZW5ndGhcbiAgICBjaGFpbi5taW5lRW1wdHlCbG9jayhDWUNMRV9MRU5HVEgpO1xuXG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soW1N1cHBsaWVySW50ZXJmYWNlLndpdGhkcmF3WEJUQygxMDBfMDAwXzAwMCxMUF9UT0tFTixaUF9UT0tFTiwwLExJUVVJRElUWV9WQVVMVCxYQlRDLExQXzEuYWRkcmVzcyldKTtcbiAgICBibG9jay5yZWNlaXB0c1swXS5yZXN1bHQuZXhwZWN0RXJyKCkuZXhwZWN0VWludChFUlJPUlMuRVJSX1VOU1RBS0VfV0lORE9XX0VYUElSRUQpO1xuXG4gICAgcG9vbC5zaWduYWxXaXRoZHJhd2FsKExQX1RPS0VOLDAsIDEwMF8wMDBfMDAwLCBMUF8xLmFkZHJlc3MpO1xuICAgIFxuICAgIC8vIHdhaXQgYSBjb29sZG93biBjeWNsZVxuICAgIGNoYWluLm1pbmVFbXB0eUJsb2NrKGNvb2xkb3duVGltZSk7XG5cbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbU3VwcGxpZXJJbnRlcmZhY2Uud2l0aGRyYXdYQlRDKDEwMF8wMDBfMDAwLExQX1RPS0VOLFpQX1RPS0VOLDAsTElRVUlESVRZX1ZBVUxULFhCVEMsTFBfMS5hZGRyZXNzKV0pO1xuICAgIGJsb2NrLnJlY2VpcHRzWzBdLnJlc3VsdC5leHBlY3RFcnIoKS5leHBlY3RVaW50KEVSUk9SUy5FUlJfRlVORFNfTE9DS0VEKTtcblxuICAgIC8vIG5vdGhpbmcgbW92ZWRcbiAgICBhc3NlcnRFcXVhbHMoY2hhaW4uZ2V0QXNzZXRzTWFwcygpLmFzc2V0c1tcIi5XcmFwcGVkLUJpdGNvaW4ud3JhcHBlZC1iaXRjb2luXCJdW0xQXzEuYWRkcmVzc10sIDEwMF8wMDBfMDAwXzAwMF8wMDAgLSAxMDBfMDAwXzAwMCk7XG5cbiAgICAvLyB3YWl0IHRoZSByZW1haW5pbmcgY29tbWl0bWVudCB0aW1lIG1pbnVzIHRoZSBwYXNzZWQgdGltZSBhbmQgYSBjb29sZG93biBwZXJpb2QgYWhlYWQgb2YgdGltZVxuICAgIGNoYWluLm1pbmVFbXB0eUJsb2NrKChDWUNMRV9MRU5HVEggKiA1KSAtICgyICogY29vbGRvd25UaW1lKSk7XG4gICAgcG9vbC5zaWduYWxXaXRoZHJhd2FsKExQX1RPS0VOLDAsIDEwMF8wMDBfMDAwLCBMUF8xLmFkZHJlc3MpO1xuXG4gICAgY2hhaW4ubWluZUVtcHR5QmxvY2soY29vbGRvd25UaW1lKTtcbiAgICBcbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbU3VwcGxpZXJJbnRlcmZhY2Uud2l0aGRyYXdYQlRDKDEwMF8wMDBfMDAwLExQX1RPS0VOLFpQX1RPS0VOLDAsTElRVUlESVRZX1ZBVUxULFhCVEMsTFBfMS5hZGRyZXNzKV0pO1xuICAgIFxuICAgIC8vIGZ1bmRzIG1vdmVkIHRvIExQXzFcbiAgICBhc3NlcnRFcXVhbHMoY2hhaW4uZ2V0QXNzZXRzTWFwcygpLmFzc2V0c1tcIi5XcmFwcGVkLUJpdGNvaW4ud3JhcHBlZC1iaXRjb2luXCJdW0xQXzEuYWRkcmVzc10sIDEwMF8wMDBfMDAwXzAwMF8wMDApO1xuICB9LFxufSk7XG5cbkNsYXJpbmV0LnRlc3Qoe1xuICBuYW1lOiBcIkJvcnJvd2VyIGNhbiBkcmF3ZG93biBmdW5kcyBpbiBwb29sIHVzaW5nIHhCVENcIixcbiAgYXN5bmMgZm4oY2hhaW46IENoYWluLCBhY2NvdW50czogTWFwPHN0cmluZywgQWNjb3VudD4pIHtcbiAgICBsZXQgZGVwbG95ZXJXYWxsZXQgPSBhY2NvdW50cy5nZXQoXCJkZXBsb3llclwiKSBhcyBBY2NvdW50O1xuICAgIGxldCBMUF8xID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzFcIikgYXMgQWNjb3VudDsgLy8gTFBfMVxuICAgIGxldCBkZWxlZ2F0ZV8xID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzdcIikgYXMgQWNjb3VudDsgLy8gRGVsZWdhdGVfMVxuICAgIGxldCBib3Jyb3dlcl8xID0gYWNjb3VudHMuZ2V0KFwid2FsbGV0XzhcIikgYXMgQWNjb3VudDsgLy8gYm9ycm93ZXJfMVxuXG4gICAgbGV0IGFzc2V0TWFwcyA9IGNoYWluLmdldEFzc2V0c01hcHMoKTtcbiAgICBsZXQgcG9vbCA9IG5ldyBQb29sKGNoYWluLCBkZXBsb3llcldhbGxldCk7XG4gICAgbGV0IGxvYW4gPSBuZXcgTG9hbihjaGFpbiwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIFxuICAgIGxldCBibG9jayA9IEdsb2JhbHMub25ib2FyZFVzZXJBZGRyZXNzKGNoYWluLCBib3Jyb3dlcl8xLmFkZHJlc3MsIFAyUEtIX1ZFUlNJT04sIEhBU0gsIGRlcGxveWVyV2FsbGV0LmFkZHJlc3MpO1xuICAgIGxldCBhbW91bnRCZWdpbiA9IGNoYWluLmdldEFzc2V0c01hcHMoKS5hc3NldHNbXCIuV3JhcHBlZC1CaXRjb2luLndyYXBwZWQtYml0Y29pblwiXVtcIlNUM05CUlNGS1gyOEZRMlpKMU1BS1g1OEhLSFNER05WNU43UjIxWENQXCJdXG5cbiAgICBwb29sLmNyZWF0ZVBvb2woZGVsZWdhdGVfMS5hZGRyZXNzLExQX1RPS0VOLFpQX1RPS0VOLFBBWU1FTlQsUkVXQVJEU19DQUxDLDEwMDAsMTAwMCwxMF8wMDBfMDAwXzAwMCwxMF8wMDBfMDAwXzAwMCwxLE1BWF9NQVRVUklUWV9MRU5HVEgsTElRVUlESVRZX1ZBVUxULENQX1RPS0VOLENPVkVSX1ZBVUxULENQX1JFV0FSRFNfVE9LRU4sWEJUQyx0cnVlKTtcbiAgICBwb29sLmZpbmFsaXplUG9vbChkZWxlZ2F0ZV8xLmFkZHJlc3MsIExQX1RPS0VOLCBaUF9UT0tFTiwgQ1BfVE9LRU4sIDApO1xuXG4gICAgYmxvY2sgPSBHbG9iYWxzLnNldGNvbnRpbmdlbmN5UGxhbihjaGFpbiwgdHJ1ZSwgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcyk7XG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soW1N1cHBsaWVySW50ZXJmYWNlLnNlbmRGdW5kc1hCVEMoMSxMUF9UT0tFTiwwLFpQX1RPS0VOLExJUVVJRElUWV9WQVVMVCxYQlRDLDEwMF8wMDBfMDAwLCBSRVdBUkRTX0NBTEMsIExQXzEuYWRkcmVzcyldKTtcbiAgICBcbiAgICBjb25zdCBMT0FOX0FNT1VOVCA9IDEwMF8wMDBfMDAwO1xuXG4gICAgYmxvY2sgPSBwb29sLmNyZWF0ZUxvYW4oTFBfVE9LRU4sMCxMT0FOX0FNT1VOVCxYQlRDLDAsWEJUQywzMDAsMTI5NjAsMTQ0MCxDT0xMX1ZBVUxULEZVTkRJTkdfVkFVTFQsYm9ycm93ZXJfMS5hZGRyZXNzKTtcbiAgICBwb29sLmZ1bmRMb2FuKDAsTFBfVE9LRU4sMCxMSVFVSURJVFlfVkFVTFQsRlVORElOR19WQVVMVCxYQlRDLGRlbGVnYXRlXzEuYWRkcmVzcyk7XG5cbiAgICBjaGFpbi5taW5lQmxvY2soW1N1cHBsaWVySW50ZXJmYWNlLnVwZGF0ZUxpcXVpZGl0eShjaGFpbi5ibG9ja0hlaWdodCwgMTAwXzAwMF8wMDAsIGRlcGxveWVyV2FsbGV0LmFkZHJlc3MpXSk7XG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soW1N1cHBsaWVySW50ZXJmYWNlLmRyYXdkb3duWEJUQygwLCBMUF9UT0tFTiwgMCwgWEJUQywgQ09MTF9WQVVMVCwgRlVORElOR19WQVVMVCxTV0FQX1JPVVRFUixYQlRDLCBib3Jyb3dlcl8xLmFkZHJlc3MpXSk7XG4gICAgXG4gICAgbGV0IGFtb3VudFNlbnQgPSBjb25zdW1lVWludChibG9jay5yZWNlaXB0c1swXS5yZXN1bHQuZXhwZWN0T2soKS5leHBlY3RUdXBsZSgpLnNhdHMpO1xuICAgIGFzc2VydEVxdWFscyhjaGFpbi5nZXRBc3NldHNNYXBzKCkuYXNzZXRzW1wiLldyYXBwZWQtQml0Y29pbi53cmFwcGVkLWJpdGNvaW5cIl1bXCJTVDNOQlJTRktYMjhGUTJaSjFNQUtYNThIS0hTREdOVjVON1IyMVhDUFwiXSwgYW1vdW50QmVnaW4gKyBhbW91bnRTZW50KTtcbiAgfSxcbn0pO1xuXG5DbGFyaW5ldC50ZXN0KHtcbiAgbmFtZTogXCJCb3Jyb3dlciBjYW5ub3QgZHJhd2Rvd24gZnVuZHMgaW4gcG9vbCB1c2luZyB4QlRDIGlmIGNvbnRpbmdlbmN5IHBsYW4gYWN0aXZhdGVkIGFuZCB0aGVuIGRlYWN0aXZhdGVkXCIsXG4gIGFzeW5jIGZuKGNoYWluOiBDaGFpbiwgYWNjb3VudHM6IE1hcDxzdHJpbmcsIEFjY291bnQ+KSB7XG4gICAgbGV0IGRlcGxveWVyV2FsbGV0ID0gYWNjb3VudHMuZ2V0KFwiZGVwbG95ZXJcIikgYXMgQWNjb3VudDtcbiAgICBsZXQgTFBfMSA9IGFjY291bnRzLmdldChcIndhbGxldF8xXCIpIGFzIEFjY291bnQ7IC8vIExQXzFcbiAgICBsZXQgZGVsZWdhdGVfMSA9IGFjY291bnRzLmdldChcIndhbGxldF83XCIpIGFzIEFjY291bnQ7IC8vIERlbGVnYXRlXzFcbiAgICBsZXQgYm9ycm93ZXJfMSA9IGFjY291bnRzLmdldChcIndhbGxldF84XCIpIGFzIEFjY291bnQ7IC8vIGJvcnJvd2VyXzFcblxuICAgIGxldCBhc3NldE1hcHMgPSBjaGFpbi5nZXRBc3NldHNNYXBzKCk7XG4gICAgbGV0IHBvb2wgPSBuZXcgUG9vbChjaGFpbiwgZGVwbG95ZXJXYWxsZXQpO1xuICAgIGxldCBsb2FuID0gbmV3IExvYW4oY2hhaW4sIGRlcGxveWVyV2FsbGV0KTtcbiAgICBcbiAgICBsZXQgYmxvY2sgPSBHbG9iYWxzLm9uYm9hcmRVc2VyQWRkcmVzcyhjaGFpbiwgYm9ycm93ZXJfMS5hZGRyZXNzLCBQMlBLSF9WRVJTSU9OLCBIQVNILCBkZXBsb3llcldhbGxldC5hZGRyZXNzKTtcbiAgICBsZXQgYW1vdW50QmVnaW4gPSBjaGFpbi5nZXRBc3NldHNNYXBzKCkuYXNzZXRzW1wiLldyYXBwZWQtQml0Y29pbi53cmFwcGVkLWJpdGNvaW5cIl1bXCJTVDNOQlJTRktYMjhGUTJaSjFNQUtYNThIS0hTREdOVjVON1IyMVhDUFwiXTtcblxuICAgIHBvb2wuY3JlYXRlUG9vbChkZWxlZ2F0ZV8xLmFkZHJlc3MsTFBfVE9LRU4sWlBfVE9LRU4sUEFZTUVOVCxSRVdBUkRTX0NBTEMsMTAwMCwxMDAwLDEwXzAwMF8wMDBfMDAwLDEwXzAwMF8wMDBfMDAwLDEsTUFYX01BVFVSSVRZX0xFTkdUSCxMSVFVSURJVFlfVkFVTFQsQ1BfVE9LRU4sQ09WRVJfVkFVTFQsQ1BfUkVXQVJEU19UT0tFTixYQlRDLHRydWUpO1xuICAgIHBvb2wuZmluYWxpemVQb29sKGRlbGVnYXRlXzEuYWRkcmVzcywgTFBfVE9LRU4sIFpQX1RPS0VOLCBDUF9UT0tFTiwgMCk7XG5cbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbU3VwcGxpZXJJbnRlcmZhY2Uuc2VuZEZ1bmRzWEJUQygxLExQX1RPS0VOLDAsWlBfVE9LRU4sTElRVUlESVRZX1ZBVUxULFhCVEMsMTAwXzAwMF8wMDAsIFJFV0FSRFNfQ0FMQywgTFBfMS5hZGRyZXNzKV0pO1xuICAgIGJsb2NrLnJlY2VpcHRzWzBdLnJlc3VsdC5leHBlY3RFcnIoKTtcbiAgICBibG9jayA9IEdsb2JhbHMuc2V0Y29udGluZ2VuY3lQbGFuKGNoYWluLCB0cnVlLCBkZXBsb3llcldhbGxldC5hZGRyZXNzKTtcbiAgICBibG9jayA9IGNoYWluLm1pbmVCbG9jayhbU3VwcGxpZXJJbnRlcmZhY2Uuc2VuZEZ1bmRzWEJUQygxLExQX1RPS0VOLDAsWlBfVE9LRU4sTElRVUlESVRZX1ZBVUxULFhCVEMsMTAwXzAwMF8wMDAsIFJFV0FSRFNfQ0FMQywgTFBfMS5hZGRyZXNzKV0pO1xuICAgIGJsb2NrLnJlY2VpcHRzWzBdLnJlc3VsdC5leHBlY3RPaygpO1xuICAgIFxuICAgIGNvbnN0IExPQU5fQU1PVU5UID0gMTAwXzAwMF8wMDA7XG5cbiAgICBibG9jayA9IHBvb2wuY3JlYXRlTG9hbihMUF9UT0tFTiwwLExPQU5fQU1PVU5ULFhCVEMsMCxYQlRDLDMwMCwxMjk2MCwxNDQwLENPTExfVkFVTFQsRlVORElOR19WQVVMVCxib3Jyb3dlcl8xLmFkZHJlc3MpO1xuICAgIHBvb2wuZnVuZExvYW4oMCxMUF9UT0tFTiwwLExJUVVJRElUWV9WQVVMVCxGVU5ESU5HX1ZBVUxULFhCVEMsZGVsZWdhdGVfMS5hZGRyZXNzKTtcblxuICAgIGNoYWluLm1pbmVCbG9jayhbU3VwcGxpZXJJbnRlcmZhY2UudXBkYXRlTGlxdWlkaXR5KGNoYWluLmJsb2NrSGVpZ2h0LCAxMDBfMDAwXzAwMCwgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcyldKTtcbiAgICBibG9jayA9IEdsb2JhbHMuc2V0Y29udGluZ2VuY3lQbGFuKGNoYWluLCBmYWxzZSwgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcyk7XG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soW1N1cHBsaWVySW50ZXJmYWNlLmRyYXdkb3duWEJUQygwLCBMUF9UT0tFTiwgMCwgWEJUQywgQ09MTF9WQVVMVCwgRlVORElOR19WQVVMVCxTV0FQX1JPVVRFUixYQlRDLCBib3Jyb3dlcl8xLmFkZHJlc3MpXSk7XG4gICAgYmxvY2sucmVjZWlwdHNbMF0ucmVzdWx0LmV4cGVjdEVycigpO1xuXG4gICAgYmxvY2sgPSBHbG9iYWxzLnNldGNvbnRpbmdlbmN5UGxhbihjaGFpbiwgdHJ1ZSwgZGVwbG95ZXJXYWxsZXQuYWRkcmVzcyk7XG4gICAgYmxvY2sgPSBjaGFpbi5taW5lQmxvY2soW1N1cHBsaWVySW50ZXJmYWNlLmRyYXdkb3duWEJUQygwLCBMUF9UT0tFTiwgMCwgWEJUQywgQ09MTF9WQVVMVCwgRlVORElOR19WQVVMVCxTV0FQX1JPVVRFUixYQlRDLCBib3Jyb3dlcl8xLmFkZHJlc3MpXSk7XG4gICAgYmxvY2sucmVjZWlwdHNbMF0ucmVzdWx0LmV4cGVjdE9rKCk7XG4gICAgXG4gICAgXG4gICAgbGV0IGFtb3VudFNlbnQgPSBjb25zdW1lVWludChibG9jay5yZWNlaXB0c1swXS5yZXN1bHQuZXhwZWN0T2soKS5leHBlY3RUdXBsZSgpLnNhdHMpO1xuICAgIGFzc2VydEVxdWFscyhjaGFpbi5nZXRBc3NldHNNYXBzKCkuYXNzZXRzW1wiLldyYXBwZWQtQml0Y29pbi53cmFwcGVkLWJpdGNvaW5cIl1bXCJTVDNOQlJTRktYMjhGUTJaSjFNQUtYNThIS0hTREdOVjVON1IyMVhDUFwiXSwgYW1vdW50QmVnaW4gKyBh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