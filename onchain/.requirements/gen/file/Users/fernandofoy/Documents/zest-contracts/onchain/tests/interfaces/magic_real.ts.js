import { Tx, types } from 'https://deno.land/x/clarinet@v1.0.2/index.ts';
import { Buffer } from "https://deno.land/std@0.159.0/node/buffer.ts";
class Magic {
    static escrowSwap(block, prevBlocks, tx, proof, outputIndex, sender, recipient, expirationBuff, hash, swapperBuff, supplierId, caller) {
        return Tx.contractCall("magic-protocol", 'escrow-swap', [
            types.tuple({
                header: types.buff(Buffer.from(block.header, "hex")),
                height: types.uint(block.height)
            }),
            types.list(prevBlocks.map((val)=>types.buff(Buffer.from(val, "hex")))),
            types.buff(Buffer.from(tx, "hex")),
            types.tuple({
                "tx-index": types.uint(proof['tx-index']),
                "hashes": types.list(proof.hashes.map((val)=>types.buff(Buffer.from(val, "hex")))),
                "tree-depth": types.uint(proof['tree-depth'])
            }),
            types.uint(outputIndex),
            types.buff(Buffer.from(sender, "hex")),
            types.buff(Buffer.from(recipient, "hex")),
            types.buff(Buffer.from(expirationBuff, "hex")),
            types.buff(Buffer.from(hash, "hex")),
            types.buff(Buffer.from(swapperBuff, "hex")),
            types.uint(supplierId), 
        ], caller);
    }
    static registerSupplier(publicKey, inboundFee, outboundFee, outboundBaseFee, inboundBaseFee, name, funds, caller) {
        return Tx.contractCall("magic-protocol", 'register-supplier', [
            types.buff(Buffer.from(publicKey, "hex")),
            types.some(types.int(inboundFee)),
            types.some(types.int(outboundFee)),
            types.int(outboundBaseFee),
            types.int(inboundBaseFee),
            types.ascii(name),
            types.uint(funds), 
        ], caller);
    }
    static initializeSwapper(caller) {
        return Tx.contractCall("magic-protocol", 'initialize-swapper', [], caller);
    }
    static finalizeSwap(txid, preimage, caller) {
        return Tx.contractCall("magic-protocol", 'finalize-swap', [
            types.buff(Buffer.from(txid, "hex")),
            types.buff(Buffer.from(preimage, "hex")), 
        ], caller);
    }
    static burnBlockHeader(chain, height, header, caller) {
        return chain.callReadOnlyFn(`test-utils`, "was-mined", [
            types.uint(height),
            types.buff(Buffer.from(header, "hex"))
        ], caller).result;
    }
    static getSupplier(chain, supplierId, caller) {
        return chain.callReadOnlyFn(`magic-protocol`, "get-supplier", [
            types.uint(supplierId)
        ], caller).result;
    }
}
export { Magic };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvZmVybmFuZG9mb3kvRG9jdW1lbnRzL3plc3QtY29udHJhY3RzL29uY2hhaW4vdGVzdHMvaW50ZXJmYWNlcy9tYWdpY19yZWFsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFR4LCBDaGFpbiwgQWNjb3VudCwgdHlwZXMgfSBmcm9tICdodHRwczovL2Rlbm8ubGFuZC94L2NsYXJpbmV0QHYxLjAuMi9pbmRleC50cyc7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTU5LjAvbm9kZS9idWZmZXIudHNcIjtcblxuY2xhc3MgTWFnaWMge1xuICAgIHN0YXRpYyBlc2Nyb3dTd2FwKFxuICAgICAgYmxvY2s6IHsgaGVhZGVyOiBzdHJpbmcsIGhlaWdodDogbnVtYmVyIH0sXG4gICAgICBwcmV2QmxvY2tzOiBzdHJpbmdbXSxcbiAgICAgIHR4OiBzdHJpbmcsXG4gICAgICBwcm9vZjogeyBcInR4LWluZGV4XCI6IG51bWJlciwgXCJoYXNoZXNcIjogc3RyaW5nW10sIFwidHJlZS1kZXB0aFwiOiBudW1iZXIgfSxcbiAgICAgIG91dHB1dEluZGV4OiBudW1iZXIsXG4gICAgICBzZW5kZXI6IHN0cmluZyxcbiAgICAgIHJlY2lwaWVudDogc3RyaW5nLFxuICAgICAgZXhwaXJhdGlvbkJ1ZmY6IHN0cmluZyxcbiAgICAgIGhhc2g6IHN0cmluZyxcbiAgICAgIHN3YXBwZXJCdWZmOiBzdHJpbmcsXG4gICAgICBzdXBwbGllcklkOiBudW1iZXIsXG4gICAgICBjYWxsZXI6IHN0cmluZyxcbiAgICAgICkge1xuICAgICAgcmV0dXJuIFR4LmNvbnRyYWN0Q2FsbChcbiAgICAgICAgXCJtYWdpYy1wcm90b2NvbFwiLFxuICAgICAgICAnZXNjcm93LXN3YXAnLFxuICAgICAgICBbXG4gICAgICAgICAgdHlwZXMudHVwbGUoe1xuICAgICAgICAgICAgaGVhZGVyOiB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKGJsb2NrLmhlYWRlciwgXCJoZXhcIikpLFxuICAgICAgICAgICAgaGVpZ2h0OiB0eXBlcy51aW50KGJsb2NrLmhlaWdodClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB0eXBlcy5saXN0KHByZXZCbG9ja3MubWFwKCh2YWwpID0+IHR5cGVzLmJ1ZmYoQnVmZmVyLmZyb20odmFsLCBcImhleFwiKSkpKSxcbiAgICAgICAgICB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKHR4LCBcImhleFwiKSksXG4gICAgICAgICAgdHlwZXMudHVwbGUoe1xuICAgICAgICAgICAgXCJ0eC1pbmRleFwiOiB0eXBlcy51aW50KHByb29mWyd0eC1pbmRleCddKSxcbiAgICAgICAgICAgIFwiaGFzaGVzXCI6IHR5cGVzLmxpc3QocHJvb2YuaGFzaGVzLm1hcCh2YWwgPT4gdHlwZXMuYnVmZihCdWZmZXIuZnJvbSh2YWwsIFwiaGV4XCIpKSkpLFxuICAgICAgICAgICAgXCJ0cmVlLWRlcHRoXCI6IHR5cGVzLnVpbnQocHJvb2ZbJ3RyZWUtZGVwdGgnXSlcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB0eXBlcy51aW50KG91dHB1dEluZGV4KSxcbiAgICAgICAgICB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKHNlbmRlciwgXCJoZXhcIikpLFxuICAgICAgICAgIHR5cGVzLmJ1ZmYoQnVmZmVyLmZyb20ocmVjaXBpZW50LCBcImhleFwiKSksXG4gICAgICAgICAgdHlwZXMuYnVmZihCdWZmZXIuZnJvbShleHBpcmF0aW9uQnVmZiwgXCJoZXhcIikpLFxuICAgICAgICAgIHR5cGVzLmJ1ZmYoQnVmZmVyLmZyb20oaGFzaCwgXCJoZXhcIikpLFxuICAgICAgICAgIHR5cGVzLmJ1ZmYoQnVmZmVyLmZyb20oc3dhcHBlckJ1ZmYsIFwiaGV4XCIpKSxcbiAgICAgICAgICB0eXBlcy51aW50KHN1cHBsaWVySWQpLFxuICAgICAgICBdLFxuICAgICAgICBjYWxsZXIpO1xuICAgIH1cblxuICAgIHN0YXRpYyByZWdpc3RlclN1cHBsaWVyKFxuICAgICAgcHVibGljS2V5OiBzdHJpbmcsXG4gICAgICBpbmJvdW5kRmVlOiBudW1iZXIsXG4gICAgICBvdXRib3VuZEZlZTogbnVtYmVyLFxuICAgICAgb3V0Ym91bmRCYXNlRmVlOiBudW1iZXIsXG4gICAgICBpbmJvdW5kQmFzZUZlZTogbnVtYmVyLFxuICAgICAgbmFtZTogc3RyaW5nLFxuICAgICAgZnVuZHM6IG51bWJlcixcbiAgICAgIGNhbGxlcjogc3RyaW5nXG4gICAgKSB7XG4gICAgICByZXR1cm4gVHguY29udHJhY3RDYWxsKFxuICAgICAgICBcIm1hZ2ljLXByb3RvY29sXCIsXG4gICAgICAgICdyZWdpc3Rlci1zdXBwbGllcicsXG4gICAgICAgIFtcbiAgICAgICAgICB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKHB1YmxpY0tleSwgXCJoZXhcIikpLFxuICAgICAgICAgIHR5cGVzLnNvbWUodHlwZXMuaW50KGluYm91bmRGZWUpKSxcbiAgICAgICAgICB0eXBlcy5zb21lKHR5cGVzLmludChvdXRib3VuZEZlZSkpLFxuICAgICAgICAgIHR5cGVzLmludChvdXRib3VuZEJhc2VGZWUpLFxuICAgICAgICAgIHR5cGVzLmludChpbmJvdW5kQmFzZUZlZSksXG4gICAgICAgICAgdHlwZXMuYXNjaWkobmFtZSksXG4gICAgICAgICAgdHlwZXMudWludChmdW5kcyksXG4gICAgICAgIF0sXG4gICAgICAgIGNhbGxlcik7XG4gICAgfVxuXG4gICAgc3RhdGljIGluaXRpYWxpemVTd2FwcGVyKFxuICAgICAgY2FsbGVyOiBzdHJpbmdcbiAgICApIHtcbiAgICAgIHJldHVybiBUeC5jb250cmFjdENhbGwoXG4gICAgICAgICAgXCJtYWdpYy1wcm90b2NvbFwiLFxuICAgICAgICAgICdpbml0aWFsaXplLXN3YXBwZXInLFxuICAgICAgICAgIFtdLFxuICAgICAgICAgIGNhbGxlclxuICAgICAgICApO1xuICAgIH1cblxuICAgIHN0YXRpYyBmaW5hbGl6ZVN3YXAoXG4gICAgICB0eGlkOiBzdHJpbmcsXG4gICAgICBwcmVpbWFnZTogc3RyaW5nLFxuICAgICAgY2FsbGVyOiBzdHJpbmdcbiAgICApIHtcbiAgICAgIHJldHVybiBUeC5jb250cmFjdENhbGwoXG4gICAgICAgICAgXCJtYWdpYy1wcm90b2NvbFwiLFxuICAgICAgICAgICdmaW5hbGl6ZS1zd2FwJyxcbiAgICAgICAgICBbXG4gICAgICAgICAgICB0eXBlcy5idWZmKEJ1ZmZlci5mcm9tKHR4aWQsXCJoZXhcIikpLFxuICAgICAgICAgICAgdHlwZXMuYnVmZihCdWZmZXIuZnJvbShwcmVpbWFnZSxcImhleFwiKSksXG4gICAgICAgICAgXSxcbiAgICAgICAgICBjYWxsZXJcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYnVybkJsb2NrSGVhZGVyKGNoYWluOiBDaGFpbiwgaGVpZ2h0OiBudW1iZXIsIGhlYWRlcjogc3RyaW5nLCBjYWxsZXI6IHN0cmluZykge1xuICAgICAgcmV0dXJuIGNoYWluLmNhbGxSZWFkT25seUZuKGB0ZXN0LXV0aWxzYCwgXCJ3YXMtbWluZWRcIiwgWyB0eXBlcy51aW50KGhlaWdodCksIHR5cGVzLmJ1ZmYoQnVmZmVyLmZyb20oaGVhZGVyLCBcImhleFwiKSkgXSwgY2FsbGVyKS5yZXN1bHQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFN1cHBsaWVyKGNoYWluOkNoYWluLCBzdXBwbGllcklkOiBudW1iZXIsIGNhbGxlcjogc3RyaW5nKSB7XG4gICAgICByZXR1cm4gY2hhaW4uY2FsbFJlYWRPbmx5Rm4oYG1hZ2ljLXByb3RvY29sYCwgXCJnZXQtc3VwcGxpZXJcIiwgWyB0eXBlcy51aW50KHN1cHBsaWVySWQpIF0sIGNhbGxlcikucmVzdWx0O1xuICAgIH1cblxufVxuXG5leHBvcnQgeyBNYWdpYyB9OyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxTQUFTLEVBQUUsRUFBa0IsS0FBSyxRQUFRLDhDQUE4QyxDQUFDO0FBQ3pGLFNBQVMsTUFBTSxRQUFRLDhDQUE4QyxDQUFD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